dojo._xdResourceLoaded({depends:[["provide","dijit.Tree"],["require","dojo.fx"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._Container"],["require","dojo.cookie"]],defineResource:function(e){e._hasResource["dijit.Tree"]||(e._hasResource["dijit.Tree"]=!0,e.provide("dijit.Tree"),e.require("dojo.fx"),e.require("dijit._Widget"),e.require("dijit._Templated"),e.require("dijit._Container"),e.require("dojo.cookie"),e.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained],{item:null,isTreeNode:!0,label:"",isExpandable:null,isExpanded:!1,state:"UNCHECKED",templateString:'<div class="dijitTreeNode dijitTreeExpandLeaf dijitTreeChildrenNo" waiRole="presentation"\r\n	><span dojoAttachPoint="expandoNode" class="dijitTreeExpando" waiRole="presentation"\r\n	></span\r\n	><span dojoAttachPoint="expandoNodeText" class="dijitExpandoText" waiRole="presentation"\r\n	></span\r\n	>\r\n	<div dojoAttachPoint="contentNode" class="dijitTreeContent" waiRole="presentation">\r\n		<div dojoAttachPoint="iconNode" class="dijitInline dijitTreeIcon" waiRole="presentation"></div>\r\n		<span dojoAttachPoint="labelNode" class="dijitTreeLabel" wairole="treeitem" tabindex="-1"></span>\r\n	</div>\r\n</div>\r\n',postCreate:function(){this.setLabelNode(this.label),this._setExpando(),this._updateItemClasses(this.item),this.isExpandable&&dijit.setWaiState(this.labelNode,"expanded",this.isExpanded)},markProcessing:function(){this.state="LOADING",this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(e){this.iconNode.className="dijitInline dijitTreeIcon "+this.tree.getIconClass(e),this.labelNode.className="dijitTreeLabel "+this.tree.getLabelClass(e)},_updateLayout:function(){var t=this.getParent();t&&t.isTree&&t._hideRoot?e.addClass(this.domNode,"dijitTreeIsRoot"):e.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling())},_setExpando:function(t){var i=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],o=t?0:this.isExpandable?this.isExpanded?1:2:3;e.forEach(i,function(t){e.removeClass(this.expandoNode,t)},this),e.addClass(this.expandoNode,i[o]),this.expandoNodeText.innerHTML=t?"*":this.isExpandable?this.isExpanded?"-":"+":"*"},expand:function(){this.isExpanded||("playing"==this._wipeOut.status()&&this._wipeOut.stop(),this.isExpanded=!0,dijit.setWaiState(this.labelNode,"expanded","true"),dijit.setWaiRole(this.containerNode,"group"),this._setExpando(),this._wipeIn.play())},collapse:function(){this.isExpanded&&("playing"==this._wipeIn.status()&&this._wipeIn.stop(),this.isExpanded=!1,dijit.setWaiState(this.labelNode,"expanded","false"),this._setExpando(),this._wipeOut.play())},setLabelNode:function(e){this.labelNode.innerHTML="",this.labelNode.appendChild(document.createTextNode(e))},_setChildren:function(t){this.destroyDescendants(),this.state="LOADED";var i={};if(t&&t.length>0?(this.isExpandable=!0,this.containerNode||(this.containerNode=this.tree.containerNodeTemplate.cloneNode(!0),this.domNode.appendChild(this.containerNode)),e.forEach(t,function(t){var o=new dijit._TreeNode(e.mixin({tree:this.tree,label:this.tree.getLabel(t.item)},t));this.addChild(o);var n=this.tree.store.getIdentity(t.item);i[n]=o,this.tree.persist&&this.tree._openedItemIds[n]&&this.tree._expandNode(o)},this),e.forEach(this.getChildren(),function(e){e._updateLayout()})):this.isExpandable=!1,this._setExpando&&this._setExpando(!1),this.isTree&&this._hideRoot){var o=this.getChildren()[0],n=o?o.labelNode:this.domNode;n.setAttribute("tabIndex","0")}return this.containerNode&&!this._wipeIn&&(this._wipeIn=e.fx.wipeIn({node:this.containerNode,duration:150}),this._wipeOut=e.fx.wipeOut({node:this.containerNode,duration:150})),i},_addChildren:function(t){var i={};return t&&t.length>0&&(e.forEach(t,function(t){var o=new dijit._TreeNode(e.mixin({tree:this.tree,label:this.tree.getLabel(t.item)},t));this.addChild(o),i[this.tree.store.getIdentity(t.item)]=o},this),e.forEach(this.getChildren(),function(e){e._updateLayout()})),i},deleteNode:function(t){t.destroy();var i=this.getChildren();0==i.length&&(this.isExpandable=!1,this.collapse()),e.forEach(i,function(e){e._updateLayout()})},makeExpandable:function(){this.isExpandable=!0,this._setExpando(!1)}}),e.declare("dijit.Tree",dijit._TreeNode,{store:null,query:null,childrenAttr:["children"],templateString:'<div class="dijitTreeContainer" style="" waiRole="tree"\r\n	dojoAttachEvent="onclick:_onClick,onkeypress:_onKeyPress">\r\n	<div class="dijitTreeNode  dijitTreeIsRoot dijitTreeExpandLeaf dijitTreeChildrenNo" waiRole="presentation"\r\n		dojoAttachPoint="rowNode"\r\n		><span dojoAttachPoint="expandoNode" class="dijitTreeExpando" waiRole="presentation"\r\n		></span\r\n		><span dojoAttachPoint="expandoNodeText" class="dijitExpandoText" waiRole="presentation"\r\n		></span\r\n		>\r\n		<div dojoAttachPoint="contentNode" class="dijitTreeContent" waiRole="presentation">\r\n			<div dojoAttachPoint="iconNode" class="dijitInline dijitTreeIcon" waiRole="presentation"></div>\r\n			<span dojoAttachPoint="labelNode" class="dijitTreeLabel" wairole="treeitem" tabindex="0"></span>\r\n		</div>\r\n	</div>\r\n</div>\r\n',isExpandable:!0,isTree:!0,persist:!0,dndController:null,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,_publish:function(t,i){e.publish(this.id,[e.mixin({tree:this,event:t},i||{})])},postMixInProperties:function(){if(this.tree=this,this.lastFocused=this.labelNode,this._itemNodeMap={},this._hideRoot=!this.label,!this.store.getFeatures()["dojo.data.api.Identity"])throw new Error("dijit.tree requires access to a store supporting the dojo.data Identity api");this.cookieName||(this.cookieName=this.id+"SaveStateCookie"),this.store.getFeatures()["dojo.data.api.Notification"]&&(this.connect(this.store,"onNew","_onNewItem"),this.connect(this.store,"onDelete","_onDeleteItem"),this.connect(this.store,"onSet","_onSetItem"))},postCreate:function(){if(this.persist){var t=e.cookie(this.cookieName);this._openedItemIds={},t&&e.forEach(t.split(","),function(e){this._openedItemIds[e]=!0},this)}var i=document.createElement("div");if(i.style.display="none",i.className="dijitTreeContainer",dijit.setWaiRole(i,"presentation"),this.containerNodeTemplate=i,this._hideRoot&&(this.rowNode.style.display="none"),this.inherited("postCreate",arguments),this._expandNode(this),this.dndController){e.isString(this.dndController)&&(this.dndController=e.getObject(this.dndController));for(var o={},n=0;n<this.dndParams.length;n++)this[this.dndParams[n]]&&(o[this.dndParams[n]]=this[this.dndParams[n]]);this.dndController=new this.dndController(this,o)}this.connect(this.domNode,e.isIE?"onactivate":"onfocus","_onTreeFocus")},mayHaveChildren:function(t){return e.some(this.childrenAttr,function(e){return this.store.hasAttribute(t,e)},this)},getItemChildren:function(t,i){function o(){0==--a&&i(s)}var n=this.store;if(null==t)n.fetch({query:this.query,onComplete:i});else{for(var s=[],d=0;d<this.childrenAttr.length;d++)s=s.concat(n.getValues(t,this.childrenAttr[d]));var a=0;e.forEach(s,function(e){n.isItemLoaded(e)||a++}),0==a?i(s):e.forEach(s,function(e){n.isItemLoaded(e)||n.loadItem({item:e,onItem:o})})}},getItemParentIdentity:function(e,t){return this.store.getIdentity(t.item)},getLabel:function(e){return this.store.getLabel(e)},getIconClass:function(){},getLabelClass:function(){},_onLoadAllItems:function(t,i){var o=e.map(i,function(e){return{item:e,isExpandable:this.mayHaveChildren(e)}},this);e.mixin(this._itemNodeMap,t._setChildren(o)),this._expandNode(t)},_onKeyPress:function(t){if(!t.altKey){var i=dijit.getEnclosingWidget(t.target);if(i)if(t.charCode){var o=t.charCode;t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||(o=String.fromCharCode(o).toLowerCase(),this._onLetterKeyNav({node:i,key:o}),e.stopEvent(t))}else{var n=this._keyHandlerMap;n||(n={},n[e.keys.ENTER]="_onEnterKey",n[e.keys.LEFT_ARROW]="_onLeftArrow",n[e.keys.RIGHT_ARROW]="_onRightArrow",n[e.keys.UP_ARROW]="_onUpArrow",n[e.keys.DOWN_ARROW]="_onDownArrow",n[e.keys.HOME]="_onHomeKey",n[e.keys.END]="_onEndKey",this._keyHandlerMap=n),this._keyHandlerMap[t.keyCode]&&(this[this._keyHandlerMap[t.keyCode]]({node:i,item:i.item}),e.stopEvent(t))}}},_onEnterKey:function(e){this._publish("execute",{item:e.item,node:e.node}),this.onClick(e.item,e.node)},_onDownArrow:function(e){var t=this._navToNextNode(e.node);return t&&t.isTreeNode?(t.tree.focusNode(t),t):void 0},_onUpArrow:function(e){var t=e.node,i=t,o=t.getPreviousSibling();if(o)for(t=o;t.isExpandable&&t.isExpanded&&t.hasChildren();){i=t;var n=t.getChildren();t=n[n.length-1]}else{var s=t.getParent();this._hideRoot&&s===this||(t=s)}return t&&t.isTreeNode&&(i=t),i&&i.isTreeNode?(i.tree.focusNode(i),i):void 0},_onRightArrow:function(e){var t=e.node,i=t;return t.isExpandable&&!t.isExpanded?this._expandNode(t):t.hasChildren()&&(t=t.getChildren()[0]),t&&t.isTreeNode&&(i=t),i&&i.isTreeNode?(i.tree.focusNode(i),i):void 0},_onLeftArrow:function(e){var t=e.node,i=t;return t.isExpandable&&t.isExpanded?this._collapseNode(t):t=t.getParent(),t&&t.isTreeNode&&(i=t),i&&i.isTreeNode?(i.tree.focusNode(i),i):void 0},_onHomeKey:function(){var e=this._navToRootOrFirstNode();return e?(e.tree.focusNode(e),e):void 0},_onEndKey:function(e){for(var t=e.node.tree,i=t;i.isExpanded;){var o=i.getChildren();i=o[o.length-1],i.isTreeNode&&(t=i)}return t&&t.isTreeNode?(t.tree.focusNode(t),t):void 0},_onLetterKeyNav:function(e){var t=startNode=e.node,i=e.key;do t=this._navToNextNode(t),t||(t=this._navToRootOrFirstNode());while(t!==startNode&&t.label.charAt(0).toLowerCase()!=i);return t&&t.isTreeNode?(t!==startNode&&t.tree.focusNode(t),t):void 0},_onClick:function(t){var i=t.target,o=dijit.getEnclosingWidget(i);o&&o.isTreeNode&&(i==o.expandoNode||i==o.expandoNodeText?o.isExpandable&&this._onExpandoClick({node:o}):(this._publish("execute",{item:o.item,node:o}),this.onClick(o.item,o),this.focusNode(o)),e.stopEvent(t))},_onExpandoClick:function(e){var t=e.node;t.isExpanded?this._collapseNode(t):this._expandNode(t)},onClick:function(){},_navToNextNode:function(e){var t;if(e.isExpandable&&e.isExpanded&&e.hasChildren())t=e.getChildren()[0];else for(;e&&e.isTreeNode&&!(t=e.getNextSibling());)e=e.getParent();return t},_navToRootOrFirstNode:function(){if(!this._hideRoot)return this;var e=this.getChildren()[0];return e&&e.isTreeNode?e:void 0},_collapseNode:function(t){if(t.isExpandable){if("LOADING"==t.state)return;this.lastFocused&&(e.isDescendant(this.lastFocused.domNode,t.domNode)?this.focusNode(t):this.focusNode(this.lastFocused)),t.collapse(),this.persist&&t.item&&(delete this._openedItemIds[this.store.getIdentity(t.item)],this._saveState())}},_expandNode:function(e){var t=e.tree;if(t.lastFocused&&t.focusNode(t.lastFocused),e.isExpandable){{this.store,this.store.getValue}switch(e.state){case"LOADING":return;case"UNCHECKED":e.markProcessing();var i=this,o=function(t){e.unmarkProcessing(),i._onLoadAllItems(e,t)};this.getItemChildren(e.item,o);break;default:e.expand&&(e.expand(),this.persist&&e.item&&(this._openedItemIds[this.store.getIdentity(e.item)]=!0,this._saveState()))}}},blurNode:function(){var t=this.lastFocused;if(t){var i=t.labelNode;e.removeClass(i,"dijitTreeLabelFocused"),i.setAttribute("tabIndex","-1"),this.lastFocused=null}},focusNode:function(e){e.labelNode.focus()},_onBlur:function(){if(this.lastFocused){var t=this.lastFocused.labelNode;e.removeClass(t,"dijitTreeLabelFocused")}},_onTreeFocus:function(t){var i=dijit.getEnclosingWidget(t.target);i!=this.lastFocused&&this.blurNode();var o=i.labelNode;o.setAttribute("tabIndex","0"),e.addClass(o,"dijitTreeLabelFocused"),this.lastFocused=i},_onNewItem:function(t,i){if(i){var o=this._itemNodeMap[this.getItemParentIdentity(t,i)];if(!o||-1==e.indexOf(this.childrenAttr,i.attribute))return}var n={item:t,isExpandable:this.mayHaveChildren(t)};if(o){if(o.isExpandable||o.makeExpandable(),"LOADED"==o.state||o.isExpanded)var s=o._addChildren([n])}else var s=this._addChildren([n]);s&&e.mixin(this._itemNodeMap,s)},_onDeleteItem:function(e){var t=this.store.getIdentity(e),i=this._itemNodeMap[t];if(i){var o=i.getParent();o.deleteNode(i),this._itemNodeMap[t]=null}},_onSetItem:function(e){var t=this.store.getIdentity(e);node=this._itemNodeMap[t],node&&(node.setLabelNode(this.getLabel(e)),node._updateItemClasses(e))},_saveState:function(){if(this.persist){var t=[];for(var i in this._openedItemIds)t.push(i);e.cookie(this.cookieName,t.join(","))}}}))}});