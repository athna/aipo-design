dojo._xdResourceLoaded({depends:[["provide","dijit._tree.dndSelector"],["require","dojo.dnd.common"],["require","dijit._tree.dndContainer"]],defineResource:function(e){e._hasResource["dijit._tree.dndSelector"]||(e._hasResource["dijit._tree.dndSelector"]=!0,e.provide("dijit._tree.dndSelector"),e.require("dojo.dnd.common"),e.require("dijit._tree.dndContainer"),e.declare("dijit._tree.dndSelector",dijit._tree.dndContainer,{constructor:function(){this.selection={},this.anchor=null,this.simpleSelection=!1,this.events.push(e.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),e.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"))},singular:!1,getSelectedItems:function(){var e=[];for(var t in this.selection)e.push(dijit.getEnclosingWidget(this.selection[t]).item);return e},getSelectedNodes:function(){return this.selection},selectNone:function(){return this._removeSelection()._removeAnchor()},insertItems:function(){},destroy:function(){e.dnd.Selector.superclass.destroy.call(this),this.selection=this.anchor=null},onMouseDown:function(t){if(this.current){var i=dijit.getEnclosingWidget(this.current).item,n=this.tree.store.getIdentity(i);if(this.current.id||(this.current.id=n),this.current.type||(this.current.type="data"),!this.singular&&!e.dnd.getCopyKeyState(t)&&!t.shiftKey&&this.current.id in this.selection)return this.simpleSelection=!0,e.stopEvent(t),void 0;if(this.singular)this.anchor==this.current?e.dnd.getCopyKeyState(t)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=this.current);else if(!this.singular&&t.shiftKey)e.dnd.getCopyKeyState(t);else if(e.dnd.getCopyKeyState(t))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=this.current);else{var i=dijit.getEnclosingWidget(this.current).item,n=this.tree.store.getIdentity(i);n in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[n]=this.current)}e.stopEvent(t)}},onMouseMove:function(){},onOverEvent:function(){this.onmousemoveEvent=e.connect(this.node,"onmousemove",this,"onMouseMove")},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=this.current))},_removeSelection:function(){var t=e.dnd._empty;for(var i in this.selection)if(!(i in t)){var n=e.byId(i);n&&this._removeItemClass(n,"Selected")}return this.selection={},this},_removeAnchor:function(){return this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null),this}}))}});