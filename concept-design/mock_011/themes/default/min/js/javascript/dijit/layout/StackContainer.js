dojo._hasResource["dijit.layout.StackContainer"]||(dojo._hasResource["dijit.layout.StackContainer"]=!0,dojo.provide("dijit.layout.StackContainer"),dojo.require("dijit._Templated"),dojo.require("dijit.layout._LayoutWidget"),dojo.require("dijit.form.Button"),dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:!0,_started:!1,postCreate:function(){dijit.setWaiRole(this.containerNode||this.domNode,"tabpanel"),this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var t=this.getChildren();dojo.forEach(t,this._setupChild,this),dojo.some(t,function(t){return t.selected&&(this.selectedChildWidget=t),t.selected},this);var e=this.selectedChildWidget;!e&&t[0]&&(e=this.selectedChildWidget=t[0],e.selected=!0),e&&this._showChild(e),dojo.publish(this.id+"-startup",[{children:t,selected:e}]),this.inherited("startup",arguments),this._started=!0}},_setupChild:function(t){return t.domNode.style.display="none",t.domNode.style.position="relative",t},addChild:function(t,e){dijit._Container.prototype.addChild.apply(this,arguments),t=this._setupChild(t),this._started&&(this.layout(),dojo.publish(this.id+"-addChild",[t,e]),this.selectedChildWidget||this.selectChild(t))},removeChild:function(t){if(dijit._Container.prototype.removeChild.apply(this,arguments),!this._beingDestroyed&&(this._started&&(dojo.publish(this.id+"-removeChild",[t]),this.layout()),this.selectedChildWidget===t&&(this.selectedChildWidget=void 0,this._started))){var e=this.getChildren();e.length&&this.selectChild(e[0])}},selectChild:function(t){t=dijit.byId(t),this.selectedChildWidget!=t&&(this._transition(t,this.selectedChildWidget),this.selectedChildWidget=t,dojo.publish(this.id+"-selectChild",[t]))},_transition:function(t,e){e&&this._hideChild(e),this._showChild(t),this.doLayout&&t.resize&&t.resize(this._containerContentBox||this._contentBox)},_adjacent:function(t){var e=this.getChildren(),i=dojo.indexOf(e,this.selectedChildWidget);return i+=t?1:e.length-1,e[i%e.length]},forward:function(){this.selectChild(this._adjacent(!0))},back:function(){this.selectChild(this._adjacent(!1))},_onKeyPress:function(t){dojo.publish(this.id+"-containerKeyPress",[{e:t,page:this}])},layout:function(){this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._contentBox)},_showChild:function(t){var e=this.getChildren();t.isFirstChild=t==e[0],t.isLastChild=t==e[e.length-1],t.selected=!0,t.domNode.style.display="",t._loadCheck&&t._loadCheck(),t.onShow&&t.onShow()},_hideChild:function(t){t.selected=!1,t.domNode.style.display="none",t.onHide&&t.onHide()},closeChild:function(t){var e=t.onClose(this,t);e&&(this.removeChild(t),t.destroy())},destroy:function(){this._beingDestroyed=!0,this.inherited("destroy",arguments)}}),dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist"),this.pane2button={},this._subscriptions=[dojo.subscribe(this.containerId+"-startup",this,"onStartup"),dojo.subscribe(this.containerId+"-addChild",this,"onAddChild"),dojo.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),dojo.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),dojo.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")]},onStartup:function(t){dojo.forEach(t.children,this.onAddChild,this),this.onSelectChild(t.selected)},destroy:function(){dojo.forEach(this._subscriptions,dojo.unsubscribe),this.inherited("destroy",arguments)},onAddChild:function(t,e){var i=document.createElement("span");this.domNode.appendChild(i);var o=dojo.getObject(this.buttonWidget),s=new o({label:t.title,closeButton:t.closable},i);this.addChild(s,e),this.pane2button[t]=s,t.controlButton=s,dojo.connect(s,"onClick",dojo.hitch(this,"onButtonClick",t)),dojo.connect(s,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",t)),this._currentChild||(s.focusNode.setAttribute("tabIndex","0"),this._currentChild=t)},onRemoveChild:function(t){this._currentChild===t&&(this._currentChild=null);var e=this.pane2button[t];e&&e.destroy(),this.pane2button[t]=null},onSelectChild:function(t){if(t){if(this._currentChild){var e=this.pane2button[this._currentChild];e.setChecked(!1),e.focusNode.setAttribute("tabIndex","-1")}var i=this.pane2button[t];i.setChecked(!0),this._currentChild=t,i.focusNode.setAttribute("tabIndex","0")}},onButtonClick:function(t){var e=dijit.byId(this.containerId);e.selectChild(t)},onCloseButtonClick:function(t){var e=dijit.byId(this.containerId);e.closeChild(t);var i=this.pane2button[this._currentChild];i&&dijit.focus(i.focusNode||i.domNode)},adjacent:function(t){var e=this.getChildren(),i=dojo.indexOf(e,this.pane2button[this._currentChild]),o=t?1:e.length-1;return e[(i+o)%e.length]},onkeypress:function(t){if(!this.disabled&&!t.altKey){var e=!0;if(t.ctrlKey||!t._djpage){var i=dojo.keys;switch(t.keyCode){case i.LEFT_ARROW:case i.UP_ARROW:case i.PAGE_UP:e=!1;case i.RIGHT_ARROW:case i.DOWN_ARROW:case i.PAGE_DOWN:this.adjacent(e).onClick(),dojo.stopEvent(t);break;case i.DELETE:this._currentChild.closable&&this.onCloseButtonClick(this._currentChild),dojo.stopEvent(t);break;default:t.ctrlKey&&(t.keyCode==i.TAB?(this.adjacent(!t.shiftKey).onClick(),dojo.stopEvent(t)):"w"==t.keyChar&&(this._currentChild.closable&&this.onCloseButtonClick(this._currentChild),dojo.stopEvent(t)))}}}},onContainerKeyPress:function(t){t.e._djpage=t.page,this.onkeypress(t.e)}}),dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(){dijit.setWaiRole(this.focusNode||this.domNode,"tab"),this.inherited("postCreate",arguments)},onClick:function(){dijit.focus(this.focusNode)},onClickCloseButton:function(t){t.stopPropagation()}}),dojo.extend(dijit._Widget,{title:"",selected:!1,closable:!1,onClose:function(){return!0}}));