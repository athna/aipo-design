dojo._hasResource["dojo.dnd.Moveable"]||(dojo._hasResource["dojo.dnd.Moveable"]=!0,dojo.provide("dojo.dnd.Moveable"),dojo.require("dojo.dnd.Mover"),dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:!1,constructor:function(o,e){this.node=dojo.byId(o),e||(e={}),this.handle=e.handle?dojo.byId(e.handle):null,this.handle||(this.handle=this.node),this.delay=e.delay>0?e.delay:0,this.skip=e.skip,this.mover=e.mover?e.mover:dojo.dnd.Mover,this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(o,e){return new dojo.dnd.Moveable(e,o)},destroy:function(){dojo.forEach(this.events,dojo.disconnect),this.events=this.node=this.handle=null},onMouseDown:function(o){this.skip&&dojo.dnd.isFormElement(o)||(this.delay?(this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove")),this.events.push(dojo.connect(this.handle,"onmouseup",this,"onMouseUp")),this._lastX=o.pageX,this._lastY=o.pageY):new this.mover(this.node,o,this),dojo.stopEvent(o))},onMouseMove:function(o){(Math.abs(o.pageX-this._lastX)>this.delay||Math.abs(o.pageY-this._lastY)>this.delay)&&(this.onMouseUp(o),new this.mover(this.node,o,this)),dojo.stopEvent(o)},onMouseUp:function(){dojo.disconnect(this.events.pop()),dojo.disconnect(this.events.pop())},onSelectStart:function(o){this.skip&&dojo.dnd.isFormElement(o)||dojo.stopEvent(o)},onMoveStart:function(o){dojo.publish("/dnd/move/start",[o]),dojo.addClass(dojo.body(),"dojoMove"),dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(o){dojo.publish("/dnd/move/stop",[o]),dojo.removeClass(dojo.body(),"dojoMove"),dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(o,e){this.onMoving(o,e),dojo.marginBox(o.node,e),this.onMoved(o,e)},onMoving:function(){},onMoved:function(){}}));