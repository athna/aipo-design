dojo._hasResource["dojox.charting.Chart3D"]||(dojo._hasResource["dojox.charting.Chart3D"]=!0,dojo.provide("dojox.charting.Chart3D"),dojo.require("dojox.gfx3d"),function(){var t={x:0,y:0,z:1},e=dojox.gfx3d.vector,i=dojox.gfx.normalizedLength;dojo.declare("dojox.charting.Chart3D",null,{constructor:function(t,e,o,r){this.node=dojo.byId(t),this.surface=dojox.gfx.createSurface(this.node,i(this.node.style.width),i(this.node.style.height)),this.view=this.surface.createViewport(),this.view.setLights(e.lights,e.ambient,e.specular),this.view.setCameraTransform(o),this.theme=r,this.walls=[],this.plots=[]},generate:function(){return this._generateWalls()._generatePlots()},invalidate:function(){return this.view.invalidate(),this},render:function(){return this.view.render(),this},addPlot:function(t){return this._add(this.plots,t)},removePlot:function(t){return this._remove(this.plots,t)},addWall:function(t){return this._add(this.walls,t)},removeWall:function(t){return this._remove(this.walls,t)},_add:function(t,e){return dojo.some(t,function(t){return t==e})||(t.push(e),this.view.invalidate()),this},_remove:function(t,e){var i=dojo.filter(t,function(t){return t!=e});return i.length<t.length?(t=i,this.invalidate()):this},_generateWalls:function(){for(var i=0;i<this.walls.length;++i)e.dotProduct(t,this.walls[i].normal)>0&&this.walls[i].generate(this);return this},_generatePlots:function(){for(var t=0,e=dojox.gfx3d.matrix,i=0;i<this.plots.length;++i)t+=this.plots[i].getDepth();for(--i;i>=0;--i){var o=this.view.createScene();o.setTransform(e.translate(0,0,-t)),this.plots[i].generate(this,o),t-=this.plots[i].getDepth()}return this}})}());