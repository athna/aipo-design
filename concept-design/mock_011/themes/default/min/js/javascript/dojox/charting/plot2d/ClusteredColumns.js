dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]||(dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]=!0,dojo.provide("dojox.charting.plot2d.ClusteredColumns"),dojo.require("dojox.charting.plot2d.common"),dojo.require("dojox.charting.plot2d.Columns"),dojo.require("dojox.lang.functional"),function(){var o=dojox.lang.functional,e=dojox.charting.plot2d.common,t=o.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredColumns",dojox.charting.plot2d.Columns,{render:function(r,s){if(this.dirty){dojo.forEach(this.series,t),this.cleanGroup();var l=this.group;o.forEachReversed(this.series,function(o){o.cleanGroup(l)})}for(var i,a,h,d=this.chart.theme,n=this.opt.gap<this._hScaler.scale/3?this.opt.gap:0,c=(this._hScaler.scale-2*n)/this.series.length,u=0;u<this.series.length;++u){var g=this.series[u];if(this.dirty||g.dirty){g.cleanGroup();var l=g.group;g.fill&&g.stroke||(i=g.dyn.color=new dojo.Color(d.next("color"))),a=g.stroke?g.stroke:e.augmentStroke(d.series.stroke,i),h=g.fill?g.fill:e.augmentFill(d.series.fill,i);for(var p=Math.max(0,this._vScaler.bounds.lower),j=s.l+this._hScaler.scale*(.5-this._hScaler.bounds.lower)+n+c*u,f=r.height-s.b-this._vScaler.scale*(p-this._vScaler.bounds.lower),m=0;m<g.data.length;++m){var v=g.data[m],x=c,S=this._vScaler.scale*(v-p),C=Math.abs(S);if(x>=1&&C>=1){var _=l.createRect({x:j+this._hScaler.scale*m,y:f-(0>S?0:S),width:x,height:C}).setFill(h).setStroke(a);g.dyn.fill=_.getFill(),g.dyn.stroke=_.getStroke()}}g.dirty=!1}}return this.dirty=!1,this}})}());