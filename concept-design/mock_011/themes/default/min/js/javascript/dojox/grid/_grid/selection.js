dojo._hasResource["dojox.grid._grid.selection"]||(dojo._hasResource["dojox.grid._grid.selection"]=!0,dojo.provide("dojox.grid._grid.selection"),dojo.declare("dojox.grid.selection",null,{constructor:function(e){this.grid=e,this.selected=[]},multiSelect:!0,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(e){return this.grid.onCanSelect(e)},onCanDeselect:function(e){return this.grid.onCanDeselect(e)},onSelected:function(e){return this.grid.onSelected(e)},onDeselected:function(e){return this.grid.onDeselected(e)},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged()},isSelected:function(e){return this.selected[e]},getFirstSelected:function(){for(var e=0,t=this.selected.length;t>e;e++)if(this.selected[e])return e;return-1},getNextSelected:function(e){for(var t=e+1,i=this.selected.length;i>t;t++)if(this.selected[t])return t;return-1},getSelected:function(){for(var e=[],t=0,i=this.selected.length;i>t;t++)this.selected[t]&&e.push(t);return e},getSelectedCount:function(){for(var e=0,t=0;t<this.selected.length;t++)this.selected[t]&&e++;return e},beginUpdate:function(){0==this.updating&&this.onChanging(),this.updating++},endUpdate:function(){this.updating--,0==this.updating&&this.onChanged()},select:function(e){this.unselectAll(e),this.addToSelection(e)},addToSelection:function(e){e=Number(e),this.selected[e]?this.selectedIndex=e:this.onCanSelect(e)!==!1&&(this.selectedIndex=e,this.beginUpdate(),this.selected[e]=!0,this.grid.onSelected(e),this.endUpdate())},deselect:function(e){if(e=Number(e),this.selectedIndex==e&&(this.selectedIndex=-1),this.selected[e]){if(this.onCanDeselect(e)===!1)return;this.beginUpdate(),delete this.selected[e],this.grid.onDeselected(e),this.endUpdate()}},setSelected:function(e,t){this[t?"addToSelection":"deselect"](e)},toggleSelect:function(e){this.setSelected(e,!this.selected[e])},insert:function(e){this.selected.splice(e,0,!1),this.selectedIndex>=e&&this.selectedIndex++},remove:function(e){this.selected.splice(e,1),this.selectedIndex>=e&&this.selectedIndex--},unselectAll:function(e){for(var t in this.selected)t!=e&&this.selected[t]===!0&&this.deselect(t)},shiftSelect:function(e,t){var i=e>=0?e:t,n=t;i>n&&(n=i,i=t);for(var s=i;n>=s;s++)this.addToSelection(s)},clickSelect:function(e,t,i){if(this.beginUpdate(),this.multiSelect){var n=this.selectedIndex;t||this.unselectAll(e),i?this.shiftSelect(n,e):t?this.toggleSelect(e):this.addToSelection(e)}else this.select(e);this.endUpdate()},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,e.ctrlKey,e.shiftKey)},clear:function(){this.beginUpdate(),this.unselectAll(),this.endUpdate()}}));