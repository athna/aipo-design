dojo._hasResource["dojox.storage.Provider"]||(dojo._hasResource["dojox.storage.Provider"]=!0,dojo.provide("dojox.storage.Provider"),dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){console.warn("dojox.storage.initialize not implemented")},isAvailable:function(){console.warn("dojox.storage.isAvailable not implemented")},put:function(){console.warn("dojox.storage.put not implemented")},get:function(){console.warn("dojox.storage.get not implemented")},hasKey:function(o){return null!=this.get(o)},getKeys:function(){console.warn("dojox.storage.getKeys not implemented")},clear:function(){console.warn("dojox.storage.clear not implemented")},remove:function(){console.warn("dojox.storage.remove not implemented")},getNamespaces:function(){console.warn("dojox.storage.getNamespaces not implemented")},isPermanent:function(){console.warn("dojox.storage.isPermanent not implemented")},getMaximumSize:function(){console.warn("dojox.storage.getMaximumSize not implemented")},putMultiple:function(){console.warn("dojox.storage.putMultiple not implemented")},getMultiple:function(){console.warn("dojox.storage.getMultiple not implemented")},removeMultiple:function(){console.warn("dojox.storage.remove not implemented")},isValidKeyArray:function(o){if(null===o||"undefined"==typeof o||!o instanceof Array)return!1;for(var e=0;e<o.length;e++)if(!this.isValidKey(o[e]))return!1;return!0},hasSettingsUI:function(){return!1},showSettingsUI:function(){console.warn("dojox.storage.showSettingsUI not implemented")},hideSettingsUI:function(){console.warn("dojox.storage.hideSettingsUI not implemented")},isValidKey:function(o){return null==o||"undefined"==typeof o?!1:/^[0-9A-Za-z_]*$/.test(o)},getResourceList:function(){return[]}})),dojo._hasResource["dojox.storage.manager"]||(dojo._hasResource["dojox.storage.manager"]=!0,dojo.provide("dojox.storage.manager"),dojox.storage.manager=new function(){this.currentProvider=null,this.available=!1,this._initialized=!1,this._providers=[],this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(o,e){this._providers[this._providers.length]=e,this._providers[o]=e},this.setProvider=function(){},this.autodetect=function(){if(!this._initialized){for(var o,e=djConfig.forceStorageProvider||!1,t=0;t<this._providers.length;t++){if(o=this._providers[t],e==o.declaredClass){o.isAvailable();break}if(o.isAvailable())break}if(!o)return this._initialized=!0,this.available=!1,this.currentProvider=null,console.warn("No storage provider found for this platform"),this.loaded(),void 0;this.currentProvider=o,dojo.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0}},this.isAvailable=function(){return this.available},this.addOnLoad=function(o){this._onLoadListeners.push(o),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(o){for(var e=0;e<this._onLoadListeners.length;e++)if(o==this._onLoadListeners[e]){this._onLoadListeners=this._onLoadListeners.splice(e,1);break}},this.isInitialized=function(){return null!=this.currentProvider&&"dojox.storage.FlashStorageProvider"==this.currentProvider.declaredClass&&0==dojox.flash.ready?!1:this._initialized},this.supportsProvider=function(storageClass){try{var provider=eval("new "+storageClass+"()"),results=provider.isAvailable();return results?results:!1}catch(e){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(o){try{o()}catch(e){console.debug(e)}})},this.getResourceList=function(){var o=[];return dojo.forEach(dojox.storage.manager._providers,function(e){o=o.concat(e.getResourceList())}),o}}),dojo._hasResource["dojox._sql._crypto"]||(dojo._hasResource["dojox._sql._crypto"]=!0,dojo.provide("dojox._sql._crypto"),dojo.mixin(dojox._sql._crypto,{_POOL_SIZE:100,encrypt:function(o,e,t){this._initWorkerPool();var i={plaintext:o,password:e};i=dojo.toJson(i),i="encr:"+String(i),this._assignWork(i,t)},decrypt:function(o,e,t){this._initWorkerPool();var i={ciphertext:o,password:e};i=dojo.toJson(i),i="decr:"+String(i),this._assignWork(i,t)},_initWorkerPool:function(){if(!this._manager)try{this._manager=google.gears.factory.create("beta.workerpool","1.0"),this._unemployed=[],this._employed={},this._handleMessage=[];var o=this;this._manager.onmessage=function(e,t){var i=o._employed["_"+t];if(o._employed["_"+t]=void 0,o._unemployed.push("_"+t),o._handleMessage.length){var n=o._handleMessage.shift();o._assignWork(n.msg,n.callback)}i(e)};for(var e="function _workerInit(){gearsWorkerPool.onmessage = "+String(this._workerHandler)+";}",t=e+" _workerInit();",i=0;i<this._POOL_SIZE;i++)this._unemployed.push("_"+this._manager.createWorker(t))}catch(n){throw n.message||n}},_assignWork:function(o,e){if(!this._handleMessage.length&&this._unemployed.length){var t=this._unemployed.shift().substring(1);this._employed["_"+t]=e,this._manager.sendMessage(o,t)}else this._handleMessage={msg:o,callback:e}},_workerHandler:function(msg,sender){function Cipher(o,e){for(var t=4,i=e.length/t-1,n=[[],[],[],[]],s=0;4*t>s;s++)n[s%4][Math.floor(s/4)]=o[s];n=AddRoundKey(n,e,0,t);for(var r=1;i>r;r++)n=SubBytes(n,t),n=ShiftRows(n,t),n=MixColumns(n,t),n=AddRoundKey(n,e,r,t);n=SubBytes(n,t),n=ShiftRows(n,t),n=AddRoundKey(n,e,i,t);for(var a=new Array(4*t),s=0;4*t>s;s++)a[s]=n[s%4][Math.floor(s/4)];return a}function SubBytes(o,e){for(var t=0;4>t;t++)for(var i=0;e>i;i++)o[t][i]=Sbox[o[t][i]];return o}function ShiftRows(o,e){for(var t=new Array(4),i=1;4>i;i++){for(var n=0;4>n;n++)t[n]=o[i][(n+i)%e];for(var n=0;4>n;n++)o[i][n]=t[n]}return o}function MixColumns(o){for(var e=0;4>e;e++){for(var t=new Array(4),i=new Array(4),n=0;4>n;n++)t[n]=o[n][e],i[n]=128&o[n][e]?o[n][e]<<1^283:o[n][e]<<1;o[0][e]=i[0]^t[1]^i[1]^t[2]^t[3],o[1][e]=t[0]^i[1]^t[2]^i[2]^t[3],o[2][e]=t[0]^t[1]^i[2]^t[3]^i[3],o[3][e]=t[0]^i[0]^t[1]^t[2]^i[3]}return o}function AddRoundKey(o,e,t,i){for(var n=0;4>n;n++)for(var s=0;i>s;s++)o[n][s]^=e[4*t+s][n];return o}function KeyExpansion(o){for(var e=4,t=o.length/4,i=t+6,n=new Array(e*(i+1)),s=new Array(4),r=0;t>r;r++){var a=[o[4*r],o[4*r+1],o[4*r+2],o[4*r+3]];n[r]=a}for(var r=t;e*(i+1)>r;r++){n[r]=new Array(4);for(var d=0;4>d;d++)s[d]=n[r-1][d];if(r%t==0){s=SubWord(RotWord(s));for(var d=0;4>d;d++)s[d]^=Rcon[r/t][d]}else t>6&&r%t==4&&(s=SubWord(s));for(var d=0;4>d;d++)n[r][d]=n[r-t][d]^s[d]}return n}function SubWord(o){for(var e=0;4>e;e++)o[e]=Sbox[o[e]];return o}function RotWord(o){o[4]=o[0];for(var e=0;4>e;e++)o[e]=o[e+1];return o}function AESEncryptCtr(o,e,t){if(128!=t&&192!=t&&256!=t)return"";for(var i=t/8,n=new Array(i),s=0;i>s;s++)n[s]=255&e.charCodeAt(s);var r=Cipher(n,KeyExpansion(n));r=r.concat(r.slice(0,i-16));for(var a=16,d=new Array(a),l=(new Date).getTime(),s=0;4>s;s++)d[s]=l>>>8*s&255;for(var s=0;4>s;s++)d[s+4]=l/4294967296>>>8*s&255;for(var c=KeyExpansion(r),h=Math.ceil(o.length/a),f=new Array(h),u=0;h>u;u++){for(var g=0;4>g;g++)d[15-g]=u>>>8*g&255;for(var g=0;4>g;g++)d[15-g-4]=u/4294967296>>>8*g;for(var j=Cipher(d,c),p=h-1>u?a:(o.length-1)%a+1,_="",s=0;p>s;s++){var y=o.charCodeAt(u*a+s),v=y^j[s];_+=String.fromCharCode(v)}f[u]=escCtrlChars(_)}for(var x="",s=0;8>s;s++)x+=String.fromCharCode(d[s]);return x=escCtrlChars(x),x+"-"+f.join("-")}function AESDecryptCtr(o,e,t){if(128!=t&&192!=t&&256!=t)return"";for(var i=t/8,n=new Array(i),s=0;i>s;s++)n[s]=255&e.charCodeAt(s);var r=KeyExpansion(n),a=Cipher(n,r);a=a.concat(a.slice(0,i-16));var d=KeyExpansion(a);o=o.split("-");for(var l=16,c=new Array(l),h=unescCtrlChars(o[0]),s=0;8>s;s++)c[s]=h.charCodeAt(s);for(var f=new Array(o.length-1),u=1;u<o.length;u++){for(var g=0;4>g;g++)c[15-g]=u-1>>>8*g&255;for(var g=0;4>g;g++)c[15-g-4]=u/4294967296-1>>>8*g&255;var j=Cipher(c,d);o[u]=unescCtrlChars(o[u]);for(var p="",s=0;s<o[u].length;s++){var _=o[u].charCodeAt(s),y=_^j[s];p+=String.fromCharCode(y)}f[u-1]=p}return f.join("")}function escCtrlChars(o){return o.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(o){return"!"+o.charCodeAt(0)+"!"})}function unescCtrlChars(o){return o.replace(/!\d\d?\d?!/g,function(o){return String.fromCharCode(o.slice(1,-1))})}function encrypt(o,e){return AESEncryptCtr(o,e,256)}function decrypt(o,e){return AESDecryptCtr(o,e,256)}var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],cmd=msg.substr(0,4),arg=msg.substr(5);if("encr"==cmd){arg=eval("("+arg+")");var plaintext=arg.plaintext,password=arg.password,results=encrypt(plaintext,password);gearsWorkerPool.sendMessage(String(results),sender)}else if("decr"==cmd){arg=eval("("+arg+")");var ciphertext=arg.ciphertext,password=arg.password,results=decrypt(ciphertext,password);gearsWorkerPool.sendMessage(String(results),sender)}}})),dojo._hasResource["dojox._sql.common"]||(dojo._hasResource["dojox._sql.common"]=!0,dojo.provide("dojox._sql.common"),dojox.sql=new Function("return dojox.sql._exec(arguments);"),dojo.mixin(dojox.sql,{dbName:null,debug:dojo.exists("dojox.sql.debug")?dojox.sql.debug:!1,open:function(o){if(!this._dbOpen||o&&o!=this.dbName){this.dbName||(this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_")),o||(o=this.dbName);try{this._initDb(),this.db.open(o),this._dbOpen=!0}catch(e){throw e.message||e}}},close:function(o){if(!dojo.isIE&&(this._dbOpen||o&&o!=this.dbName)){o||(o=this.dbName);try{this.db.close(o),this._dbOpen=!1}catch(e){throw e.message||e}}},_exec:function(o){try{this._initDb(),this._dbOpen||(this.open(),this._autoClose=!0);var e=null,t=null,i=null,n=dojo._toArray(o);if(e=n.splice(0,1)[0],(this._needsEncrypt(e)||this._needsDecrypt(e))&&(t=n.splice(n.length-1,1)[0],i=n.splice(n.length-1,1)[0]),this.debug&&this._printDebugSQL(e,n),this._needsEncrypt(e)){{new dojox.sql._SQLCrypto("encrypt",e,i,n,t)}return}if(this._needsDecrypt(e)){{new dojox.sql._SQLCrypto("decrypt",e,i,n,t)}return}var s=this.db.execute(e,n);return s=this._normalizeResults(s),this._autoClose&&this.close(),s}catch(r){if(r=r.message||r,console.debug("SQL Exception: "+r),this._autoClose)try{this.close()}catch(a){console.debug("Error closing database: "+a.message||a)}throw r}},_initDb:function(){if(!this.db)try{this.db=google.gears.factory.create("beta.database","1.0")}catch(o){throw dojo.setObject("google.gears.denied",!0),dojox.off.onFrameworkEvent("coreOperationFailed"),"Google Gears must be allowed to run"}},_printDebugSQL:function(o,e){for(var t='dojox.sql("'+o+'"',i=0;i<e.length;i++)t+="string"==typeof e[i]?', "'+e[i]+'"':", "+e[i];t+=")",console.debug(t)},_normalizeResults:function(o){var e=[];if(!o)return[];for(;o.isValidRow();){for(var t={},i=0;i<o.fieldCount();i++){var n=o.fieldName(i),s=o.field(i);t[n]=s}e.push(t),o.next()}return o.close(),e},_needsEncrypt:function(o){return/encrypt\([^\)]*\)/i.test(o)},_needsDecrypt:function(o){return/decrypt\([^\)]*\)/i.test(o)}}),dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(o,e,t,i,n){"encrypt"==o?this._execEncryptSQL(e,t,i,n):this._execDecryptSQL(e,t,i,n)},_execEncryptSQL:function(o,e,t,i){var n=this._stripCryptoSQL(o),s=this._flagEncryptedArgs(o,t),r=this;this._encrypt(n,e,t,s,function(t){var s=!1,a=[],d=null;try{a=dojox.sql.db.execute(n,t)}catch(l){s=!0,d=l.message||l}if(null!=d){if(dojox.sql._autoClose)try{dojox.sql.close()}catch(c){}return i(null,!0,d.toString()),void 0}if(a=dojox.sql._normalizeResults(a),dojox.sql._autoClose&&dojox.sql.close(),dojox.sql._needsDecrypt(o)){var h=r._determineDecryptedColumns(o);r._decrypt(a,h,e,function(o){i(o,!1,null)})}else i(a,!1,null)})},_execDecryptSQL:function(o,e,t,i){var n=this._stripCryptoSQL(o),s=this._determineDecryptedColumns(o),r=!1,a=[],d=null;try{a=dojox.sql.db.execute(n,t)}catch(l){r=!0,d=l.message||l}if(null!=d){if(dojox.sql._autoClose)try{dojox.sql.close()}catch(c){}return i(a,!0,d.toString()),void 0}a=dojox.sql._normalizeResults(a),dojox.sql._autoClose&&dojox.sql.close(),this._decrypt(a,s,e,function(o){i(o,!1,null)})},_encrypt:function(o,e,t,i,n){this._totalCrypto=0,this._finishedCrypto=0,this._finishedSpawningCrypto=!1,this._finalArgs=t;for(var s=0;s<t.length;s++)if(i[s]){var r=t[s],a=s;this._totalCrypto++,dojox._sql._crypto.encrypt(r,e,dojo.hitch(this,function(o){this._finalArgs[a]=o,this._finishedCrypto++,this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto&&n(this._finalArgs)}))}this._finishedSpawningCrypto=!0},_decrypt:function(o,e,t,i){this._totalCrypto=0,this._finishedCrypto=0,this._finishedSpawningCrypto=!1,this._finalResultSet=o;for(var n=0;n<o.length;n++){var s=o[n];for(var r in s)if("*"==e||e[r]){this._totalCrypto++;var a=s[r];this._decryptSingleColumn(r,a,t,n,function(o){i(o)})}}this._finishedSpawningCrypto=!0},_stripCryptoSQL:function(o){o=o.replace(/DECRYPT\(\*\)/gi,"*");var e=o.match(/ENCRYPT\([^\)]*\)/gi);if(null!=e)for(var t=0;t<e.length;t++){var i=e[t],n=i.match(/ENCRYPT\(([^\)]*)\)/i)[1];o=o.replace(i,n)}if(e=o.match(/DECRYPT\([^\)]*\)/gi),null!=e)for(var t=0;t<e.length;t++){var s=e[t],r=s.match(/DECRYPT\(([^\)]*)\)/i)[1];o=o.replace(s,r)}return o},_flagEncryptedArgs:function(o){for(var e,t=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/gi),i=0,n=[];null!=(e=t.exec(o));){var s=RegExp.lastMatch+"";if(!/^[\"\']/.test(s)){var r=!1;/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)&&(r=!0),n[i]=r,i++}}return n},_determineDecryptedColumns:function(o){var e={};if(/DECRYPT\(\*\)/i.test(o))e="*";else for(var t,i=/DECRYPT\((?:\s*\w*\s*\,?)*\)/gi;t=i.exec(o);){var n=new String(RegExp.lastMatch),s=n.replace(/DECRYPT\(/i,"");s=s.replace(/\)/,""),s=s.split(/\s*,\s*/),dojo.forEach(s,function(o){/\s*\w* AS (\w*)/i.test(o)&&(o=o.match(/\s*\w* AS (\w*)/i)[1]),e[o]=!0})}return e},_decryptSingleColumn:function(o,e,t,i,n){dojox._sql._crypto.decrypt(e,t,dojo.hitch(this,function(e){this._finalResultSet[i][o]=e,this._finishedCrypto++,this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto&&n(this._finalResultSet)}))}})),dojo._hasResource["dojox.sql"]||(dojo._hasResource["dojox.sql"]=!0,dojo.provide("dojox.sql")),dojo._hasResource["dojox.storage.GearsStorageProvider"]||(dojo._hasResource["dojox.storage.GearsStorageProvider"]=!0,dojo.provide("dojox.storage.GearsStorageProvider"),dojo.isGears&&!function(){dojo.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:!1,_available:null,initialize:function(){if(1!=djConfig.disableGearsStorage){this.TABLE_NAME="__DOJO_STORAGE";try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"(  namespace TEXT,  key TEXT,  value TEXT )"),dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index ON "+this.TABLE_NAME+" (namespace, key)")}catch(o){return console.debug("dojox.storage.GearsStorageProvider.initialize:",o),this.initialized=!1,dojox.storage.manager.loaded(),void 0}this.initialized=!0,dojox.storage.manager.loaded()}},isAvailable:function(){return this._available=dojo.isGears},put:function(o,e,t,i){if(0==this.isValidKey(o))throw new Error("Invalid key given: "+o);i=i||this.DEFAULT_NAMESPACE,e=dojo.isString(e)?"string:"+e:dojo.toJson(e);try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",i,o),dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",i,o,e)}catch(n){return console.debug("dojox.storage.GearsStorageProvider.put:",n),t(this.FAILED,o,n.toString()),void 0}t&&t(dojox.storage.SUCCESS,o,null)},get:function(o,e){if(0==this.isValidKey(o))throw new Error("Invalid key given: "+o);e=e||this.DEFAULT_NAMESPACE;var t=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND  key = ?",e,o);return t.length?(t=t[0].value,t=dojo.isString(t)&&/^string:/.test(t)?t.substring("string:".length):dojo.fromJson(t)):null},getNamespaces:function(){for(var o=[dojox.storage.DEFAULT_NAMESPACE],e=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace"),t=0;t<e.length;t++)e[t].namespace!=dojox.storage.DEFAULT_NAMESPACE&&o.push(e[t].namespace);return o},getKeys:function(o){if(o=o||this.DEFAULT_NAMESPACE,0==this.isValidKey(o))throw new Error("Invalid namespace given: "+o);for(var e=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",o),t=[],i=0;i<e.length;i++)t.push(e[i].key);return t},clear:function(o){if(0==this.isValidKey(o))throw new Error("Invalid namespace given: "+o);o=o||this.DEFAULT_NAMESPACE,dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",o)},remove:function(o,e){e=e||this.DEFAULT_NAMESPACE,dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",e,o)},putMultiple:function(o,e,t,i){if(this.isValidKeyArray(o)===!1||!e instanceof Array||o.length!=e.length)throw new Error("Invalid arguments: keys = ["+o+"], values = ["+e+"]");if((null==i||"undefined"==typeof i)&&(i=dojox.storage.DEFAULT_NAMESPACE),0==this.isValidKey(i))throw new Error("Invalid namespace given: "+i);this._statusHandler=t;try{dojox.sql.open(),dojox.sql.db.execute("BEGIN TRANSACTION");for(var n="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",s=0;s<o.length;s++){var r=e[s];r=dojo.isString(r)?"string:"+r:dojo.toJson(r),dojox.sql.db.execute(n,[i,o[s],r])}dojox.sql.db.execute("COMMIT TRANSACTION"),dojox.sql.close()}catch(a){return console.debug("dojox.storage.GearsStorageProvider.putMultiple:",a),t&&t(this.FAILED,o,a.toString()),void 0}t&&t(dojox.storage.SUCCESS,key,null)},getMultiple:function(o,e){if(this.isValidKeyArray(o)===!1)throw new("Invalid key array given: "+o);if((null==e||"undefined"==typeof e)&&(e=dojox.storage.DEFAULT_NAMESPACE),0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);for(var t="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND  key = ?",i=[],n=0;n<o.length;n++){var s=dojox.sql(t,e,o[n]);s.length?(s=s[0].value,i[n]=dojo.isString(s)&&/^string:/.test(s)?s.substring("string:".length):dojo.fromJson(s)):i[n]=null}return i},removeMultiple:function(o,e){e=e||this.DEFAULT_NAMESPACE,dojox.sql.open(),dojox.sql.db.execute("BEGIN TRANSACTION");for(var t="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",i=0;i<o.length;i++)dojox.sql.db.execute(t,[e,o[i]]);dojox.sql.db.execute("COMMIT TRANSACTION"),dojox.sql.close()},isPermanent:function(){return!0},getMaximumSize:function(){return this.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")}}),dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider),dojox.storage.manager.initialize()}()),dojo._hasResource["dojox.storage._common"]||(dojo._hasResource["dojox.storage._common"]=!0,dojo.provide("dojox.storage._common"),dojox.storage.manager.initialize()),dojo._hasResource["dojox.storage"]||(dojo._hasResource["dojox.storage"]=!0,dojo.provide("dojox.storage")),dojo._hasResource["dojox.off.files"]||(dojo._hasResource["dojox.off.files"]=!0,dojo.provide("dojox.off.files"),dojox.off.files={versionURL:"version.js",listOfURLs:[],refreshing:!1,_cancelID:null,_error:!1,_errorMessages:[],_currentFileIndex:0,_store:null,_doSlurp:!1,slurp:function(){this._doSlurp=!0},cache:function(o){if(dojo.isString(o)){var e=this._trimAnchor(o+"");this.isAvailable(e)||this.listOfURLs.push(e)}else if(o instanceof dojo._Url){var e=this._trimAnchor(o.uri);this.isAvailable(e)||this.listOfURLs.push(e)}else dojo.forEach(o,function(o){o=this._trimAnchor(o),this.isAvailable(o)||this.listOfURLs.push(o)},this)},printURLs:function(){console.debug("The following URLs are cached for offline use:"),dojo.forEach(this.listOfURLs,function(o){console.debug(o)})},remove:function(o){for(var e=0;e<this.listOfURLs.length;e++)if(this.listOfURLs[e]==o){this.listOfURLs=this.listOfURLs.splice(e,1);break}},isAvailable:function(o){for(var e=0;e<this.listOfURLs.length;e++)if(this.listOfURLs[e]==o)return!0;return!1},refresh:function(o){try{djConfig.isDebug&&this.printURLs(),this.refreshing=!0,this.versionURL?this._getVersionInfo(function(e,t,i){djConfig.isDebug||!t||i||!e||e!=t?(console.warn("Refreshing offline file list"),this._doRefresh(o,t)):(console.warn("No need to refresh offline file list"),o(!1,[]))}):(console.warn("Refreshing offline file list"),this._doRefresh(o))}catch(e){this.refreshing=!1,dojox.off.coreOpFailed=!0,dojox.off.enabled=!1,dojox.off.onFrameworkEvent("coreOperationFailed")}},abortRefresh:function(){this.refreshing&&(this._store.abortCapture(this._cancelID),this.refreshing=!1)},_slurp:function(){if(this._doSlurp){var o=dojo.hitch(this,function(o){this._sameLocation(o)&&this.cache(o)});o(window.location.href),dojo.query("script").forEach(function(e){try{o(e.getAttribute("src"))}catch(t){}}),dojo.query("link").forEach(function(e){try{if(!e.getAttribute("rel")||"stylesheet"!=e.getAttribute("rel").toLowerCase())return;o(e.getAttribute("href"))}catch(t){}}),dojo.query("img").forEach(function(e){try{o(e.getAttribute("src"))}catch(t){}}),dojo.query("a").forEach(function(e){try{o(e.getAttribute("href"))}catch(t){}}),dojo.forEach(document.styleSheets,function(e){try{if(e.cssRules)dojo.forEach(e.cssRules,function(e){var t=e.cssText;if(t){var i=t.match(/url\(\s*([^\) ]*)\s*\)/i);if(!i)return;for(var n=1;n<i.length;n++)o(i[n])}});else if(e.cssText)for(var t,i=e.cssText.toString(),n=i.split(/\f|\r|\n/),s=0;s<n.length;s++)t=n[s].match(/url\(\s*([^\) ]*)\s*\)/i),t&&t.length&&o(t[1])}catch(r){}})}},_sameLocation:function(o){return o?o.length&&"#"==o.charAt(0)?!1:(o=new dojo._Url(o),o.scheme||o.port||o.host?!o.scheme&&o.host&&o.port&&window.location.hostname==o.host&&window.location.port==o.port?!0:o.scheme||!o.host||o.port||window.location.hostname!=o.host||80!=window.location.port?window.location.protocol==o.scheme+":"&&window.location.hostname==o.host&&(window.location.port==o.port||!window.location.port&&!o.port):!0:!0):!1},_trimAnchor:function(o){return o.replace(/\#.*$/,"")},_doRefresh:function(o,e){var t;try{t=google.gears.factory.create("beta.localserver","1.0")}catch(i){throw dojo.setObject("google.gears.denied",!0),dojox.off.onFrameworkEvent("coreOperationFailed"),"Google Gears must be allowed to run"}var n="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");t.removeStore(n),t.openStore(n);var s=t.createStore(n);this._store=s;var r=this;this._currentFileIndex=0,this._cancelID=s.capture(this.listOfURLs,function(t,i){if(!i&&r.refreshing){r._cancelID=null,r.refreshing=!1;var n=[];return n.push("Unable to capture: "+t),o(!0,n),void 0}i&&r._currentFileIndex++,i&&r._currentFileIndex>=r.listOfURLs.length&&(r._cancelID=null,r.refreshing=!1,e&&dojox.storage.put("oldVersion",e,null,dojox.off.STORAGE_NAMESPACE),dojox.storage.put("justDebugged",djConfig.isDebug,null,dojox.off.STORAGE_NAMESPACE),o(!1,[]))})},_getVersionInfo:function(o){var e=dojox.storage.get("justDebugged",dojox.off.STORAGE_NAMESPACE),t=dojox.storage.get("oldVersion",dojox.off.STORAGE_NAMESPACE),i=null;o=dojo.hitch(this,o),dojo.xhrGet({url:this.versionURL+"?browserbust="+(new Date).getTime(),timeout:5e3,handleAs:"javascript",error:function(){dojox.storage.remove("oldVersion",dojox.off.STORAGE_NAMESPACE),dojox.storage.remove("justDebugged",dojox.off.STORAGE_NAMESPACE),o(t,i,e)},load:function(n){n&&(i=n),o(t,i,e)}})}}),dojo._hasResource["dojox.off.sync"]||(dojo._hasResource["dojox.off.sync"]=!0,dojo.provide("dojox.off.sync"),dojo.mixin(dojox.off.sync,{isSyncing:!1,cancelled:!1,successful:!0,details:[],error:!1,actions:null,autoSync:!0,onSync:function(){},synchronize:function(){this.isSyncing||dojox.off.goingOnline||!dojox.off.isOnline||(this.isSyncing=!0,this.successful=!1,this.details=[],this.cancelled=!1,this.start())},cancel:function(){this.isSyncing&&(this.cancelled=!0,dojox.off.files.refreshing&&dojox.off.files.abortRefresh(),this.onSync("cancel"))},finishedDownloading:function(o,e){"undefined"==typeof o&&(o=!0),o||(this.successful=!1,this.details.push(e),this.error=!0),this.finished()},start:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("start"),this.refreshFiles(),void 0)},refreshFiles:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("refreshFiles"),dojox.off.files.refresh(dojo.hitch(this,function(o,e){if(o){this.error=!0,this.successful=!1;for(var t=0;t<e.length;t++)this.details.push(e[t])}this.upload()})),void 0)},upload:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("upload"),dojo.connect(this.actions,"onReplayFinished",this,this.download),this.actions.replay(),void 0)},download:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("download"),void 0)},finished:function(){this.isSyncing=!1,this.successful=!this.cancelled&&!this.error,this.onSync("finished")},_save:function(o){this.actions._save(function(){o()})},_load:function(o){this.actions._load(function(){o()})}}),dojo.declare("dojox.off.sync.ActionLog",null,{entries:[],reasonHalted:null,isReplaying:!1,autoSave:!0,add:function(o){if(this.isReplaying)throw"Programming error: you can not call dojox.off.sync.actions.add() while we are replaying an action log";this.entries.push(o),this.autoSave&&this._save()},onReplay:function(){},length:function(){return this.entries.length},haltReplay:function(o){if(this.isReplaying)if(o&&(this.reasonHalted=o.toString()),this.autoSave){var e=this;this._save(function(){e.isReplaying=!1,e.onReplayFinished()})}else this.isReplaying=!1,this.onReplayFinished()},continueReplay:function(){if(this.isReplaying){if(this.entries.shift(),!this.entries.length){if(this.autoSave){var o=this;return this._save(function(){o.isReplaying=!1,o.onReplayFinished()}),void 0}return this.isReplaying=!1,this.onReplayFinished(),void 0}var e=this.entries[0];this.onReplay(e,this)}},clear:function(){this.isReplaying||(this.entries=[],this.autoSave&&this._save())},replay:function(){if(!this.isReplaying){if(this.reasonHalted=null,!this.entries.length)return this.onReplayFinished(),void 0;this.isReplaying=!0;var o=this.entries[0];this.onReplay(o,this)}},onReplayFinished:function(){},toString:function(){var o="";o+="[";for(var e=0;e<this.entries.length;e++){o+="{";for(var t in this.entries[e])o+=t+': "'+this.entries[e][t]+'"',o+=", ";o+="}, "}return o+="]"},_save:function(o){o||(o=function(){});try{var e=function(e,t,i){e==dojox.storage.FAILED?(dojox.off.onFrameworkEvent("save",{status:dojox.storage.FAILED,isCoreSave:!0,key:t,value:i,namespace:dojox.off.STORAGE_NAMESPACE}),o()):e==dojox.storage.SUCCESS&&o()};dojox.storage.put("actionlog",this.entries,e,dojox.off.STORAGE_NAMESPACE)}catch(t){console.debug("dojox.off.sync._save: "+t.message||t),dojox.off.onFrameworkEvent("save",{status:dojox.storage.FAILED,isCoreSave:!0,key:"actionlog",value:this.entries,namespace:dojox.off.STORAGE_NAMESPACE}),o()}},_load:function(o){var e=dojox.storage.get("actionlog",dojox.off.STORAGE_NAMESPACE);e||(e=[]),this.entries=e,o()}}),dojox.off.sync.actions=new dojox.off.sync.ActionLog),dojo._hasResource["dojox.off._common"]||(dojo._hasResource["dojox.off._common"]=!0,dojo.provide("dojox.off._common"),dojo.mixin(dojox.off,{isOnline:!1,NET_CHECK:5,STORAGE_NAMESPACE:"_dot",enabled:!0,availabilityURL:dojo.moduleUrl("dojox","off/network_check.txt"),goingOnline:!1,coreOpFailed:!1,doNetChecking:!0,hasOfflineCache:null,browserRestart:!1,_STORAGE_APP_NAME:window.location.href.replace(/[^0-9A-Za-z_]/g,"_"),_initializeCalled:!1,_storageLoaded:!1,_pageLoaded:!1,onLoad:function(){},onNetwork:function(){},initialize:function(){this._initializeCalled=!0,this._storageLoaded&&this._pageLoaded&&this._onLoad()},goOffline:function(){dojox.off.sync.isSyncing||this.goingOnline||(this.goingOnline=!1,this.isOnline=!1)},goOnline:function(o){dojox.off.sync.isSyncing||dojox.off.goingOnline||(this.goingOnline=!0,this.isOnline=!1,this._isSiteAvailable(o))},onFrameworkEvent:function(o,e){"save"==o?e.isCoreSave&&e.status==dojox.storage.FAILED&&(dojox.off.coreOpFailed=!0,dojox.off.enabled=!1,dojox.off.onFrameworkEvent("coreOperationFailed")):"coreOperationFailed"==o&&(dojox.off.coreOpFailed=!0,dojox.off.enabled=!1)},_checkOfflineCacheAvailable:function(o){this.hasOfflineCache=dojo.isGears,o()},_onLoad:function(){dojox.off.files.cache(dojo.moduleUrl("dojo","dojo.js")),this._cacheDojoResources(),dojox.off.files.cache(dojox.storage.manager.getResourceList()),dojox.off.files._slurp(),this._checkOfflineCacheAvailable(dojo.hitch(this,"_onOfflineCacheChecked"))},_onOfflineCacheChecked:function(){this.hasOfflineCache&&this.enabled?this._load(dojo.hitch(this,"_finishStartingUp")):this.hasOfflineCache&&!this.enabled?this._finishStartingUp():this._keepCheckingUntilInstalled()},_keepCheckingUntilInstalled:function(){this._finishStartingUp()},_finishStartingUp:function(){this.hasOfflineCache?this.enabled?(this._startNetworkThread(),this.goOnline(dojo.hitch(this,function(){dojox.off.onLoad()}))):this.coreOpFailed?this.onFrameworkEvent("coreOperationFailed"):this.onLoad():this.onLoad()},_onPageLoad:function(){this._pageLoaded=!0,this._storageLoaded&&this._initializeCalled&&this._onLoad()},_onStorageLoad:function(){this._storageLoaded=!0,!dojox.storage.manager.isAvailable()&&dojox.storage.manager.isInitialized()&&(this.coreOpFailed=!0,this.enabled=!1),this._pageLoaded&&this._initializeCalled&&this._onLoad()},_isSiteAvailable:function(o){dojo.xhrGet({url:this._getAvailabilityURL(),handleAs:"text",timeout:1e3*this.NET_CHECK,error:dojo.hitch(this,function(){this.goingOnline=!1,this.isOnline=!1,o&&o(!1)}),load:dojo.hitch(this,function(){this.goingOnline=!1,this.isOnline=!0,o?o(!0):this.onNetwork("online")})})},_startNetworkThread:function(){this.doNetChecking&&window.setInterval(dojo.hitch(this,function(){var o=dojo.xhrGet({url:this._getAvailabilityURL(),handleAs:"text",timeout:1e3*this.NET_CHECK,error:dojo.hitch(this,function(){if(this.isOnline){this.isOnline=!1;try{"function"==typeof o.ioArgs.xhr.abort&&o.ioArgs.xhr.abort()}catch(e){}dojox.off.sync.isSyncing=!1,this.onNetwork("offline")}}),load:dojo.hitch(this,function(){this.isOnline||(this.isOnline=!0,this.onNetwork("online"))})})}),1e3*this.NET_CHECK)},_getAvailabilityURL:function(){var o=this.availabilityURL.toString();return o+=-1==o.indexOf("?")?"?":"&",o+="browserbust="+(new Date).getTime()},_onOfflineCacheInstalled:function(){this.onFrameworkEvent("offlineCacheInstalled")},_cacheDojoResources:function(){var o=!0;dojo.forEach(dojo.query("script"),function(e){var t=e.getAttribute("src");t&&-1!=t.indexOf("_base/_loader/bootstrap.js")&&(o=!1)}),o||(dojox.off.files.cache(dojo.moduleUrl("dojo","_base.js").uri),dojox.off.files.cache(dojo.moduleUrl("dojo","_base/_loader/loader.js").uri),dojox.off.files.cache(dojo.moduleUrl("dojo","_base/_loader/bootstrap.js").uri),dojox.off.files.cache(dojo.moduleUrl("dojo","_base/_loader/hostenv_browser.js").uri));for(var e=0;e<dojo._loadedUrls.length;e++)dojox.off.files.cache(dojo._loadedUrls[e])
},_save:function(){},_load:function(o){dojox.off.sync._load(o)}}),dojox.storage.manager.addOnLoad(dojo.hitch(dojox.off,"_onStorageLoad")),dojo.addOnLoad(dojox.off,"_onPageLoad")),dojo._hasResource["dojox.off"]||(dojo._hasResource["dojox.off"]=!0,dojo.provide("dojox.off")),dojo._hasResource["dojox.off.ui"]||(dojo._hasResource["dojox.off.ui"]=!0,dojo.provide("dojox.off.ui"),dojo.mixin(dojox.off.ui,{appName:"setme",autoEmbed:!0,autoEmbedID:"dot-widget",runLink:window.location.href,runLinkTitle:"Run Application",learnHowPath:dojo.moduleUrl("dojox","off/resources/learnhow.html"),customLearnHowPath:!1,htmlTemplatePath:dojo.moduleUrl("dojox","off/resources/offline-widget.html").uri,cssTemplatePath:dojo.moduleUrl("dojox","off/resources/offline-widget.css").uri,onlineImagePath:dojo.moduleUrl("dojox","off/resources/greenball.png").uri,offlineImagePath:dojo.moduleUrl("dojox","off/resources/redball.png").uri,rollerImagePath:dojo.moduleUrl("dojox","off/resources/roller.gif").uri,checkmarkImagePath:dojo.moduleUrl("dojox","off/resources/checkmark.png").uri,learnHowJSPath:dojo.moduleUrl("dojox","off/resources/learnhow.js").uri,_initialized:!1,onLoad:function(){},_initialize:function(){return 0==this._validateAppName(this.appName)?(alert("You must set dojox.off.ui.appName; it can only contain letters, numbers, and spaces; right now it is incorrectly set to '"+dojox.off.ui.appName+"'"),dojox.off.enabled=!1,void 0):(this.runLinkText="Run "+this.appName,dojo.connect(dojox.off,"onNetwork",this,"_onNetwork"),dojo.connect(dojox.off.sync,"onSync",this,"_onSync"),dojox.off.files.cache([this.htmlTemplatePath,this.cssTemplatePath,this.onlineImagePath,this.offlineImagePath,this.rollerImagePath,this.checkmarkImagePath]),this.autoEmbed&&this._doAutoEmbed(),void 0)},_doAutoEmbed:function(){dojo.xhrGet({url:this.htmlTemplatePath,handleAs:"text",error:function(o){dojox.off.enabled=!1,o=o.message||o,alert("Error loading the Dojo Offline Widget from "+this.htmlTemplatePath+": "+o)},load:dojo.hitch(this,this._templateLoaded)})},_templateLoaded:function(o){var e=dojo.byId(this.autoEmbedID);if(e&&(e.innerHTML=o),this._initImages(),this._updateNetIndicator(),this._initLearnHow(),this._initialized=!0,!dojox.off.hasOfflineCache)return this._showNeedsOfflineCache(),void 0;if(dojox.off.hasOfflineCache&&dojox.off.browserRestart)return this._needsBrowserRestart(),void 0;var t=dojo.byId("dot-widget-browser-restart");t&&(t.style.display="none"),this._updateSyncUI(),this._initMainEvtHandlers(),this._setOfflineEnabled(dojox.off.enabled),this._onNetwork(dojox.off.isOnline?"online":"offline"),this._testNet()},_testNet:function(){dojox.off.goOnline(dojo.hitch(this,function(o){this._onNetwork(o?"online":"offline"),this.onLoad()}))},_updateNetIndicator:function(){var o=dojo.byId("dot-widget-network-indicator-online"),e=dojo.byId("dot-widget-network-indicator-offline"),t=dojo.byId("dot-widget-title-text");o&&e&&(1==dojox.off.isOnline?(o.style.display="inline",e.style.display="none"):(o.style.display="none",e.style.display="inline")),t&&(t.innerHTML=dojox.off.isOnline?"Online":"Offline")},_initLearnHow:function(){var o=dojo.byId("dot-widget-learn-how-link");if(o){if(!this.customLearnHowPath){var e=djConfig.baseRelativePath;this.learnHowPath+="?appName="+encodeURIComponent(this.appName)+"&hasOfflineCache="+dojox.off.hasOfflineCache+"&runLink="+encodeURIComponent(this.runLink)+"&runLinkText="+encodeURIComponent(this.runLinkText)+"&baseRelativePath="+encodeURIComponent(e),dojox.off.files.cache(this.learnHowJSPath),dojox.off.files.cache(this.learnHowPath)}o.setAttribute("href",this.learnHowPath);var t=dojo.byId("dot-widget-learn-how-app-name");t&&(t.innerHTML="",t.appendChild(document.createTextNode(this.appName)))}},_validateAppName:function(o){return o?/^[a-z0-9 ]*$/i.test(o):!1},_updateSyncUI:function(){var o=dojo.byId("dot-roller"),e=dojo.byId("dot-success-checkmark"),t=dojo.byId("dot-sync-messages"),i=dojo.byId("dot-sync-details"),n=dojo.byId("dot-sync-cancel");dojox.off.sync.isSyncing?(this._clearSyncMessage(),o&&(o.style.display="inline"),e&&(e.style.display="none"),t&&dojo.removeClass(t,"dot-sync-error"),i&&(i.style.display="none"),n&&(n.style.display="inline")):(o&&(o.style.display="none"),n&&(n.style.display="none"),t&&dojo.removeClass(t,"dot-sync-error"))},_setSyncMessage:function(o){var e=dojo.byId("dot-sync-messages");if(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}},_clearSyncMessage:function(){this._setSyncMessage("")},_initImages:function(){var o=dojo.byId("dot-widget-network-indicator-online");o&&o.setAttribute("src",this.onlineImagePath);var e=dojo.byId("dot-widget-network-indicator-offline");e&&e.setAttribute("src",this.offlineImagePath);var t=dojo.byId("dot-roller");t&&t.setAttribute("src",this.rollerImagePath);var i=dojo.byId("dot-success-checkmark");i&&i.setAttribute("src",this.checkmarkImagePath)},_showDetails:function(o){if(o.preventDefault(),o.stopPropagation(),dojox.off.sync.details.length){var e="";e+="<html><head><title>Sync Details</title><head><body>",e+="<h1>Sync Details</h1>\n",e+="<ul>\n";for(var t=0;t<dojox.off.sync.details.length;t++)e+="<li>",e+=dojox.off.sync.details[t],e+="</li>";e+="</ul>\n",e+="<a href='javascript:window.close()' style='text-align: right; padding-right: 2em;'>Close Window</a>\n",e+="</body></html>";var i="height=400,width=600,resizable=true,scrollbars=true,toolbar=no,menubar=no,location=no,directories=no,dependent=yes",n=window.open("","SyncDetails",i);if(!n)return alert("Please allow popup windows for this domain; can't display sync details window"),void 0;n.document.open(),n.document.write(e),n.document.close(),n.focus&&n.focus()}},_cancel:function(o){o.preventDefault(),o.stopPropagation(),dojox.off.sync.cancel()},_needsBrowserRestart:function(){var o=dojo.byId("dot-widget-browser-restart");o&&dojo.addClass(o,"dot-needs-browser-restart");var e=dojo.byId("dot-widget-browser-restart-app-name");e&&(e.innerHTML="",e.appendChild(document.createTextNode(this.appName)));var t=dojo.byId("dot-sync-status");t&&(t.style.display="none")},_showNeedsOfflineCache:function(){var o=dojo.byId("dot-widget-container");o&&dojo.addClass(o,"dot-needs-offline-cache")},_hideNeedsOfflineCache:function(){var o=dojo.byId("dot-widget-container");o&&dojo.removeClass(o,"dot-needs-offline-cache")},_initMainEvtHandlers:function(){var o=dojo.byId("dot-sync-details-button");o&&dojo.connect(o,"onclick",this,this._showDetails);var e=dojo.byId("dot-sync-cancel-button");e&&dojo.connect(e,"onclick",this,this._cancel)},_setOfflineEnabled:function(o){var e=[];e.push(dojo.byId("dot-sync-status"));for(var t=0;t<e.length;t++)e[t]&&(e[t].style.visibility=o?"visible":"hidden")},_syncFinished:function(){this._updateSyncUI();var o=dojo.byId("dot-success-checkmark"),e=dojo.byId("dot-sync-details");if(1==dojox.off.sync.successful)this._setSyncMessage("Sync Successful"),o&&(o.style.display="inline");else if(1==dojox.off.sync.cancelled)this._setSyncMessage("Sync Cancelled"),o&&(o.style.display="none");else{this._setSyncMessage("Sync Error");var t=dojo.byId("dot-sync-messages");t&&dojo.addClass(t,"dot-sync-error"),o&&(o.style.display="none")}dojox.off.sync.details.length&&e&&(e.style.display="inline")},_onFrameworkEvent:function(o,e){if("save"==o)e.status!=dojox.storage.FAILED||e.isCoreSave||(alert("Please increase the amount of local storage available to this application"),dojox.storage.hasSettingsUI()&&dojox.storage.showSettingsUI());else if("coreOperationFailed"==o)console.log("Application does not have permission to use Dojo Offline"),this._userInformed||(alert("This application will not work if Google Gears is not allowed to run"),this._userInformed=!0);else if("offlineCacheInstalled"==o){if(this._hideNeedsOfflineCache(),1==dojox.off.hasOfflineCache&&1==dojox.off.browserRestart)return this._needsBrowserRestart(),void 0;var t=dojo.byId("dot-widget-browser-restart");t&&(t.style.display="none"),this._updateSyncUI(),this._initMainEvtHandlers(),this._setOfflineEnabled(dojox.off.enabled),this._testNet()}},_onSync:function(o){switch(o){case"start":this._updateSyncUI();break;case"refreshFiles":this._setSyncMessage("Downloading UI...");break;case"upload":this._setSyncMessage("Uploading new data...");break;case"download":this._setSyncMessage("Downloading new data...");break;case"finished":this._syncFinished();break;case"cancel":this._setSyncMessage("Canceling Sync...");break;default:dojo.warn("Programming error: Unknown sync type in dojox.off.ui: "+o)}},_onNetwork:function(o){if(this._initialized)if(this._updateNetIndicator(),"offline"==o){this._setSyncMessage("You are working offline");var e=dojo.byId("dot-sync-details");e&&(e.style.display="none"),this._updateSyncUI()}else dojox.off.sync.autoSync&&window.setTimeout("dojox.off.sync.synchronize()",1e3)}}),dojo.connect(dojox.off,"onFrameworkEvent",dojox.off.ui,"_onFrameworkEvent"),dojo.connect(dojox.off,"onLoad",dojox.off.ui,dojox.off.ui._initialize)),dojo._hasResource["dojox.off.offline"]||(dojo._hasResource["dojox.off.offline"]=!0,dojo.provide("dojox.off.offline"));