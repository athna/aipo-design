dojo._xdResourceLoaded({depends:[["provide","dojox.widget.ColorPicker"],["require","dijit.form._FormWidget"],["require","dojo.dnd.move"],["require","dojo.fx"]],defineResource:function(o){o._hasResource["dojox.widget.ColorPicker"]||(o._hasResource["dojox.widget.ColorPicker"]=!0,o.provide("dojox.widget.ColorPicker"),o.experimental("dojox.widget.ColorPicker"),o.require("dijit.form._FormWidget"),o.require("dojo.dnd.move"),o.require("dojo.fx"),o.declare("dojox.widget.ColorPicker",dijit.form._FormWidget,{showRgb:!0,showHsv:!0,showHex:!0,webSafe:!0,animatePoint:!0,slideDuration:250,_underlay:o.moduleUrl("dojox.widget","ColorPicker/images/underlay.png"),templateString:'<div class="dojoxColorPicker">\r\n	<div class="dojoxColorPickerBox">\r\n		<div dojoAttachPoint="cursorNode" class="dojoxColorPickerPoint"></div>\r\n		<img dojoAttachPoint="colorUnderlay" dojoAttachEvent="onclick: _setPoint" class="dojoxColorPickerUnderlay" src="${_underlay}">\r\n	</div>\r\n	<div class="dojoxHuePicker">\r\n		<div dojoAttachPoint="hueCursorNode" class="dojoxHuePickerPoint"></div>\r\n		<div dojoAttachPoint="hueNode" class="dojoxHuePickerUnderlay" dojoAttachEvent="onclick: _setHuePoint"></div>\r\n	</div>\r\n	<div dojoAttachPoint="previewNode" class="dojoxColorPickerPreview"></div>\r\n	<div dojoAttachPoint="safePreviewNode" class="dojoxColorPickerWebSafePreview"></div>\r\n	<div class="dojoxColorPickerOptional">\r\n		<div class="dijitInline dojoxColorPickerRgb" dojoAttachPoint="rgbNode">\r\n			<table>\r\n			<tr><td>r</td><td><input dojoAttachPoint="Rval" size="1"></td></tr>\r\n			<tr><td>g</td><td><input dojoAttachPoint="Gval" size="1"></td></tr>\r\n			<tr><td>b</td><td><input dojoAttachPoint="Bval" size="1"></td></tr>\r\n			</table>\r\n		</div>\r\n		<div class="dijitInline dojoxColorPickerHsv" dojoAttachPoint="hsvNode">\r\n			<table>\r\n			<tr><td>h</td><td><input dojoAttachPoint="Hval"size="1"> &deg;</td></tr>\r\n			<tr><td>s</td><td><input dojoAttachPoint="Sval" size="1"> %</td></tr>\r\n			<tr><td>v</td><td><input dojoAttachPoint="Vval" size="1"> %</td></tr>\r\n			</table>\r\n		</div>\r\n		<div class="dojoxColorPickerHex" dojoAttachPoint="hexNode">	\r\n			hex: <input dojoAttachPoint="hexCode, focusNode" size="6" class="dojoxColorPickerHexCode">\r\n		</div>\r\n	</div>\r\n</div>\r\n',postCreate:function(){o.isIE&&o.isIE<7&&(this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this._underlay+"', sizingMethod='scale')",this.colorUnderlay.src=o.moduleUrl("dojox.widget","FisheyeList/blank.gif").toString()),this.showRgb||(this.rgbNode.style.display="none"),this.showHsv||(this.hsvNode.style.display="none"),this.showHex||(this.hexNode.style.display="none"),this.webSafe||(this.safePreviewNode.style.display="none")},startup:function(){this._offset=0,this._mover=new o.dnd.Moveable(this.cursorNode,{mover:o.dnd.boxConstrainedMover({t:0,l:0,w:150,h:150})}),this._hueMover=new o.dnd.Moveable(this.hueCursorNode,{mover:o.dnd.boxConstrainedMover({t:0,l:0,w:0,h:150})}),o.subscribe("/dnd/move/stop",o.hitch(this,"_clearTimer")),o.subscribe("/dnd/move/start",o.hitch(this,"_setTimer")),this._sc=1/o.coords(this.colorUnderlay).w,this._hueSc=255/(o.coords(this.hueNode).h+this._offset),this._updateColor()},_setTimer:function(){this._timer=setInterval(o.hitch(this,"_updateColor"),45)},_clearTimer:function(){clearInterval(this._timer),this.onChange(this.value)},_setHue:function(e){var t=o.colorFromArray(this._hsv2rgb(e,1,1,{inputRange:1})).toHex();o.style(this.colorUnderlay,"backgroundColor",t)},_updateColor:function(){var e=Math.round(255+this._offset-(o.style(this.hueCursorNode,"top")+this._offset)*this._hueSc),t=Math.round(o.style(this.cursorNode,"left")*this._sc*100),i=Math.round(100-o.style(this.cursorNode,"top")*this._sc*100);e!=this._hue&&this._setHue(e);var r=this._hsv2rgb(e,t/100,i/100,{inputRange:1}),s=o.colorFromArray(r).toHex();this.previewNode.style.backgroundColor=s,this.webSafe&&(this.safePreviewNode.style.backgroundColor=s),this.showHex&&(this.hexCode.value=s),this.showRgb&&(this.Rval.value=r[0],this.Gval.value=r[1],this.Bval.value=r[2]),this.showHsv&&(this.Hval.value=Math.round(360*e/255),this.Sval.value=t,this.Vval.value=i),this.value=s,this._timer||arguments[1]||(this.setValue(this.value),this.onChange(this.value))},_setHuePoint:function(e){this.animatePoint?o.fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:e.layerY,left:0,onEnd:o.hitch(this,"_updateColor")}).play():(o.style(this.hueCursorNode,"top",e.layerY+"px"),this._updateColor(!1))},_setPoint:function(e){this.animatePoint?o.fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:e.layerY-this._offset,left:e.layerX-this._offset,onEnd:o.hitch(this,"_updateColor")}).play():(o.style(this.cursorNode,"left",e.layerX-this._offset+"px"),o.style(this.cursorNode,"top",e.layerY-this._offset+"px"),this._updateColor(!1))},_hsv2rgb:function(e,t,i,r){o.isArray(e)&&(t&&(r=t),i=e[2]||0,t=e[1]||0,e=e[0]||0);var s={inputRange:r&&r.inputRange?r.inputRange:[255,255,255],outputRange:r&&r.outputRange?r.outputRange:255};switch(s.inputRange[0]){case 1:e=360*e;break;case 100:e=e/100*360;break;case 360:e=e;break;default:e=e/255*360}switch(360==e&&(e=0),s.inputRange[1]){case 100:t/=100;break;case 255:t/=255}switch(s.inputRange[2]){case 100:i/=100;break;case 255:i/=255}var d=null,a=null,n=null;if(0==t)d=i,a=i,n=i;else{var h=e/60,l=Math.floor(h),c=h-l,u=i*(1-t),v=i*(1-t*c),p=i*(1-t*(1-c));switch(l){case 0:d=i,a=p,n=u;break;case 1:d=v,a=i,n=u;break;case 2:d=u,a=i,n=p;break;case 3:d=u,a=v,n=i;break;case 4:d=p,a=u,n=i;break;case 5:d=i,a=u,n=v}}switch(s.outputRange){case 1:d=o.math.round(d,2),a=o.math.round(a,2),n=o.math.round(n,2);break;case 100:d=Math.round(100*d),a=Math.round(100*a),n=Math.round(100*n);break;default:d=Math.round(255*d),a=Math.round(255*a),n=Math.round(255*n)}return[d,a,n]}}))}});