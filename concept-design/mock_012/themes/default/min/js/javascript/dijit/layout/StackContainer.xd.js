dojo._xdResourceLoaded({depends:[["provide","dijit.layout.StackContainer"],["require","dijit._Templated"],["require","dijit.layout._LayoutWidget"],["require","dijit.form.Button"]],defineResource:function(t){t._hasResource["dijit.layout.StackContainer"]||(t._hasResource["dijit.layout.StackContainer"]=!0,t.provide("dijit.layout.StackContainer"),t.require("dijit._Templated"),t.require("dijit.layout._LayoutWidget"),t.require("dijit.form.Button"),t.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:!0,_started:!1,postCreate:function(){dijit.setWaiRole(this.containerNode||this.domNode,"tabpanel"),this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var e=this.getChildren();t.forEach(e,this._setupChild,this),t.some(e,function(t){return t.selected&&(this.selectedChildWidget=t),t.selected},this);var i=this.selectedChildWidget;!i&&e[0]&&(i=this.selectedChildWidget=e[0],i.selected=!0),i&&this._showChild(i),t.publish(this.id+"-startup",[{children:e,selected:i}]),this.inherited("startup",arguments),this._started=!0}},_setupChild:function(t){return t.domNode.style.display="none",t.domNode.style.position="relative",t},addChild:function(e,i){dijit._Container.prototype.addChild.apply(this,arguments),e=this._setupChild(e),this._started&&(this.layout(),t.publish(this.id+"-addChild",[e,i]),this.selectedChildWidget||this.selectChild(e))},removeChild:function(e){if(dijit._Container.prototype.removeChild.apply(this,arguments),!this._beingDestroyed&&(this._started&&(t.publish(this.id+"-removeChild",[e]),this.layout()),this.selectedChildWidget===e&&(this.selectedChildWidget=void 0,this._started))){var i=this.getChildren();i.length&&this.selectChild(i[0])}},selectChild:function(e){e=dijit.byId(e),this.selectedChildWidget!=e&&(this._transition(e,this.selectedChildWidget),this.selectedChildWidget=e,t.publish(this.id+"-selectChild",[e]))},_transition:function(t,e){e&&this._hideChild(e),this._showChild(t),this.doLayout&&t.resize&&t.resize(this._containerContentBox||this._contentBox)},_adjacent:function(e){var i=this.getChildren(),s=t.indexOf(i,this.selectedChildWidget);return s+=e?1:i.length-1,i[s%i.length]},forward:function(){this.selectChild(this._adjacent(!0))},back:function(){this.selectChild(this._adjacent(!1))},_onKeyPress:function(e){t.publish(this.id+"-containerKeyPress",[{e:e,page:this}])},layout:function(){this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._contentBox)},_showChild:function(t){var e=this.getChildren();t.isFirstChild=t==e[0],t.isLastChild=t==e[e.length-1],t.selected=!0,t.domNode.style.display="",t._loadCheck&&t._loadCheck(),t.onShow&&t.onShow()},_hideChild:function(t){t.selected=!1,t.domNode.style.display="none",t.onHide&&t.onHide()},closeChild:function(t){var e=t.onClose(this,t);e&&(this.removeChild(t),t.destroy())},destroy:function(){this._beingDestroyed=!0,this.inherited("destroy",arguments)}}),t.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist"),this.pane2button={},this._subscriptions=[t.subscribe(this.containerId+"-startup",this,"onStartup"),t.subscribe(this.containerId+"-addChild",this,"onAddChild"),t.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),t.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),t.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")]},onStartup:function(e){t.forEach(e.children,this.onAddChild,this),this.onSelectChild(e.selected)},destroy:function(){t.forEach(this._subscriptions,t.unsubscribe),this.inherited("destroy",arguments)},onAddChild:function(e,i){var s=document.createElement("span");this.domNode.appendChild(s);var n=t.getObject(this.buttonWidget),o=new n({label:e.title,closeButton:e.closable},s);this.addChild(o,i),this.pane2button[e]=o,e.controlButton=o,t.connect(o,"onClick",t.hitch(this,"onButtonClick",e)),t.connect(o,"onClickCloseButton",t.hitch(this,"onCloseButtonClick",e)),this._currentChild||(o.focusNode.setAttribute("tabIndex","0"),this._currentChild=e)},onRemoveChild:function(t){this._currentChild===t&&(this._currentChild=null);var e=this.pane2button[t];e&&e.destroy(),this.pane2button[t]=null},onSelectChild:function(t){if(t){if(this._currentChild){var e=this.pane2button[this._currentChild];e.setChecked(!1),e.focusNode.setAttribute("tabIndex","-1")}var i=this.pane2button[t];i.setChecked(!0),this._currentChild=t,i.focusNode.setAttribute("tabIndex","0")}},onButtonClick:function(t){var e=dijit.byId(this.containerId);e.selectChild(t)},onCloseButtonClick:function(t){var e=dijit.byId(this.containerId);e.closeChild(t);var i=this.pane2button[this._currentChild];i&&dijit.focus(i.focusNode||i.domNode)},adjacent:function(e){var i=this.getChildren(),s=t.indexOf(i,this.pane2button[this._currentChild]),n=e?1:i.length-1;return i[(s+n)%i.length]},onkeypress:function(e){if(!this.disabled&&!e.altKey){var i=!0;if(e.ctrlKey||!e._djpage){var s=t.keys;switch(e.keyCode){case s.LEFT_ARROW:case s.UP_ARROW:case s.PAGE_UP:i=!1;case s.RIGHT_ARROW:case s.DOWN_ARROW:case s.PAGE_DOWN:this.adjacent(i).onClick(),t.stopEvent(e);break;case s.DELETE:this._currentChild.closable&&this.onCloseButtonClick(this._currentChild),t.stopEvent(e);break;default:e.ctrlKey&&(e.keyCode==s.TAB?(this.adjacent(!e.shiftKey).onClick(),t.stopEvent(e)):"w"==e.keyChar&&(this._currentChild.closable&&this.onCloseButtonClick(this._currentChild),t.stopEvent(e)))}}}},onContainerKeyPress:function(t){t.e._djpage=t.page,this.onkeypress(t.e)}}),t.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(){dijit.setWaiRole(this.focusNode||this.domNode,"tab"),this.inherited("postCreate",arguments)},onClick:function(){dijit.focus(this.focusNode)},onClickCloseButton:function(t){t.stopPropagation()}}),t.extend(dijit._Widget,{title:"",selected:!1,closable:!1,onClose:function(){return!0}}))}});