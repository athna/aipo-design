dojo._hasResource["dojo.number"]||(dojo._hasResource["dojo.number"]=!0,dojo.provide("dojo.number"),dojo.require("dojo.i18n"),dojo.requireLocalization("dojo.cldr","number",null,"de,de-de,en,en-ca,en-us,es,es-es,fr,it,ja-jp,ko-kr,ROOT,pt,zh-cn,zh-tw"),dojo.require("dojo.string"),dojo.require("dojo.regexp"),dojo.number.format=function(e,r){r=dojo.mixin({},r||{});var n=dojo.i18n.normalizeLocale(r.locale),o=dojo.i18n.getLocalization("dojo.cldr","number",n);r.customs=o;var t=r.pattern||o[(r.type||"decimal")+"Format"];return isNaN(e)?null:dojo.number._applyPattern(e,t,r)},dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,dojo.number._applyPattern=function(e,r,n){n=n||{};var o=n.customs.group,t=n.customs.decimal,a=r.split(";"),i=a[0];if(r=a[0>e?1:0]||"-"+i,-1!=r.indexOf("%"))e*=100;else if(-1!=r.indexOf("‰"))e*=1e3;else if(-1!=r.indexOf("¤"))o=n.customs.currencyGroup||o,t=n.customs.currencyDecimal||t,r=r.replace(/\u00a4{1,3}/,function(e){var r=["symbol","currency","displayName"][e.length-1];return n[r]||n.currency||""});else if(-1!=r.indexOf("E"))throw new Error("exponential notation not supported");var u=dojo.number._numberPatternRE,d=i.match(u);if(!d)throw new Error("unable to find a number expression in pattern: "+r);return r.replace(u,dojo.number._formatAbsolute(e,d[0],{decimal:t,group:o,places:n.places}))},dojo.number.round=function(e,r,n){var o=String(e).split("."),t=o[1]&&o[1].length||0;if(t>r){var a=Math.pow(10,r);n>0&&(a*=10/n,r++),e=Math.round(e*a)/a,o=String(e).split("."),t=o[1]&&o[1].length||0,t>r&&(o[1]=o[1].substr(0,r),e=Number(o.join(".")))}return e},dojo.number._formatAbsolute=function(e,r,n){n=n||{},n.places===!0&&(n.places=0),1/0===n.places&&(n.places=6);var o=r.split("."),t=n.places>=0?n.places:o[1]&&o[1].length||0;n.round<0||(e=dojo.number.round(e,t,n.round));var a=String(Math.abs(e)).split("."),i=a[1]||"";if(n.places)a[1]=dojo.string.pad(i.substr(0,n.places),n.places,"0",!0);else if(o[1]&&0!==n.places){var u=o[1].lastIndexOf("0")+1;u>i.length&&(a[1]=dojo.string.pad(i,u,"0",!0));var d=o[1].length;d<i.length&&(a[1]=i.substr(0,d))}else a[1]&&a.pop();var p=o[0].replace(",","");u=p.indexOf("0"),-1!=u&&(u=p.length-u,u>a[0].length&&(a[0]=dojo.string.pad(a[0],u)),-1==p.indexOf("#")&&(a[0]=a[0].substr(a[0].length-u)));var l,s,c=o[0].lastIndexOf(",");if(-1!=c){l=o[0].length-c-1;var f=o[0].substr(0,c);c=f.lastIndexOf(","),-1!=c&&(s=f.length-c-1)}for(var g=[],m=a[0];m;){var j=m.length-l;g.push(j>0?m.substr(j):m),m=j>0?m.slice(0,j):"",s&&(l=s,delete s)}return a[0]=g.reverse().join(n.group||","),a.join(n.decimal||".")},dojo.number.regexp=function(e){return dojo.number._parseInfo(e).regexp},dojo.number._parseInfo=function(e){e=e||{};var r=dojo.i18n.normalizeLocale(e.locale),n=dojo.i18n.getLocalization("dojo.cldr","number",r),o=e.pattern||n[(e.type||"decimal")+"Format"],t=n.group,a=n.decimal,i=1;if(-1!=o.indexOf("%"))i/=100;else if(-1!=o.indexOf("‰"))i/=1e3;else{var u=-1!=o.indexOf("¤");u&&(t=n.currencyGroup||t,a=n.currencyDecimal||a)}var d=o.split(";");1==d.length&&d.push("-"+d[0]);var p=dojo.regexp.buildGroupRE(d,function(r){return r="(?:"+dojo.regexp.escapeString(r,".")+")",r.replace(dojo.number._numberPatternRE,function(r){var n={signed:!1,separator:e.strict?t:[t,""],fractional:e.fractional,decimal:a,exponent:!1},o=r.split("."),i=e.places;1==o.length||0===i?n.fractional=!1:("undefined"==typeof i&&(i=o[1].lastIndexOf("0")+1),i&&void 0==e.fractional&&(n.fractional=!0),!e.places&&i<o[1].length&&(i+=","+o[1].length),n.places=i);var u=o[0].split(",");return u.length>1&&(n.groupSize=u.pop().length,u.length>1&&(n.groupSize2=u.pop().length)),"("+dojo.number._realNumberRegexp(n)+")"})},!0);return u&&(p=p.replace(/(\s*)(\u00a4{1,3})(\s*)/g,function(r,n,o,t){var a=["symbol","currency","displayName"][o.length-1],i=dojo.regexp.escapeString(e[a]||e.currency||"");return n=n?"\\s":"",t=t?"\\s":"",e.strict?n+i+t:(n&&(n+="*"),t&&(t+="*"),"(?:"+n+i+t+")?")})),{regexp:p.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:t,decimal:a,factor:i}},dojo.number.parse=function(e,r){var n=dojo.number._parseInfo(r),o=new RegExp("^"+n.regexp+"$").exec(e);if(!o)return 0/0;var t=o[1];if(!o[1]){if(!o[2])return 0/0;t=o[2],n.factor*=-1}return t=t.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(t)*n.factor},dojo.number._realNumberRegexp=function(e){e=e||{},"undefined"==typeof e.places&&(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),("undefined"==typeof e.fractional||/^0/.test(e.places))&&(e.fractional=[!0,!1]),"undefined"==typeof e.exponent&&(e.exponent=[!0,!1]),"undefined"==typeof e.eSigned&&(e.eSigned=[!0,!1]);var r=dojo.number._integerRegexp(e),n=dojo.regexp.buildGroupRE(e.fractional,function(r){var n="";return r&&0!==e.places&&(n="\\"+e.decimal,1/0==e.places?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n},!0),o=dojo.regexp.buildGroupRE(e.exponent,function(r){return r?"([eE]"+dojo.number._integerRegexp({signed:e.eSigned})+")":""}),t=r+n;return n&&(t="(?:(?:"+t+")|(?:"+n+"))"),t+o},dojo.number._integerRegexp=function(e){e=e||{},"undefined"==typeof e.signed&&(e.signed=[!0,!1]),"undefined"==typeof e.separator?e.separator="":"undefined"==typeof e.groupSize&&(e.groupSize=3);var r=dojo.regexp.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),n=dojo.regexp.buildGroupRE(e.separator,function(r){if(!r)return"(?:0|[1-9]\\d*)";r=dojo.regexp.escapeString(r)," "==r?r="\\s":" "==r&&(r="\\s\\xa0");var n=e.groupSize,o=e.groupSize2;if(o){var t="(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+r+"]\\d{"+o+"})*["+r+"]\\d{"+n+"})";return n-o>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":t}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+r+"]\\d{"+n+"})*)"},!0);return r+n});