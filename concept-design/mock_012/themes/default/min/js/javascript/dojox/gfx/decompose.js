dojo._hasResource["dojox.gfx.decompose"]||(dojo._hasResource["dojox.gfx.decompose"]=!0,dojo.provide("dojox.gfx.decompose"),dojo.require("dojox.gfx.matrix"),function(){var x=dojox.gfx.matrix,y=function(x,y){return Math.abs(x-y)<=1e-6*(Math.abs(x)+Math.abs(y))},t=function(x,y,t,i){return isFinite(x)?isFinite(t)?(y=Math.abs(y),i=Math.abs(i),(y*x+i*t)/(y+i)):x:t},i=function(y){var t=new x.Matrix2D(y);return dojo.mixin(t,{dx:0,dy:0,xy:t.yx,yx:t.xy})},e=function(x){return x.xx*x.yy<0||x.xy*x.yx>0?-1:1},n=function(t){var i=x.normalize(t),e=-i.xx-i.yy,n=i.xx*i.yy-i.xy*i.yx,o=Math.sqrt(e*e-4*n),r=-(e+(0>e?-o:o))/2,a=n/r,s=i.xy/(r-i.xx),c=1,u=i.xy/(a-i.xx),d=1;y(r,a)&&(s=1,c=0,u=0,d=1),isFinite(s)||(s=1,c=(r-i.xx)/i.xy,isFinite(c)||(s=(r-i.yy)/i.yx,c=1,isFinite(s)||(s=1,c=i.yx/(r-i.yy)))),isFinite(u)||(u=1,d=(a-i.xx)/i.xy,isFinite(d)||(u=(a-i.yy)/i.yx,d=1,isFinite(u)||(u=1,d=i.yx/(a-i.yy))));var v=Math.sqrt(s*s+c*c),M=Math.sqrt(u*u+d*d);return isFinite(s/=v)||(s=0),isFinite(c/=v)||(c=0),isFinite(u/=M)||(u=0),isFinite(d/=M)||(d=0),{value1:r,value2:a,vector1:{x:s,y:c},vector2:{x:u,y:d}}},o=function(x,y){var i=e(x),n=y.angle1=(Math.atan2(x.yx,x.yy)+Math.atan2(-i*x.xy,i*x.xx))/2,o=Math.cos(n),r=Math.sin(n);return y.sx=t(x.xx/o,o,-x.xy/r,r),y.sy=t(x.yy/o,o,x.yx/r,r),y},r=function(x,y){var i=e(x),n=y.angle2=(Math.atan2(i*x.yx,i*x.xx)+Math.atan2(-x.xy,x.yy))/2,o=Math.cos(n),r=Math.sin(n);return y.sx=t(x.xx/o,o,x.yx/r,r),y.sy=t(x.yy/o,o,-x.xy/r,r),y};dojox.gfx.decompose=function(t){var e=x.normalize(t),a={dx:e.dx,dy:e.dy,sx:1,sy:1,angle1:0,angle2:0};if(y(e.xy,0)&&y(e.yx,0))return dojo.mixin(a,{sx:e.xx,sy:e.yy});if(y(e.xx*e.yx,-e.xy*e.yy))return o(e,a);if(y(e.xx*e.xy,-e.yx*e.yy))return r(e,a);var s=i(e),c=n([e,s]),u=n([s,e]),d=new x.Matrix2D({xx:c.vector1.x,xy:c.vector2.x,yx:c.vector1.y,yy:c.vector2.y}),v=new x.Matrix2D({xx:u.vector1.x,xy:u.vector1.y,yx:u.vector2.x,yy:u.vector2.y}),M=new x.Matrix2D([x.invert(d),e,x.invert(v)]);return o(v,a),M.xx*=a.sx,M.yy*=a.sy,r(d,a),M.xx*=a.sx,M.yy*=a.sy,dojo.mixin(a,{sx:M.xx,sy:M.yy})}}());