dojo._hasResource["dojox.gfx.matrix"]||(dojo._hasResource["dojox.gfx.matrix"]=!0,dojo.provide("dojox.gfx.matrix"),function(){var n=dojox.gfx.matrix;n._degToRad=function(n){return Math.PI*n/180},n._radToDeg=function(n){return n/Math.PI*180},n.Matrix2D=function(t){if(t)if("number"==typeof t)this.xx=this.yy=t;else if(t instanceof Array){if(t.length>0){for(var x=n.normalize(t[0]),e=1;e<t.length;++e){var r=x,y=dojox.gfx.matrix.normalize(t[e]);x=new n.Matrix2D,x.xx=r.xx*y.xx+r.xy*y.yx,x.xy=r.xx*y.xy+r.xy*y.yy,x.yx=r.yx*y.xx+r.yy*y.yx,x.yy=r.yx*y.xy+r.yy*y.yy,x.dx=r.xx*y.dx+r.xy*y.dy+r.dx,x.dy=r.yx*y.dx+r.yy*y.dy+r.dy}dojo.mixin(this,x)}}else dojo.mixin(this,t)},dojo.extend(n.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),dojo.mixin(n,{identity:new n.Matrix2D,flipX:new n.Matrix2D({xx:-1}),flipY:new n.Matrix2D({yy:-1}),flipXY:new n.Matrix2D({xx:-1,yy:-1}),translate:function(t,x){return arguments.length>1?new n.Matrix2D({dx:t,dy:x}):new n.Matrix2D({dx:t.x,dy:t.y})},scale:function(t,x){return arguments.length>1?new n.Matrix2D({xx:t,yy:x}):"number"==typeof t?new n.Matrix2D({xx:t,yy:t}):new n.Matrix2D({xx:t.x,yy:t.y})},rotate:function(t){var x=Math.cos(t),e=Math.sin(t);return new n.Matrix2D({xx:x,xy:-e,yx:e,yy:x})},rotateg:function(t){return n.rotate(n._degToRad(t))},skewX:function(t){return new n.Matrix2D({xy:-Math.tan(t)})},skewXg:function(t){return n.skewX(n._degToRad(t))},skewY:function(t){return new n.Matrix2D({yx:Math.tan(t)})},skewYg:function(t){return n.skewY(n._degToRad(t))},reflect:function(t,x){1==arguments.length&&(x=t.y,t=t.x);var e=t*t,r=x*x,y=e+r,a=2*t*x/y;return new n.Matrix2D({xx:2*e/y-1,xy:a,yx:a,yy:2*r/y-1})},project:function(t,x){1==arguments.length&&(x=t.y,t=t.x);var e=t*t,r=x*x,y=e+r,a=t*x/y;return new n.Matrix2D({xx:e/y,xy:a,yx:a,yy:r/y})},normalize:function(t){return t instanceof n.Matrix2D?t:new n.Matrix2D(t)},clone:function(t){var x=new n.Matrix2D;for(var e in t)"number"==typeof t[e]&&"number"==typeof x[e]&&x[e]!=t[e]&&(x[e]=t[e]);return x},invert:function(t){var x=n.normalize(t),e=x.xx*x.yy-x.xy*x.yx,x=new n.Matrix2D({xx:x.yy/e,xy:-x.xy/e,yx:-x.yx/e,yy:x.xx/e,dx:(x.xy*x.dy-x.yy*x.dx)/e,dy:(x.yx*x.dx-x.xx*x.dy)/e});return x},_multiplyPoint:function(n,t,x){return{x:n.xx*t+n.xy*x+n.dx,y:n.yx*t+n.yy*x+n.dy}},multiplyPoint:function(t,x,e){var r=n.normalize(t);return"number"==typeof x&&"number"==typeof e?n._multiplyPoint(r,x,e):n._multiplyPoint(r,x.x,x.y)},multiply:function(t){for(var x=n.normalize(t),e=1;e<arguments.length;++e){var r=x,y=n.normalize(arguments[e]);x=new n.Matrix2D,x.xx=r.xx*y.xx+r.xy*y.yx,x.xy=r.xx*y.xy+r.xy*y.yy,x.yx=r.yx*y.xx+r.yy*y.yx,x.yy=r.yx*y.xy+r.yy*y.yy,x.dx=r.xx*y.dx+r.xy*y.dy+r.dx,x.dy=r.yx*y.dx+r.yy*y.dy+r.dy}return x},_sandwich:function(t,x,e){return n.multiply(n.translate(x,e),t,n.translate(-x,-e))},scaleAt:function(t,x,e,r){switch(arguments.length){case 4:return n._sandwich(n.scale(t,x),e,r);case 3:return"number"==typeof e?n._sandwich(n.scale(t),x,e):n._sandwich(n.scale(t,x),e.x,e.y)}return n._sandwich(n.scale(t),x.x,x.y)},rotateAt:function(t,x,e){return arguments.length>2?n._sandwich(n.rotate(t),x,e):n._sandwich(n.rotate(t),x.x,x.y)},rotategAt:function(t,x,e){return arguments.length>2?n._sandwich(n.rotateg(t),x,e):n._sandwich(n.rotateg(t),x.x,x.y)},skewXAt:function(t,x,e){return arguments.length>2?n._sandwich(n.skewX(t),x,e):n._sandwich(n.skewX(t),x.x,x.y)},skewXgAt:function(t,x,e){return arguments.length>2?n._sandwich(n.skewXg(t),x,e):n._sandwich(n.skewXg(t),x.x,x.y)},skewYAt:function(t,x,e){return arguments.length>2?n._sandwich(n.skewY(t),x,e):n._sandwich(n.skewY(t),x.x,x.y)},skewYgAt:function(t,x,e){return arguments.length>2?n._sandwich(n.skewYg(t),x,e):n._sandwich(n.skewYg(t),x.x,x.y)}})}(),dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D);