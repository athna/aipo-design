dojo._xdResourceLoaded({depends:[["provide","aipo.widget.GroupSelectList"],["require","dijit._Widget"],["require","dijit._Templated"]],defineResource:function(e){if(!e._hasResource["aipo.widget.GroupSelectList"]){e._hasResource["aipo.widget.GroupSelectList"]=!0,e.provide("aipo.widget.GroupSelectList"),e.require("dijit._Widget"),e.require("dijit._Templated"),e.requireLocalization("aipo","locale");var t=e.i18n.getLocalization("aipo","locale");e.declare("aipo.widget.GroupSelectList",[dijit._Widget,dijit._Templated],{inputWidth:"95%",hiddenId:"",hiddenValue:"",inputId:"",inputValue:"",memberLimit:0,groupSelectId:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",widgetId:"",selectId:"",inputId:"",buttonAddId:"",buttonRemoveId:"",memberFromTitle:"",memberFromId:"",memberToTitle:"",memberToId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none"><tr><td><div id="groupPopupDiv"><div class="outer"><div class="popup"><div class="clearfix"><div class="memberlistToTop">${memberToTitle}</div><div class="memberlistFromTop">${memberFromTitle}</div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="10" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="10" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+t.DELETEBTN_STR+'" dojoAttachEvent="onclick:onMemberRemoveClick"/></div></div><div class="memberlistFromBottom"><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+t.ADDBTN_STR+'" dojoAttachEvent="onclick:onMemberAddClick"/></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId,params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue},aimluck.io.createOptions(this.memberFromId,params)},addOption:function(e,i,t,o){aimluck.io.addOption(e,i,t,o)},addOptionSync:function(i,t,o){var r=e.byId(this.memberToId),d=e.byId(this.selectId);if(!(0!=this.memberLimit&&r.options.length>=this.memberLimit)){if(document.all){var l=document.createElement("OPTION");l.value=i,l.text=t,l.selected=o;var m=document.createElement("OPTION");m.value=i,m.text=t,m.selected=o,1==r.options.length&&""==r.options[0].value&&(r.options.remove(0),d.options.remove(0)),r.add(l,r.options.length),d.add(m,d.options.length)}else{var l=document.createElement("OPTION");l.value=i,l.text=t,l.selected=o;var m=document.createElement("OPTION");m.value=i,m.text=t,m.selected=o,1==r.options.length&&""==r.options[0].value&&(r.removeChild(r.options[0]),d.removeChild(r.options[0])),r.insertBefore(l,r.options[r.options.length]),d.insertBefore(m,d.options[d.options.length])}this.inputMemberSync()}},addMember:function(e,t){if(document.all){var o=e.options,r=t.options;if(1==o.length&&""==o[0].value)return;for(i=0;i<o.length;i++)if(o[i].selected){var d=!1;for(j=0;j<r.length;j++)if(r[j].value==o[i].value){d=!0;break}if(!d){var l=document.createElement("OPTION");if(l.value=o[i].value,l.text=o[i].text,l.selected=!0,1==r.length&&""==r[0].value&&r.remove(0),0!=this.memberLimit&&t.options.length>=this.memberLimit)return;r.add(l,r.length)}}}else{var o=e.options,r=t.options;if(1==o.length&&""==o[0].value)return;for(i=0;i<o.length;i++)if(o[i].selected){var d=!1;for(j=0;j<r.length;j++)if(r[j].value==o[i].value){d=!0;break}if(!d){var l=document.createElement("OPTION");if(l.value=o[i].value,l.text=o[i].text,l.selected=!0,1==t.options.length&&""==t.options[0].value&&t.removeChild(t.options[0]),0!=this.memberLimit&&t.options.length>=this.memberLimit)return;t.insertBefore(l,r[r.length])}}}},removeAllMember:function(e){if(document.all){var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(t.remove(i),i-=1)}else{var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(e.removeChild(t[i]),i-=1)}},removeMember:function(e){if(document.all){var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(t.remove(i),i-=1)}else{var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(e.removeChild(t[i]),i-=1)}},removeMemberSync:function(){var t=e.byId(this.memberToId),o=e.byId(this.selectId);if(document.all){var r=t.options,d=o.options;for(i=0;i<r.length;i++)r[i].selected&&(r.remove(i),d.remove(i),i-=1)}else{var r=t.options,d=o.options;for(i=0;i<r.length;i++)r[i].selected&&(t.removeChild(r[i]),o.removeChild(d[i]),i-=1)}},inputMemberSync:function(){var t=e.byId(this.selectId),o=e.byId(this.inputId),r="",d=t.options;for(i=0;i<d.length;i++)0!=i&&(r+=", "),r+=d[i].text;o.innerHTML=r},changeGroup:function(e){var i=e.target.options[e.target.selectedIndex].value,t=this.changeGroupUrl+"&groupname="+i,o={url:t,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,o)},onMemberAddClick:function(){this.addMember(e.byId(this.memberFromId),e.byId(this.memberToId)),this.addMember(e.byId(this.memberFromId),e.byId(this.selectId)),this.inputMemberSync()},onMemberRemoveClick:function(){this.removeMemberSync(),this.inputMemberSync()}})}}});