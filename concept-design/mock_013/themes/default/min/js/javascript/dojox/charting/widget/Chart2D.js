dojo._hasResource["dojox.charting.widget.Chart2D"]||(dojo._hasResource["dojox.charting.widget.Chart2D"]=!0,dojo.provide("dojox.charting.widget.Chart2D"),dojo.require("dijit._Widget"),dojo.require("dojox.charting.Chart2D"),dojo.require("dojox.lang.functional"),function(){var collectAxisParams,collectPlotParams,collectDataParams,notNull=function(t){return t},df=dojox.lang.functional,du=dojox.lang.utils;dojo.declare("dojox.charting.widget.Chart2D",dijit._Widget,{theme:null,margins:null,stroke:null,fill:null,buildRendering:function(){var t=this.domNode=this.srcNodeRef,e=dojo.filter(dojo.query("> .axis",t).map(collectAxisParams),notNull),o=dojo.filter(dojo.query("> .plot",t).map(collectPlotParams),notNull),r=dojo.filter(dojo.query("> .series",t).map(collectDataParams),notNull);t.innerHTML="";var a=this.chart=new dojox.charting.Chart2D(t,{margins:this.margins,stroke:this.stroke,fill:this.fill});this.theme&&a.setTheme(this.theme),dojo.forEach(e,function(t){a.addAxis(t.name,t.kwArgs)}),dojo.forEach(o,function(t){a.addPlot(t.name,t.kwArgs)});var n=df.foldl(r,function(t,e){if("data"==e.type)a.addSeries(e.name,e.data,e.kwArgs),t=!0;else{a.addSeries(e.name,[0],e.kwArgs);var o={};du.updateWithPattern(o,e.kwArgs,{query:"",queryOptions:null,start:0,count:1,sort:[]},!0),dojo.mixin(o,{onComplete:function(t){var o;if("valueFn"in e.kwArgs){var r=e.kwArgs.valueFn;o=dojo.map(t,function(t){return r(e.data.getValue(t,e.field,0))})}else o=dojo.map(t,function(t){return e.data.getValue(t,e.field,0)});a.addSeries(e.name,o,e.kwArgs).render()}}),e.data.fetch(o)}return t},!1);n&&a.render()},resize:function(t){dojo.marginBox(this.domNode,t),this.chart.resize()}}),collectAxisParams=function(node){var name=node.getAttribute("name"),type=node.getAttribute("type");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs;if(type){dojox.charting.axis2d[type]&&(type="dojox.charting.axis2d."+type);var axis=eval("("+type+")");axis&&(kw.type=axis)}else type="dojox.charting.axis2d.Default";var dp=eval("("+type+".prototype.defaultParams)");for(var x in dp)if(!(x in kw)){var attr=node.getAttribute(x);kw[x]=du.coerceType(dp[x],null==attr?dp[x]:attr)}var op=eval("("+type+".prototype.optionalParams)");for(var x in op)if(!(x in kw)){var attr=node.getAttribute(x);null!=attr&&(kw[x]=du.coerceType(op[x],attr))}return o},collectPlotParams=function(node){var name=node.getAttribute("name"),type=node.getAttribute("type");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs;if(type){dojox.charting.plot2d[type]&&(type="dojox.charting.plot2d."+type);var plot=eval("("+type+")");plot&&(kw.type=plot)}else type="dojox.charting.plot2d.Default";var dp=eval("("+type+".prototype.defaultParams)");for(var x in dp)if(!(x in kw)){var attr=node.getAttribute(x);kw[x]=du.coerceType(dp[x],null==attr?dp[x]:attr)}var op=eval("("+type+".prototype.optionalParams)");for(var x in op)if(!(x in kw)){var attr=node.getAttribute(x);null!=attr&&(kw[x]=du.coerceType(op[x],attr))}return o},collectDataParams=function(node){var name=node.getAttribute("name");if(!name)return null;var o={name:name,kwArgs:{}},kw=o.kwArgs,t;return t=node.getAttribute("plot"),null!=t&&(kw.plot=t),t=node.getAttribute("marker"),null!=t&&(kw.marker=t),t=node.getAttribute("stroke"),null!=t&&(kw.stroke=eval("("+t+")")),t=node.getAttribute("fill"),null!=t&&(kw.fill=eval("("+t+")")),t=node.getAttribute("data"),null!=t?(o.type="data",o.data=dojo.map(String(t).split(","),Number),o):(t=node.getAttribute("array"),null!=t?(o.type="data",o.data=eval("("+t+")"),o):(t=node.getAttribute("store"),null!=t?(o.type="store",o.data=eval("("+t+")"),t=node.getAttribute("field"),o.field=null!=t?t:"value",t=node.getAttribute("query"),null!=t&&(kw.query=t),t=node.getAttribute("queryOptions"),null!=t&&(kw.queryOptions=eval("("+t+")")),t=node.getAttribute("start"),null!=t&&(kw.start=Number(t)),t=node.getAttribute("count"),null!=t&&(kw.count=Number(t)),t=node.getAttribute("sort"),null!=t&&(kw.sort=eval("("+t+")")),t=node.getAttribute("valueFn"),null!=t&&(kw.valueFn=df.lambda(t)),o):null))}}());