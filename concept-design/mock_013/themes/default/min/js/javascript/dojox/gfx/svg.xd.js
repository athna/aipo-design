dojo._xdResourceLoaded({depends:[["provide","dojox.gfx.svg"],["require","dojox.gfx._base"],["require","dojox.gfx.shape"],["require","dojox.gfx.path"]],defineResource:function(t){t._hasResource["dojox.gfx.svg"]||(t._hasResource["dojox.gfx.svg"]=!0,t.provide("dojox.gfx.svg"),t.require("dojox.gfx._base"),t.require("dojox.gfx.shape"),t.require("dojox.gfx.path"),dojox.gfx.svg.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},dojox.gfx.svg.getRef=function(e){return e&&"none"!=e?e.match(/^url\(#.+\)$/)?t.byId(e.slice(5,-1)):e.match(/^#dojoUnique\d+$/)?t.byId(e.slice(1)):null:null},dojox.gfx.svg.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},t.extend(dojox.gfx.Shape,{setFill:function(e){if(!e)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var o,i=function(t){this.setAttribute(t,o[t].toFixed(8))};if("object"==typeof e&&"type"in e){switch(e.type){case"linear":o=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,e);var r=this._setFillObject(o,"linearGradient");t.forEach(["x1","y1","x2","y2"],i,r);break;case"radial":o=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,e);var r=this._setFillObject(o,"radialGradient");t.forEach(["cx","cy","r"],i,r);break;case"pattern":o=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,e);var s=this._setFillObject(o,"pattern");t.forEach(["x","y","width","height"],i,s)}return this.fillStyle=o,this}var o=dojox.gfx.normalizeColor(e);return this.fillStyle=o,this.rawNode.setAttribute("fill",o.toCss()),this.rawNode.setAttribute("fill-opacity",o.a),this.rawNode.setAttribute("fill-rule","evenodd"),this},setStroke:function(e){if(!e)return this.strokeStyle=null,this.rawNode.setAttribute("stroke","none"),this.rawNode.setAttribute("stroke-opacity",0),this;"string"==typeof e&&(e={color:e});var o=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,e);o.color=dojox.gfx.normalizeColor(o.color);var i=this.rawNode;if(o){i.setAttribute("stroke",o.color.toCss()),i.setAttribute("stroke-opacity",o.color.a),i.setAttribute("stroke-width",o.width),i.setAttribute("stroke-linecap",o.cap),"number"==typeof o.join?(i.setAttribute("stroke-linejoin","miter"),i.setAttribute("stroke-miterlimit",o.join)):i.setAttribute("stroke-linejoin",o.join);var r=o.style.toLowerCase();if(r in dojox.gfx.svg.dasharray&&(r=dojox.gfx.svg.dasharray[r]),r instanceof Array){r=t.clone(r);for(var s=0;s<r.length;++s)r[s]*=o.width;if("butt"!=o.cap){for(var s=0;s<r.length;s+=2)r[s]-=o.width,r[s]<1&&(r[s]=1);for(var s=1;s<r.length;s+=2)r[s]+=o.width}r=r.join(",")}i.setAttribute("stroke-dasharray",r),i.setAttribute("dojoGfxStrokeStyle",o.style)}return this},_getParentSurface:function(){for(var t=this.parent;t&&!(t instanceof dojox.gfx.Surface);t=t.parent);return t},_setFillObject:function(e,o){var i=dojox.gfx.svg.xmlns.svg;this.fillStyle=e;var r=this._getParentSurface(),s=r.defNode,a=this.rawNode.getAttribute("fill"),d=dojox.gfx.svg.getRef(a);if(d)if(a=d,a.tagName.toLowerCase()!=o.toLowerCase()){var n=a.id;a.parentNode.removeChild(a),a=document.createElementNS(i,o),a.setAttribute("id",n),s.appendChild(a)}else for(;a.childNodes.length;)a.removeChild(a.lastChild);else a=document.createElementNS(i,o),a.setAttribute("id",dojox.gfx._base._getUniqueId()),s.appendChild(a);if("pattern"==o){t.isSafari?a.setAttributeNS(null,"patternUnits","userSpaceOnUse"):a.setAttribute("patternUnits","userSpaceOnUse");var h=document.createElementNS(i,"image");h.setAttribute("x",0),h.setAttribute("y",0),h.setAttribute("width",e.width.toFixed(8)),h.setAttribute("height",e.height.toFixed(8)),h.setAttributeNS(dojox.gfx.svg.xmlns.xlink,"href",e.src),a.appendChild(h)}else{t.isSafari?a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"):a.setAttribute("gradientUnits","userSpaceOnUse");for(var x=0;x<e.colors.length;++x){var f=e.colors[x],l=document.createElementNS(i,"stop"),u=f.color=dojox.gfx.normalizeColor(f.color);l.setAttribute("offset",f.offset.toFixed(8)),l.setAttribute("stop-color",u.toCss()),l.setAttribute("stop-opacity",u.a),a.appendChild(l)}}return this.rawNode.setAttribute("fill","url(#"+a.getAttribute("id")+")"),this.rawNode.removeAttribute("fill-opacity"),this.rawNode.setAttribute("fill-rule","evenodd"),a},_applyTransform:function(){var t=this.matrix;if(t){var e=this.matrix;this.rawNode.setAttribute("transform","matrix("+e.xx.toFixed(8)+","+e.yx.toFixed(8)+","+e.xy.toFixed(8)+","+e.yy.toFixed(8)+","+e.dx.toFixed(8)+","+e.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(t){var e=this.rawNode=t;e.setAttribute("fill","none"),e.setAttribute("fill-opacity",0),e.setAttribute("stroke","none"),e.setAttribute("stroke-opacity",0),e.setAttribute("stroke-width",1),e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-linejoin","miter"),e.setAttribute("stroke-miterlimit",4)},setShape:function(t){this.shape=dojox.gfx.makeParameters(this.shape,t);for(var e in this.shape)"type"!=e&&this.rawNode.setAttribute(e,this.shape[e]);return this},_moveToFront:function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},_moveToBack:function(){return this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild),this}}),t.declare("dojox.gfx.Group",dojox.gfx.Shape,{constructor:function(){dojox.gfx.svg.Container._init.call(this)},setRawNode:function(t){this.rawNode=t}}),dojox.gfx.Group.nodeType="g",t.declare("dojox.gfx.Rect",dojox.gfx.shape.Rect,{setShape:function(t){this.shape=dojox.gfx.makeParameters(this.shape,t),this.bbox=null;for(var e in this.shape)"type"!=e&&"r"!=e&&this.rawNode.setAttribute(e,this.shape[e]);return this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r)),this}}),dojox.gfx.Rect.nodeType="rect",dojox.gfx.Ellipse=dojox.gfx.shape.Ellipse,dojox.gfx.Ellipse.nodeType="ellipse",dojox.gfx.Circle=dojox.gfx.shape.Circle,dojox.gfx.Circle.nodeType="circle",dojox.gfx.Line=dojox.gfx.shape.Line,dojox.gfx.Line.nodeType="line",t.declare("dojox.gfx.Polyline",dojox.gfx.shape.Polyline,{setShape:function(t,e){t&&t instanceof Array?(this.shape=dojox.gfx.makeParameters(this.shape,{points:t}),e&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=dojox.gfx.makeParameters(this.shape,t),this.box=null;for(var o=[],i=this.shape.points,r=0;r<i.length;++r)"number"==typeof i[r]?o.push(i[r].toFixed(8)):(o.push(i[r].x.toFixed(8)),o.push(i[r].y.toFixed(8)));return this.rawNode.setAttribute("points",o.join(" ")),this}}),dojox.gfx.Polyline.nodeType="polyline",t.declare("dojox.gfx.Image",dojox.gfx.shape.Image,{setShape:function(t){this.shape=dojox.gfx.makeParameters(this.shape,t),this.bbox=null;var e=this.rawNode;for(var o in this.shape)"type"!=o&&"src"!=o&&e.setAttribute(o,this.shape[o]);return e.setAttributeNS(dojox.gfx.svg.xmlns.xlink,"href",this.shape.src),this}}),dojox.gfx.Image.nodeType="image",t.declare("dojox.gfx.Text",dojox.gfx.shape.Text,{setShape:function(t){this.shape=dojox.gfx.makeParameters(this.shape,t),this.bbox=null;var e=this.rawNode,o=this.shape;return e.setAttribute("x",o.x),e.setAttribute("y",o.y),e.setAttribute("text-anchor",o.align),e.setAttribute("text-decoration",o.decoration),e.setAttribute("rotate",o.rotated?90:0),e.setAttribute("kerning",o.kerning?"auto":0),e.setAttribute("text-rendering","optimizeLegibility"),e.textContent=o.text,this},getTextWidth:function(){var t=this.rawNode,e=t.parentNode,o=t.cloneNode(!0);o.style.visibility="hidden";var i=0,r=o.firstChild.nodeValue;if(e.appendChild(o),""!=r)for(;!i;)i=parseInt(o.getBBox().width);return e.removeChild(o),i}}),dojox.gfx.Text.nodeType="text",t.declare("dojox.gfx.Path",dojox.gfx.path.Path,{_updateWithSegment:function(){dojox.gfx.Path.superclass._updateWithSegment.apply(this,arguments),"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(){return dojox.gfx.Path.superclass.setShape.apply(this,arguments),this.rawNode.setAttribute("d",this.shape.path),this}}),dojox.gfx.Path.nodeType="path",t.declare("dojox.gfx.TextPath",dojox.gfx.path.TextPath,{_updateWithSegment:function(){dojox.gfx.Path.superclass._updateWithSegment.apply(this,arguments),this._setTextPath()},setShape:function(){return dojox.gfx.Path.superclass.setShape.apply(this,arguments),this._setTextPath(),this},_setTextPath:function(){if("string"==typeof this.shape.path){var t=this.rawNode;if(!t.firstChild){var e=document.createElementNS(dojox.gfx.svg.xmlns.svg,"textPath"),o=document.createTextNode("");e.appendChild(o),t.appendChild(e)}var i=t.firstChild.getAttributeNS(dojox.gfx.svg.xmlns.xlink,"href"),r=i&&dojox.gfx.svg.getRef(i);if(!r){var s=this._getParentSurface();if(s){var a=s.defNode;r=document.createElementNS(dojox.gfx.svg.xmlns.svg,"path");var d=dojox.gfx._base._getUniqueId();r.setAttribute("id",d),a.appendChild(r),t.firstChild.setAttributeNS(dojox.gfx.svg.xmlns.xlink,"href","#"+d)}}r&&r.setAttribute("d",this.shape.path)}},_setText:function(){var t=this.rawNode;if(!t.firstChild){var e=document.createElementNS(dojox.gfx.svg.xmlns.svg,"textPath"),o=document.createTextNode("");e.appendChild(o),t.appendChild(e)}t=t.firstChild;var i=this.text;switch(t.setAttribute("alignment-baseline","middle"),i.align){case"middle":t.setAttribute("text-anchor","middle"),t.setAttribute("startOffset","50%");break;case"end":t.setAttribute("text-anchor","end"),t.setAttribute("startOffset","100%");break;default:t.setAttribute("text-anchor","start"),t.setAttribute("startOffset","0%")}t.setAttribute("baseline-shift","0.5ex"),t.setAttribute("text-decoration",i.decoration),t.setAttribute("rotate",i.rotated?90:0),t.setAttribute("kerning",i.kerning?"auto":0),t.firstChild.data=i.text}}),dojox.gfx.TextPath.nodeType="text",t.declare("dojox.gfx.Surface",dojox.gfx.shape.Surface,{constructor:function(){dojox.gfx.svg.Container._init.call(this)},setDimensions:function(t,e){return this.rawNode?(this.rawNode.setAttribute("width",t),this.rawNode.setAttribute("height",e),this):this},getDimensions:function(){return this.rawNode?{width:this.rawNode.getAttribute("width"),height:this.rawNode.getAttribute("height")}:null}}),dojox.gfx.createSurface=function(e,o,i){var r=new dojox.gfx.Surface;r.rawNode=document.createElementNS(dojox.gfx.svg.xmlns.svg,"svg"),r.rawNode.setAttribute("width",o),r.rawNode.setAttribute("height",i);var s=document.createElementNS(dojox.gfx.svg.xmlns.svg,"defs");return r.rawNode.appendChild(s),r.defNode=s,t.byId(e).appendChild(r.rawNode),r},dojox.gfx.svg.Font={_setFont:function(){var t=this.fontStyle;this.rawNode.setAttribute("font-style",t.style),this.rawNode.setAttribute("font-variant",t.variant),this.rawNode.setAttribute("font-weight",t.weight),this.rawNode.setAttribute("font-size",t.size),this.rawNode.setAttribute("font-family",t.family)}},dojox.gfx.svg.Container={_init:function(){dojox.gfx.shape.Container._init.call(this)},add:function(t){return this!=t.getParent()&&(this.rawNode.appendChild(t.rawNode),dojox.gfx.shape.Container.add.apply(this,arguments)),this},remove:function(t){return this==t.getParent()&&(this.rawNode==t.rawNode.parentNode&&this.rawNode.removeChild(t.rawNode),dojox.gfx.shape.Container.remove.apply(this,arguments)),this},clear:function(){for(var t=this.rawNode;t.lastChild;)t.removeChild(t.lastChild);return dojox.gfx.shape.Container.clear.apply(this,arguments)},_moveChildToFront:dojox.gfx.shape.Container._moveChildToFront,_moveChildToBack:dojox.gfx.shape.Container._moveChildToBack},t.mixin(dojox.gfx.shape.Creator,{createObject:function(t,e){if(!this.rawNode)return null;var o=new t,i=document.createElementNS(dojox.gfx.svg.xmlns.svg,t.nodeType);return o.setRawNode(i),this.rawNode.appendChild(i),o.setShape(e),this.add(o),o}}),t.extend(dojox.gfx.Text,dojox.gfx.svg.Font),t.extend(dojox.gfx.TextPath,dojox.gfx.svg.Font),t.extend(dojox.gfx.Group,dojox.gfx.svg.Container),t.extend(dojox.gfx.Group,dojox.gfx.shape.Creator),t.extend(dojox.gfx.Surface,dojox.gfx.svg.Container),t.extend(dojox.gfx.Surface,dojox.gfx.shape.Creator))}});