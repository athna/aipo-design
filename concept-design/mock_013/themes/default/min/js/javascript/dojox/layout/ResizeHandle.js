dojo._hasResource["dojox.layout.ResizeHandle"]||(dojo._hasResource["dojox.layout.ResizeHandle"]=!0,dojo.provide("dojox.layout.ResizeHandle"),dojo.experimental("dojox.layout.ResizeHandle"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.require("dojo.fx"),dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,templateString:'<div dojoAttachPoint="resizeHandle" class="dojoxResizeHandle"><div></div></div>',_isSizing:!1,_connects:[],_activeResizeNode:null,_activeResizeLastEvent:null,_resizeX:!0,_resizeY:!0,postCreate:function(){switch(dojo.connect(this.resizeHandle,"onmousedown",this,"_beginSizing"),this.activeResize?this.animateSizing=!1:(this._activeResizeNode=document.createElement("div"),dojo.addClass(this._activeResizeNode,this.activeResizeClass)),this.minSize||(this.minSize={w:this.minWidth,h:this.minHeight}),this._resizeX=this._resizeY=!1,this.resizeAxis.toLowerCase()){case"xy":this._resizeX=this._resizeY=!0,dojo.addClass(this.resizeHandle,"dojoxResizeNW");break;case"x":this._resizeX=!0,dojo.addClass(this.resizeHandle,"dojoxResizeW");break;case"y":this._resizeY=!0,dojo.addClass(this.resizeHandle,"dojoxResizeN")}},_beginSizing:function(e){if(this._isSizing)return!1;if(this.targetWidget=dijit.byId(this.targetId),this.targetWidget&&(this.activeResize=!0),this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId),this.targetContainer&&(this.targetDomNode=this.targetContainer),this.targetDomNode){this.activeResize||(this.targetDomNode.appendChild(this._activeResizeNode),dojo.fadeIn({node:this._activeResizeNode,duration:120,beforeBegin:dojo.hitch(this,function(){this._activeResizeNode.style.display=""})}).play()),this._isSizing=!0,this.startPoint={x:e.clientX,y:e.clientY};var i=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:i.w,h:i.h},this._connects=[],this._connects.push(dojo.connect(document,"onmousemove",this,"_updateSizing")),this._connects.push(dojo.connect(document,"onmouseup",this,"_endSizing")),e.preventDefault()}},_updateSizing:function(e){if(this.activeResize)this._changeSizing(e);else{var i=this._getNewCoords(e);if(i===!1)return;dojo.style(this._activeResizeNode,"width",i.width+"px"),dojo.style(this._activeResizeNode,"height",i.height+"px"),this._activeResizeNode.style.display=""}},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY)return!1}catch(e){return!1}this._activeResizeLastEvent=e;var i=this.startPoint.x-e.clientX,t=this.startPoint.y-e.clientY,s=this._resizeX?this.startSize.w-i:this.startSize.w,o=this._resizeY?this.startSize.h-t:this.startSize.h;return this.minSize&&(s<this.minSize.w&&(s=this.minSize.w),o<this.minSize.h&&(o=this.minSize.h)),{width:s,height:o}},_changeSizing:function(e){var i=this._getNewCoords(e);if(i!==!1){if(this.targetWidget&&"function"==typeof this.targetWidget.resize)this.targetWidget.resize({w:i.width,h:i.height});else if(this.animateSizing){var t=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:i.width,unit:"px"}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:i.height,unit:"px"}},duration:this.animateDuration})]);t.play()}else dojo.style(this.targetDomNode,"width",i.width+"px"),dojo.style(this.targetDomNode,"height",i.height+"px");e.preventDefault()}},_endSizing:function(e){dojo.forEach(this._connects,function(e){dojo.disconnect(e)}),this.activeResize||(dojo.fadeOut({node:this._activeResizeNode,duration:250,onEnd:dojo.hitch(this,function(){this._activeResizeNode.style.display="none"})}).play(),this._changeSizing(e)),this._isSizing=!1}}));