dojo._hasResource["dijit.Dialog"]||(dojo._hasResource["dijit.Dialog"]=!0,dojo.provide("dijit.Dialog"),dojo.require("dojo.dnd.move"),dojo.require("dojo.fx"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.require("dijit.layout.ContentPane"),dojo.require("dijit.form.Form"),dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class=dijitDialogUnderlayWrapper id='${id}_underlay'><div class=dijitDialogUnderlay dojoAttachPoint='node'></div></div>",postCreate:function(){dojo.body().appendChild(this.domNode),this.bgIframe=new dijit.BackgroundIframe(this.domNode)},layout:function(){var t=dijit.getViewport(),o=this.node.style,i=this.domNode.style;i.top=t.t+"px",i.left=t.l+"px",o.width=t.w+"px",o.height=t.h+"px";var e=dijit.getViewport();t.w!=e.w&&(o.width=e.w+"px"),t.h!=e.h&&(o.height=e.h+"px")},show:function(){this.domNode.style.display="block",this.layout(),this.bgIframe.iframe&&(this.bgIframe.iframe.style.display="block"),this._resizeHandler=this.connect(window,"onresize","layout")},hide:function(){this.domNode.style.display="none",this.bgIframe.iframe&&(this.bgIframe.iframe.style.display="none"),this.disconnect(this._resizeHandler)},uninitialize:function(){this.bgIframe&&this.bgIframe.destroy()}}),dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin],{templateString:null,templateString:'<div class="dijitDialog">\r\n	<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar" tabindex="0" waiRole="dialog">\r\n	<span dojoAttachPoint="titleNode" class="dijitDialogTitle">${title}</span>\r\n	<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="onclick: hide">\r\n		<span dojoAttachPoint="closeText" class="closeText">x</span>\r\n	</span>\r\n	</div>\r\n		<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\r\n	<span dojoAttachPoint="tabEnd" dojoAttachEvent="onfocus:_cycleFocus" tabindex="0"></span>\r\n</div>\r\n',open:!1,duration:400,_lastFocusItem:null,attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{title:"titleBar"}),postCreate:function(){dojo.body().appendChild(this.domNode),this.inherited("postCreate",arguments),this.domNode.style.display="none",this.connect(this,"onExecute","hide"),this.connect(this,"onCancel","hide")},onLoad:function(){this._position(),this.inherited("onLoad",arguments)},_setup:function(){this._modalconnects=[],this.titleBar&&(this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar})),this._underlay=new dijit.DialogUnderlay;var t=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:t,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]),this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:t,duration:this.duration,onEnd:function(){t.style.display="none"}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])},uninitialize:function(){this._underlay&&this._underlay.destroy()},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var t=dijit.getViewport(),o=dojo.marginBox(this.domNode),i=this.domNode.style;i.left=Math.floor(t.l+(t.w-o.w)/2)+"px",i.top=Math.floor(t.t+(t.h-o.h)/2)+"px"}},_findLastFocus:function(t){this._lastFocused=t.target},_cycleFocus:function(){this._lastFocusItem||(this._lastFocusItem=this._lastFocused),this.titleBar.focus()},_onKey:function(t){if(t.keyCode){var o=t.target;if(o==this.titleBar&&t.shiftKey&&t.keyCode==dojo.keys.TAB)this._lastFocusItem&&this._lastFocusItem.focus(),dojo.stopEvent(t);else{for(;o;){if(o==this.domNode){if(t.keyCode!=dojo.keys.ESCAPE)return;this.hide()}o=o.parentNode}if(t.keyCode!=dojo.keys.TAB)dojo.stopEvent(t);else if(!dojo.isOpera)try{this.titleBar.focus()}catch(i){}}}},show:function(){this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),"playing"==this._fadeOut.status()&&this._fadeOut.stop(),this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout")),this._modalconnects.push(dojo.connect(document.documentElement,"onkeypress",this,"_onKey"));var t="object"==typeof document.ondeactivate?"ondeactivate":"onblur";this._modalconnects.push(dojo.connect(this.containerNode,t,this,"_findLastFocus")),dojo.style(this.domNode,"opacity",0),this.domNode.style.display="block",this.open=!0,this._loadCheck(),this._position(),this._fadeIn.play(),this._savedFocus=dijit.getFocus(this),setTimeout(dojo.hitch(this,function(){dijit.focus(this.titleBar)}),50)},hide:function(){this._alreadyInitialized&&("playing"==this._fadeIn.status()&&this._fadeIn.stop(),this._fadeOut.play(),this._scrollConnected&&(this._scrollConnected=!1),dojo.forEach(this._modalconnects,dojo.disconnect),this._modalconnects=[],this.connect(this._fadeOut,"onEnd",dojo.hitch(this,function(){dijit.focus(this._savedFocus)})),this.open=!1)},layout:function(){"block"==this.domNode.style.display&&(this._underlay.layout(),this._position())}}),dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin],{title:"",_lastFocusItem:null,templateString:null,templateString:'<div class="dijitTooltipDialog" >\r\n	<div class="dijitTooltipContainer">\r\n		<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" tabindex="0" waiRole="dialog"></div>\r\n	</div>\r\n	<span dojoAttachPoint="tabEnd" tabindex="0" dojoAttachEvent="focus:_cycleFocus"></span>\r\n	<div class="dijitTooltipConnector" ></div>\r\n</div>\r\n',postCreate:function(){this.inherited("postCreate",arguments),this.connect(this.containerNode,"onkeypress","_onKey");var t="object"==typeof document.ondeactivate?"ondeactivate":"onblur";this.connect(this.containerNode,t,"_findLastFocus"),this.containerNode.title=this.title},orient:function(t){this.domNode.className="dijitTooltipDialog  dijitTooltipAB"+("L"==t.charAt(1)?"Left":"Right")+" dijitTooltip"+("T"==t.charAt(0)?"Below":"Above")},onOpen:function(t){this.orient(t.corner),this._loadCheck(),this.containerNode.focus()},_onKey:function(t){t.keyCode==dojo.keys.ESCAPE?this.onCancel():t.target==this.containerNode&&t.shiftKey&&t.keyCode==dojo.keys.TAB?(this._lastFocusItem&&this._lastFocusItem.focus(),dojo.stopEvent(t)):t.keyCode==dojo.keys.TAB&&t.stopPropagation()},_findLastFocus:function(t){this._lastFocused=t.target},_cycleFocus:function(){this._lastFocusItem||(this._lastFocusItem=this._lastFocused),this.containerNode.focus()}}));