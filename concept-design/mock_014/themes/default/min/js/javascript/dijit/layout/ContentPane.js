dojo._hasResource["dijit.layout.ContentPane"]||(dojo._hasResource["dijit.layout.ContentPane"]=!0,dojo.provide("dijit.layout.ContentPane"),dojo.require("dijit._Widget"),dojo.require("dijit.layout._LayoutWidget"),dojo.require("dojo.parser"),dojo.require("dojo.string"),dojo.requireLocalization("dijit","loading",null,"cs,de,es,fr,hu,it,ja,ko,ROOT,pl,pt,ru,zh,zh-tw"),dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:!1,parseOnLoad:!0,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:!1,"class":"dijitContentPane",postCreate:function(){this.domNode.title="",this.preload&&this._loadCheck();var t=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,t),this.errorMessage=dojo.string.substitute(this.errorMessage,t),dojo.addClass(this.domNode,this["class"])},startup:function(){this._started||(this._checkIfSingleChild(),this._singleChild&&this._singleChild.startup(),this._loadCheck(),this._started=!0)},_checkIfSingleChild:function(){var t=dojo.query(">",this.containerNode||this.domNode),o=t.filter("[widgetId]");1==t.length&&1==o.length?(this.isContainer=!0,this._singleChild=dijit.byNode(o[0])):(delete this.isContainer,delete this._singleChild)},refresh:function(){return this._prepareLoad(!0)},setHref:function(t){return this.href=t,this._prepareLoad()},setContent:function(t){this._isDownloaded||(this.href="",this._onUnloadHandler()),this._setContent(t||""),this._isDownloaded=!1,this.parseOnLoad&&this._createSubWidgets(),this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize&&this._singleChild.resize(this._contentBox),this._onLoadHandler()},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd},destroy:function(){this._beingDestroyed||(this._onUnloadHandler(),this._beingDestroyed=!0,this.inherited("destroy",arguments))},resize:function(t){dojo.marginBox(this.domNode,t);var o=this.containerNode||this.domNode,e=dojo.mixin(dojo.marginBox(o),t||{});this._contentBox=dijit.layout.marginBox2contentBox(o,e),this._singleChild&&this._singleChild.resize&&this._singleChild.resize(this._contentBox)},_prepareLoad:function(t){this.cancel(),this.isLoaded=!1,this._loadCheck(t)},_loadCheck:function(t){var o=this.open!==!1&&"none"!=this.domNode.style.display;this.href&&(t||this.preload&&!this._xhrDfd||this.refreshOnShow&&o&&!this._xhrDfd||!this.isLoaded&&o&&!this._xhrDfd)&&this._downloadExternalContent()},_downloadExternalContent:function(){this._onUnloadHandler(),this._setContent(this.onDownloadStart.call(this));var t=this,o={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};dojo.isObject(this.ioArgs)&&dojo.mixin(o,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(o);e.addCallback(function(o){try{t.onDownloadEnd.call(t),t._isDownloaded=!0,t.setContent.call(t,o)}catch(e){t._onError.call(t,"Content",e)}return delete t._xhrDfd,o}),e.addErrback(function(o){return e.cancelled||t._onError.call(t,"Download",o),delete t._xhrDfd,o})},_onLoadHandler:function(){this.isLoaded=!0;try{this.onLoad.call(this)}catch(t){console.error("Error "+this.widgetId+" running custom onLoad code")}},_onUnloadHandler:function(){this.isLoaded=!1,this.cancel();try{this.onUnload.call(this)}catch(t){console.error("Error "+this.widgetId+" running custom onUnload code")}},_setContent:function(t){this.destroyDescendants();try{for(var o=this.containerNode||this.domNode;o.firstChild;)dojo._destroyElement(o.firstChild);"string"==typeof t?(this.extractContent&&(match=t.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im),match&&(t=match[1])),o.innerHTML=t):t.nodeType?o.appendChild(t):dojo.forEach(t,function(t){o.appendChild(t.cloneNode(!0))})}catch(e){var i=this.onContentError(e);try{o.innerHTML=i}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e)}}},_onError:function(t,o,e){var i=this["on"+t+"Error"].call(this,o);e?console.error(e,o):i&&this._setContent.call(this,i)},_createSubWidgets:function(){var t=this.containerNode||this.domNode;try{dojo.parser.parse(t,!0)}catch(o){this._onError("Content",o,"Couldn't create widgets in "+this.id+(this.href?" from "+this.href:""))}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}}));