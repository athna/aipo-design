dojo._xdResourceLoaded({depends:[["provide","dojox.charting.plot2d.Pie"],["require","dojox.charting.Element"],["require","dojox.charting.axis2d.common"],["require","dojox.charting.plot2d.common"],["require","dojox.lang.functional"],["require","dojox.gfx"]],defineResource:function(t){t._hasResource["dojox.charting.plot2d.Pie"]||(t._hasResource["dojox.charting.plot2d.Pie"]=!0,t.provide("dojox.charting.plot2d.Pie"),t.require("dojox.charting.Element"),t.require("dojox.charting.axis2d.common"),t.require("dojox.charting.plot2d.common"),t.require("dojox.lang.functional"),t.require("dojox.gfx"),function(){var o=dojox.lang.functional,i=dojox.lang.utils,e=dojox.charting.plot2d.common,r=dojox.charting.axis2d.common,n=dojox.gfx,s=.8;t.declare("dojox.charting.plot2d.Pie",dojox.charting.Element,{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0},optionalParams:{font:"",fontColor:"",radius:0},constructor:function(o,e){this.opt=t.clone(this.defaultParams),i.updateWithObject(this.opt,e),i.updateWithPattern(this.opt,e,this.optionalParams),this.run=null,this.dyn=[]},clear:function(){return this.dirty=!0,this.dyn=[],this},setAxis:function(){return this},addSeries:function(t){return this.run=t,this},calculateAxes:function(){return this},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(i,a){if(!this.dirty)return this;this.dirty=!1,this.cleanGroup();var h,l,c,d,u=this.group,f=this.chart.theme,p=(i.width-a.l-a.r)/2,x=(i.height-a.t-a.b)/2,m=Math.min(p,x),g="font"in this.opt?this.opt.font:f.axis.font,j="fontColor"in this.opt?this.opt.fontColor:f.axis.fontColor,b=o.foldl1(this.run.data,"+"),y=0,P=t.map(this.run.data,function(t){return t/b});if(this.opt.labels){var M=t.map(P,function(t){return this._getLabel(100*t)+"%"},this);l=o.foldl1(t.map(M,o.pluck("length")),"x, y -> Math.max(x, y)"),c=g?n.normalizedLength(n.splitFontString(g).size):0,l=Math.max(l*s,1)/2*c,this.opt.labelOffset<0&&(m=Math.min(p-2*l,x-c)+this.opt.labelOffset),d=m-this.opt.labelOffset}"radius"in this.opt&&(m=this.opt.radius,d=m-this.opt.labelOffset);var v={cx:a.l+p,cy:a.t+x,r:m};if(this.dyn=[],!this.run||!this.run.data.length)return this;if(1==this.run.data.length){h=new t.Color(f.next("color"));var k=u.createCircle(v).setFill(e.augmentFill(f.run.fill,h)).setStroke(e.augmentStroke(f.series.stroke,h));if(this.dyn.push({color:h,fill:k.getFill(),stroke:k.getStroke()}),this.opt.labels){var l=4,g="font"in this.opt?this.opt.font:f.axis.font,j="fontColor"in this.opt?this.opt.fontColor:f.axis.fontColor,c=g?n.normalizedLength(n.splitFontString(g).size):0;l=Math.max(l*s,1)/2*c;var q=r.createText[this.opt.htmlLabels?"html":"gfx"](this.chart,u,v.cx,v.cy+c/2,"middle","100%",g,j);this.opt.htmlLabels&&this.htmlElements.push(q)}return this}return t.forEach(P,function(o,i){var r=y+2*o*Math.PI;i+1==P.length&&(r=2*Math.PI);var n=r-y,s=v.cx+m*Math.cos(y),a=v.cy+m*Math.sin(y),l=v.cx+m*Math.cos(r),c=v.cy+m*Math.sin(r);h=new t.Color(f.next("color"));var d=u.createPath({}).moveTo(v.cx,v.cy).lineTo(s,a).arcTo(m,m,0,n>Math.PI,!0,l,c).lineTo(v.cx,v.cy).closePath().setFill(e.augmentFill(f.series.fill,h)).setStroke(e.augmentStroke(f.series.stroke,h));this.dyn.push({color:h,fill:d.getFill(),stroke:d.getStroke()}),y=r},this),this.opt.labels&&(y=0,t.forEach(P,function(t,o){var i=y+2*t*Math.PI;o+1==P.length&&(i=2*Math.PI);var e=(y+i)/2,t=v.cx+d*Math.cos(e),n=v.cy+d*Math.sin(e)+c/2,s=r.createText[this.opt.htmlLabels?"html":"gfx"](this.chart,u,t,n,"middle",M[o],g,j);this.opt.htmlLabels&&this.htmlElements.push(s),y=i},this)),this},_getLabel:function(t){return this.opt.fixed?t.toFixed(this.opt.precision):t.toString()}})}())}});