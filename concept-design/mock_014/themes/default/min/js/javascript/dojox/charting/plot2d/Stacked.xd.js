dojo._xdResourceLoaded({depends:[["provide","dojox.charting.plot2d.Stacked"],["require","dojox.charting.plot2d.common"],["require","dojox.charting.plot2d.Default"],["require","dojox.lang.functional"]],defineResource:function(e){e._hasResource["dojox.charting.plot2d.Stacked"]||(e._hasResource["dojox.charting.plot2d.Stacked"]=!0,e.provide("dojox.charting.plot2d.Stacked"),e.require("dojox.charting.plot2d.common"),e.require("dojox.charting.plot2d.Default"),e.require("dojox.lang.functional"),function(){var t=dojox.lang.functional,r=dojox.charting.plot2d.common,o=t.lambda("item.purgeGroup()");e.declare("dojox.charting.plot2d.Stacked",dojox.charting.plot2d.Default,{calculateAxes:function(e){var t=r.collectStackedStats(this.series);return this._maxRunLength=t.hmax,this._calc(e,t),this},render:function(i,a){for(var s=t.repeat(this._maxRunLength,"-> 0",0),l=0;l<this.series.length;++l)for(var h=this.series[l],n=0;n<h.data.length;++n){var c=h.data[n];isNaN(c)&&(c=0),s[n]+=c}if(this.dirty){e.forEach(this.series,o),this.cleanGroup();var d=this.group;t.forEachReversed(this.series,function(e){e.cleanGroup(d)})}for(var u,p,f,x,g=this.chart.theme,l=this.series.length-1;l>=0;--l){var h=this.series[l];if(this.dirty||h.dirty){h.cleanGroup();var d=h.group,k=e.map(s,function(e,t){return{x:this._hScaler.scale*(t+1-this._hScaler.bounds.lower)+a.l,y:i.height-a.b-this._vScaler.scale*(e-this._vScaler.bounds.lower)}},this);if(h.fill&&h.stroke||(f=new e.Color(g.next("color"))),this.opt.areas){var m=e.clone(k);m.push({x:k[k.length-1].x,y:i.height-a.b}),m.push({x:k[0].x,y:i.height-a.b}),m.push(k[0]);var v=h.fill?h.fill:r.augmentFill(g.series.fill,f);d.createPolyline(m).setFill(v)}if((this.opt.lines||this.opt.markers)&&(u=h.stroke?r.makeStroke(h.stroke):r.augmentStroke(g.series.stroke,f),(h.outline||g.series.outline)&&(p=r.makeStroke(h.outline?h.outline:g.series.outline),p.width=2*p.width+u.width)),this.opt.markers&&(x=h.marker?h.marker:g.next("marker")),this.opt.shadows&&u){var S=this.opt.shadows,y=new e.Color([0,0,0,.3]),j=e.map(k,function(e){return{x:e.x+S.dx,y:e.y+S.dy}}),w=e.clone(p?p:u);w.color=y,w.width+=S.dw?S.dw:0,this.opt.lines&&d.createPolyline(j).setStroke(w),this.opt.markers&&e.forEach(j,function(e){d.createPath("M"+e.x+" "+e.y+" "+x).setStroke(w).setFill(y)},this)}this.opt.lines&&(p&&d.createPolyline(k).setStroke(p),d.createPolyline(k).setStroke(u)),this.opt.markers&&e.forEach(k,function(e){var t="M"+e.x+" "+e.y+" "+x;p&&d.createPath(t).setStroke(p),d.createPath(t).setStroke(u).setFill(u.color)},this),h.dirty=!1;for(var n=0;n<h.data.length;++n){var c=h.data[n];isNaN(c)&&(c=0),s[n]-=c}}}return this.dirty=!1,this}})}())}});