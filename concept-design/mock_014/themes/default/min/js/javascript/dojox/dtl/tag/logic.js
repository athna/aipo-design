dojo._hasResource["dojox.dtl.tag.logic"]||(dojo._hasResource["dojox.dtl.tag.logic"]=!0,dojo.provide("dojox.dtl.tag.logic"),dojo.require("dojox.dtl._base"),dojox.dtl.tag.logic.IfNode=function(o,t,e,r){this.bools=o,this.trues=t,this.falses=e,this.type=r},dojo.extend(dojox.dtl.tag.logic.IfNode,{render:function(o,t){if("or"==this.type)for(var e,r=0;e=this.bools[r];r++){var s=e[0],n=e[1],i=n.resolve(o);if(i&&!s||s&&!i)return this.falses&&(t=this.falses.unrender(o,t)),this.trues.render(o,t,this);if(t=this.trues.unrender(o,t),this.falses)return this.falses.render(o,t,this)}else for(var e,r=0;e=this.bools[r];r++){var s=e[0],n=e[1],i=n.resolve(o);if(!(i&&!s||s&&!i))return this.trues&&(t=this.trues.unrender(o,t)),this.falses.render(o,t,this);if(t=this.falses.unrender(o,t),this.falses)return this.trues.render(o,t,this)}return t},unrender:function(o,t){return this.trues&&(t=this.trues.unrender(o,t)),this.falses&&(t=this.falses.unrender(o,t)),t},clone:function(o){var t=this.trues,e=this.falses;return t&&(t=t.clone(o)),e&&(e=e.clone(o)),new this.constructor(this.bools,t,e,this.type)},toString:function(){return"dojox.dtl.tag.logic.IfNode"}}),dojox.dtl.tag.logic.ForNode=function(o,t,e,r){this.assign=o,this.loop=t,this.reversed=e,this.nodelist=r,this.pool=[]},dojo.extend(dojox.dtl.tag.logic.ForNode,{render:function(o,t){var e={};o.forloop&&(e=o.forloop);var r=dojox.dtl.resolveVariable(this.loop,o);o.push();for(var s=r.length;s<this.pool.length;s++)this.pool[s].unrender(o,t);this.reversed&&(r=r.reversed());var n=0;for(var s in r){var i=r[s];o.forloop={key:s,counter0:n,counter:n+1,revcounter0:r.length-n-1,revcounter:r.length-n,first:0==n,parentloop:e},o[this.assign]=i,n+1>this.pool.length&&this.pool.push(this.nodelist.clone(t)),t=this.pool[n].render(o,t,this),++n}return o.pop(),t},unrender:function(o,t){for(var e,r=0;e=this.pool[r];r++)t=e.unrender(o,t);return t},clone:function(o){return new this.constructor(this.assign,this.loop,this.reversed,this.nodelist.clone(o))},toString:function(){return"dojox.dtl.tag.logic.ForNode"}}),dojox.dtl.tag.logic.if_=function(o,t){var e,r=t.split(/\s+/g),s=[];if(r.shift(),t=r.join(" "),r=t.split(" and "),1==r.length)e="or",r=t.split(" or ");else{e="and";for(var n=0;n<r.length;n++)if("or"==r[n])throw new Error("'if' tags can't mix 'and' and 'or'")}for(var i,n=0;i=r[n];n++){var l=!1;0==i.indexOf("not ")&&(i=i.substring(4),l=!0),s.push([l,new dojox.dtl.Filter(i)])}var d=o.parse(["else","endif"]),h=!1,a=o.next();if("else"==a.text){var h=o.parse(["endif"]);o.next()}return new dojox.dtl.tag.logic.IfNode(s,d,h,e)},dojox.dtl.tag.logic.for_=function(o,t){var e=t.split(/\s+/g),r=5==e.length,s=o.parse(["endfor"]);return o.next(),new dojox.dtl.tag.logic.ForNode(e[1],e[3],r,s)});