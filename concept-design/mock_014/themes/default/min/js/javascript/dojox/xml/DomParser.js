dojo._hasResource["dojox.xml.DomParser"]||(dojo._hasResource["dojox.xml.DomParser"]=!0,dojo.provide("dojox.xml.DomParser"),dojox.xml.DomParser=new function(){function e(){return new function(){var e={};this.nodeType=d.DOCUMENT,this.nodeName="#document",this.namespaces={},this._nsPaths={},this.childNodes=[],this.documentElement=null,this._add=function(t){"undefined"!=typeof t.id&&(e[t.id]=t)},this._remove=function(t){e[t]&&delete e[t]},this.byId=this.getElementById=function(e){return keys[e]},this.byName=this.getElementsByTagName=t,this.byNameNS=this.getElementsByTagNameNS=n,this.childrenByName=a}}function t(e){function t(e,n,a){dojo.forEach(e.childNodes,function(e){e.nodeType==d.ELEMENT&&("*"==n?a.push(e):e.nodeName==n&&a.push(e),t(e,n,a))})}var n=[];return t(this,e,n),n}function n(e,t){function n(e,t,a,r){dojo.forEach(e.childNodes,function(e){e.nodeType==d.ELEMENT&&("*"==t&&e.ownerDocument._nsPaths[a]==e.namespace?r.push(e):e.localName==t&&e.ownerDocument._nsPaths[a]==e.namespace&&r.push(e),n(e,t,a,r))})}t||(t=y);var a=[];return n(this,e,t,a),a}function a(e){var t=[];return dojo.forEach(this.childNodes,function(n){n.nodeType==d.ELEMENT&&("*"==e?t.push(n):n.nodeName==e&&t.push(n))}),t}function r(e){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].nodeName==e)return this.attributes[t].nodeValue;return null}function s(e,t){for(var n=0;n<this.attributes.length;n++)if(this.ownerDocument._nsPaths[t]==this.attributes[n].namespace&&this.attributes[n].localName==e)return this.attributes[n].nodeValue;return null}function i(e,t){for(var n=null,a=0;a<this.attributes.length;a++)if(this.attributes[a].nodeName==e){n=this.attributes[a].nodeValue,this.attributes[a].nodeValue=t;break}"id"==e&&(null!=n&&this.ownerDocument._remove(n),this.ownerDocument._add(this))}function o(e,t,n){for(var a=0;a<this.attributes.length;a++)if(this.ownerDocument._nsPaths[n]==this.attributes[a].namespace&&this.attributes[a].localName==e)return this.attributes[a].nodeValue=t,void 0}function l(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t>0)return e.childNodes[t-1];return null}function u(){var e=this.parentNode;if(e)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==this&&t+1<e.childNodes.length)return e.childNodes[t+1];return null}var d={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9},h=/<([^>\/\s+]*)([^>]*)>([^<]*)/g,c=/([^=]*)="([^"]*)"/g,p=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g,N=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g,f=/<!--([\u0001-\uFFFF]*?)-->/g,m=/^\s+|\s+$/g,T=/\s+/g,g=/\&gt;/g,E=/\&lt;/g,v=/\&quot;/g,b=/\&apos;/g,x=/\&amp;/g,y="_def_";this.parse=function(A){var _=e();if(null==A)return _;if(0==A.length)return _;if(A.indexOf("<!ENTITY")>0){var D,I=[];if(p.test(A)){for(p.lastIndex=0;null!=(D=p.exec(A));)I.push({entity:"&"+D[1].replace(m,"")+";",expression:D[2]});for(var O=0;O<I.length;O++)A=A.replace(new RegExp(I[O].entity,"g"),I[O].expression)}}for(var S,C=[];null!=(S=N.exec(A));)C.push(S[1]);for(var O=0;O<C.length;O++)A=A.replace(C[O],O);for(var P,M=[];null!=(P=f.exec(A));)M.push(P[1]);for(O=0;O<M.length;O++)A=A.replace(M[O],O);for(var j,w=_;null!=(j=h.exec(A));)if("/"!=j[2].charAt(0)){if(j[1].length>0)if("?"==j[1].charAt(0)){var V=j[1].substr(1),B=j[2].substr(0,j[2].length-2);w.childNodes.push({nodeType:d.PROCESSING_INSTRUCTION,nodeName:V,nodeValue:B})}else if("!"==j[1].charAt(0)){if(0==j[1].indexOf("![CDATA[")){var R=parseInt(j[1].replace("![CDATA[","").replace("]]",""));w.childNodes.push({nodeType:d.CDATA_SECTION,nodeName:"#cdata-section",nodeValue:C[R]})}else if("!--"==j[1].substr(0,3)){var R=parseInt(j[1].replace("!--","").replace("--",""));w.childNodes.push({nodeType:d.COMMENT,nodeName:"#comment",nodeValue:M[R]})}}else{var V=j[1].replace(m,""),F={nodeType:d.ELEMENT,nodeName:V,localName:V,namespace:y,ownerDocument:_,attributes:[],parentNode:null,childNodes:[]};if(V.indexOf(":")>-1){var L=V.split(":");F.namespace=L[0],F.localName=L[1]}F.byName=F.getElementsByTagName=t,F.byNameNS=F.getElementsByTagNameNS=n,F.childrenByName=a,F.getAttribute=r,F.getAttributeNS=s,F.setAttribute=i,F.setAttributeNS=o,F.previous=F.previousSibling=l,F.next=F.nextSibling=u;for(var U;null!=(U=c.exec(j[2]));)if(U.length>0){var V=U[1].replace(m,""),R=U[2].replace(T," ").replace(g,">").replace(E,"<").replace(b,"'").replace(v,'"').replace(x,"&");if(0==V.indexOf("xmlns"))if(V.indexOf(":")>0){var k=V.split(":");_.namespaces[k[1]]=R,_._nsPaths[R]=k[1]}else _.namespaces[y]=R,_._nsPaths[R]=y;else{var G=V,k=y;if(V.indexOf(":")>0){var L=V.split(":");G=L[1],k=L[0]}F.attributes.push({nodeType:d.ATTRIBUTE,nodeName:V,localName:G,namespace:k,nodeValue:R}),"id"==G&&(F.id=R)}}_._add(F);var X=j[3].replace(m,"");X.length>0&&F.childNodes.push({nodeType:d.TEXT,nodeName:"#text",nodeValue:X.replace(T," ").replace(g,">").replace(E,"<").replace(b,"'").replace(v,'"').replace(x,"&")}),w&&(w.childNodes.push(F),F.parentNode=w,"/"!=j[2].charAt(j[2].length-1)&&(w=F))}}else w.parentNode&&(w=w.parentNode);for(var O=0;O<_.childNodes.length;O++){var Y=_.childNodes[O];if(Y.nodeType==d.ELEMENT){_.documentElement=Y;break}}return _}});