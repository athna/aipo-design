dojo._xdResourceLoaded({depends:[["provide","dojo._base.xhr"],["require","dojo._base.Deferred"],["require","dojo._base.json"],["require","dojo._base.lang"],["require","dojo._base.query"]],defineResource:function(e){e._hasResource["dojo._base.xhr"]||(e._hasResource["dojo._base.xhr"]=!0,e.provide("dojo._base.xhr"),e.require("dojo._base.Deferred"),e.require("dojo._base.json"),e.require("dojo._base.lang"),e.require("dojo._base.query"),function(){function r(e,r,t){var o=e[r];n.isString(o)?e[r]=[o,t]:n.isArray(o)?o.push(t):e[r]=t}var n=e;e.formToObject=function(e){var t={},o="input:not([type=file]):not([type=submit]):not([type=image]):not([type=reset]):not([type=button]), select, textarea";return n.query(o,e).filter(function(e){return!e.disabled}).forEach(function(e){var o=e.name,a=(e.type||"").toLowerCase();"radio"==a||"checkbox"==a?e.checked&&r(t,o,e.value):e.multiple?(t[o]=[],n.query("option",e).forEach(function(e){e.selected&&r(t,o,e.value)})):(r(t,o,e.value),"image"==a&&(t[o+".x"]=t[o+".y"]=t[o].x=t[o].y=0))}),t},e.objectToQuery=function(e){var r=encodeURIComponent,t="",o={};for(var a in e)if(e[a]!=o[a])if(n.isArray(e[a]))for(var i=0;i<e[a].length;i++)t+=r(a)+"="+r(e[a][i])+"&";else t+=r(a)+"="+r(e[a])+"&";return t.length&&"&"==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t},e.formToQuery=function(e){return n.objectToQuery(n.formToObject(e))},e.formToJson=function(e,r){return n.toJson(n.formToObject(e),r)},e.queryToObject=function(e){var r={},t=e.split("&"),o=decodeURIComponent;return n.forEach(t,function(e){if(e.length){var t=e.split("="),a=o(t.shift()),i=o(t.join("="));n.isString(r[a])&&(r[a]=[r[a]]),n.isArray(r[a])?r[a].push(i):r[a]=i}}),r},e._blockAsync=!1,e._contentHandlers={text:function(e){return e.responseText},json:function(e){return djConfig.usePlainJson||console.debug("Consider using mimetype:text/json-comment-filtered to avoid potential security issues with JSON endpoints (use djConfig.usePlainJson=true to turn off this message)"),n.fromJson(e.responseText)},"json-comment-filtered":function(e){var r=e.responseText,t=r.indexOf("/*"),o=r.lastIndexOf("*/");if(-1==t||-1==o)throw new Error("JSON was not comment filtered");return n.fromJson(r.substring(t+2,o))},javascript:function(e){return n.eval(e.responseText)},xml:function(e){return!n.isIE||e.responseXML?e.responseXML:(n.forEach(["MSXML2","Microsoft","MSXML","MSXML3"],function(r){try{var n=new ActiveXObject(prefixes[r]+".XMLDOM");return n.async=!1,n.loadXML(e.responseText),n}catch(t){}}),void 0)}},e._contentHandlers["json-comment-optional"]=function(e){var r=n._contentHandlers;try{return r["json-comment-filtered"](e)}catch(t){return r.json(e)}},e._ioSetArgs=function(e,r,t,o){var a={args:e,url:e.url},i=null;if(e.form){var u=n.byId(e.form),s=u.getAttributeNode("action");a.url=a.url||(s?s.value:null),i=n.formToObject(u)}var c=[{}];i&&c.push(i),e.content&&c.push(e.content),e.preventCache&&c.push({"dojo.preventCache":(new Date).valueOf()}),a.query=n.objectToQuery(n.mixin.apply(null,c)),a.handleAs=e.handleAs||"text";var l=new n.Deferred(r);l.addCallbacks(t,function(e){return o(e,l)});var d=e.load;d&&n.isFunction(d)&&l.addCallback(function(r){return d.call(e,r,a)});var f=e.error;f&&n.isFunction(f)&&l.addErrback(function(r){return f.call(e,r,a)});var h=e.handle;return h&&n.isFunction(h)&&l.addBoth(function(r){return h.call(e,r,a)}),l.ioArgs=a,l};var t=function(e){e.canceled=!0;var r=e.ioArgs.xhr,n=typeof r.abort;("function"==n||"unknown"==n)&&r.abort();var t=new Error("xhr cancelled");return t.dojoType="cancel",t},o=function(e){return n._contentHandlers[e.ioArgs.handleAs](e.ioArgs.xhr)},a=function(e){return console.debug(e),e},i=function(e){var r=n._ioSetArgs(e,t,o,a);return r.ioArgs.xhr=n._xhrObj(r.ioArgs.args),r},u=null,s=[],c=function(){var e=(new Date).getTime();if(!n._blockAsync)for(var r,t=0;t<s.length&&(r=s[t]);t++){var o=r.dfd;try{if(o&&!o.canceled&&r.validCheck(o)){if(r.ioCheck(o))s.splice(t--,1),r.resHandle(o);else if(o.startTime&&o.startTime+(o.ioArgs.args.timeout||0)<e){s.splice(t--,1);var a=new Error("timeout exceeded");a.dojoType="timeout",o.errback(a),o.cancel()}}else s.splice(t--,1)}catch(i){console.debug(i),o.errback(new Error("_watchInFlightError!"))}}return s.length?void 0:(clearInterval(u),u=null,void 0)};e._ioCancelAll=function(){try{n.forEach(s,function(e){e.dfd.cancel()})}catch(e){}},n.isIE&&n.addOnUnload(n._ioCancelAll),n._ioWatch=function(e,r,n,t){e.ioArgs.args.timeout&&(e.startTime=(new Date).getTime()),s.push({dfd:e,validCheck:r,ioCheck:n,resHandle:t}),u||(u=setInterval(c,50)),c()};var l="application/x-www-form-urlencoded",d=function(e){return e.ioArgs.xhr.readyState},f=function(e){return 4==e.ioArgs.xhr.readyState},h=function(e){n._isDocumentOk(e.ioArgs.xhr)?e.callback(e):e.errback(new Error("bad http response code:"+e.ioArgs.xhr.status))},p=function(e,r){var t=r.ioArgs,o=t.args;if(t.xhr.open(e,t.url,o.sync!==!0,o.user||void 0,o.password||void 0),o.headers)for(var a in o.headers)"content-type"!==a.toLowerCase()||o.contentType?t.xhr.setRequestHeader(a,o.headers[a]):o.contentType=o.headers[a];t.xhr.setRequestHeader("Content-Type",o.contentType||l);try{t.xhr.send(t.query)}catch(i){r.cancel()}return n._ioWatch(r,d,f,h),r};e._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"&")+e.query,e.query=null)},e.xhrGet=function(e){var r=i(e);return n._ioAddQueryToUrl(r.ioArgs),p("GET",r)},e.xhrPost=function(e){return p("POST",i(e))},e.rawXhrPost=function(e){var r=i(e);return r.ioArgs.query=e.postData,p("POST",r)},e.xhrPut=function(e){return p("PUT",i(e))},e.rawXhrPut=function(e){var r=i(e),n=r.ioArgs;return e.putData&&(n.query=e.putData,e.putData=null),p("PUT",r)},e.xhrDelete=function(e){var r=i(e);return n._ioAddQueryToUrl(r.ioArgs),p("DELETE",r)}}())}});