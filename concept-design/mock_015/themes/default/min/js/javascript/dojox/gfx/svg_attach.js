dojo.require("dojox.gfx.svg"),dojo.experimental("dojox.gfx.svg_attach"),function(){dojox.gfx.attachNode=function(e){if(!e)return null;var x=null;switch(e.tagName.toLowerCase()){case dojox.gfx.Rect.nodeType:x=new dojox.gfx.Rect(e),n(x);break;case dojox.gfx.Ellipse.nodeType:x=new dojox.gfx.Ellipse(e),i(x,dojox.gfx.defaultEllipse);break;case dojox.gfx.Polyline.nodeType:x=new dojox.gfx.Polyline(e),i(x,dojox.gfx.defaultPolyline);break;case dojox.gfx.Path.nodeType:x=new dojox.gfx.Path(e),i(x,dojox.gfx.defaultPath);break;case dojox.gfx.Circle.nodeType:x=new dojox.gfx.Circle(e),i(x,dojox.gfx.defaultCircle);break;case dojox.gfx.Line.nodeType:x=new dojox.gfx.Line(e),i(x,dojox.gfx.defaultLine);break;case dojox.gfx.Image.nodeType:x=new dojox.gfx.Image(e),i(x,dojox.gfx.defaultImage);break;case dojox.gfx.Text.nodeType:var f=e.getElementsByTagName("textPath");f&&f.length?(x=new dojox.gfx.TextPath(e),i(x,dojox.gfx.defaultPath),l(x)):(x=new dojox.gfx.Text(e),d(x)),a(x);break;default:return null}return x instanceof dojox.gfx.Image||(t(x),o(x)),r(x),x},dojox.gfx.attachSurface=function(t){var e=new dojox.gfx.Surface;e.rawNode=t;var o=t.getElementsByTagName("defs");return 0==o.length?null:(e.defNode=o[0],e)};var t=function(t){var o=t.rawNode.getAttribute("fill");if("none"==o)return t.fillStyle=null,void 0;var r=null,a=dojox.gfx.svg.getRef(o);if(ref)switch(a.tagName.toLowerCase()){case"lineargradient":r=e(dojox.gfx.defaultLinearGradient,a),dojo.forEach(["x1","y1","x2","y2"],function(t){r[t]=a.getAttribute(t)});break;case"radialgradient":r=e(dojox.gfx.defaultRadialGradient,a),dojo.forEach(["cx","cy","r"],function(t){r[t]=a.getAttribute(t)}),r.cx=a.getAttribute("cx"),r.cy=a.getAttribute("cy"),r.r=a.getAttribute("r");break;case"pattern":r=dojo.lang.shallowCopy(dojox.gfx.defaultPattern,!0),dojo.forEach(["x","y","width","height"],function(t){r[t]=a.getAttribute(t)}),r.src=a.firstChild.getAttributeNS(dojox.gfx.svg.xmlns.xlink,"href")}else{r=new dojo.Color(o);var i=rawNode.getAttribute("fill-opacity");null!=i&&(r.a=i)}t.fillStyle=r},e=function(t,e){var o=dojo.clone(t);o.colors=[];for(var r=0;r<e.childNodes.length;++r)o.colors.push({offset:e.childNodes[r].getAttribute("offset"),color:new dojo.Color(e.childNodes[r].getAttribute("stop-color"))});return o},o=function(t){var e=t.rawNode,o=e.getAttribute("stroke");if(null==o||"none"==o)return t.strokeStyle=null,void 0;var r=t.strokeStyle=dojo.clone(dojox.gfx.defaultStroke),a=new dojo.Color(o);a&&(r.color=a,r.color.a=e.getAttribute("stroke-opacity"),r.width=e.getAttribute("stroke-width"),r.cap=e.getAttribute("stroke-linecap"),r.join=e.getAttribute("stroke-linejoin"),"miter"==r.join&&(r.join=e.getAttribute("stroke-miterlimit")),r.style=e.getAttribute("dojoGfxStrokeStyle"))},r=function(t){var e=t.rawNode.getAttribute("transform");if(e.match(/^matrix\(.+\)$/)){var o=e.slice(7,-1).split(",");t.matrix=dojox.gfx.matrix.normalize({xx:parseFloat(o[0]),xy:parseFloat(o[2]),yx:parseFloat(o[1]),yy:parseFloat(o[3]),dx:parseFloat(o[4]),dy:parseFloat(o[5])})}else t.matrix=null},a=function(t){var e=t.fontStyle=dojo.clone(dojox.gfx.defaultFont),o=t.rawNode;e.style=o.getAttribute("font-style"),e.variant=o.getAttribute("font-variant"),e.weight=o.getAttribute("font-weight"),e.size=o.getAttribute("font-size"),e.family=o.getAttribute("font-family")},i=function(t,e){var o=t.shape=dojo.clone(e),r=t.rawNode;for(var a in o)o[a]=r.getAttribute(a)},n=function(t){i(t,dojox.gfx.defaultRect),t.shape.r=Math.min(t.rawNode.getAttribute("rx"),t.rawNode.getAttribute("ry"))},d=function(t){var e=t.shape=dojo.clone(dojox.gfx.defaultText),o=t.rawNode;e.x=o.getAttribute("x"),e.y=o.getAttribute("y"),e.align=o.getAttribute("text-anchor"),e.decoration=o.getAttribute("text-decoration"),e.rotated=0!=parseFloat(o.getAttribute("rotate")),e.kerning="auto"==o.getAttribute("kerning"),e.text=o.firstChild.nodeValue},l=function(t){var e=t.shape=dojo.clone(dojox.gfx.defaultTextPath),o=t.rawNode;e.align=o.getAttribute("text-anchor"),e.decoration=o.getAttribute("text-decoration"),e.rotated=0!=parseFloat(o.getAttribute("rotate")),e.kerning="auto"==o.getAttribute("kerning"),e.text=o.firstChild.nodeValue}}();