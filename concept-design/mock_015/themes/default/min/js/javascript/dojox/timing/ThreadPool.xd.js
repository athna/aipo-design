dojo._xdResourceLoaded({depends:[["provide","dojox.timing.ThreadPool"],["require","dojox.timing"]],defineResource:function(t){t._hasResource["dojox.timing.ThreadPool"]||(t._hasResource["dojox.timing.ThreadPool"]=!0,t.provide("dojox.timing.ThreadPool"),t.require("dojox.timing"),t.experimental("dojox.timing.ThreadPool"),function(){var t=dojox.timing;t.threadStates={UNSTARTED:"unstarted",STOPPED:"stopped",PENDING:"pending",RUNNING:"running",SUSPENDED:"suspended",WAITING:"waiting",COMPLETE:"complete",ERROR:"error"},t.threadPriorities={LOWEST:1,BELOWNORMAL:2,NORMAL:3,ABOVENORMAL:4,HIGHEST:5},t.Thread=function(e,i){var r=this;this.state=t.threadStates.UNSTARTED,this.priority=i||t.threadPriorities.NORMAL,this.lastError=null,this.func=e,this.invoke=function(){r.state=t.threadStates.RUNNING;try{e(this),r.state=t.threadStates.COMPLETE}catch(i){r.lastError=i,r.state=t.threadStates.ERROR}}},t.ThreadPool=new function(e,i){var r=this,o=e,n=o,s=i,a=(Math.floor(s/2/o),[]),h=new Array(o+1),u=new dojox.timing.Timer;this.getMaxThreads=function(){return o},this.getAvailableThreads=function(){return n},this.getTickInterval=function(){return s},this.queueUserWorkItem=function(e){var i=e;i instanceof Function&&(i=new t.Thread(i));for(var r=a.length,o=0;o<a.length;o++)if(a[o].priority<i.priority){r=o;break}return r<a.length?a.splice(r,0,i):a.push(i),!0},this.removeQueuedUserWorkItem=function(t){if(t instanceof Function){for(var e=-1,i=0;i<a.length;i++)if(a[i].func==t){e=i;break}return e>-1?(a.splice(e,1),!0):!1}for(var e=-1,i=0;i<a.length;i++)if(a[i]==t){e=i;break}return e>-1?(a.splice(e,1),!0):!1},this.start=function(){u.start()},this.stop=function(){u.stop()},this.abort=function(){this.stop();for(var t=1;t<h.length;t++)h[t]&&window.clearTimeout(h[t]);for(var e in h[0])this.queueUserWorkItem(e);h[0]={}},this.reset=function(){this.abort(),a=[]},this.sleep=function(t){u.stop(),window.setTimeout(u.start,t)},u.onTick=r.invoke}(16,5e3)}())}});