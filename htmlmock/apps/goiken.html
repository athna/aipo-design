<html>
<head>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<style type="text/css">
	.mmlib_table {
		width: 100%;
		margin: 5px 0;
		-webkit-border-radius: 4px;
		-moz-border-radius: 4px;
		-ms-border-radius: 4px;
		border-radius: 4px;
		background: #f0f0f0;
	}

	.mmlib_table td {
		padding: 3px 5px;
	}

	.mmlib_xlink {
		display: block;
		cursor: pointer;
	}
</style>
<meta content="ja" http-equiv="Content-Language">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="text/css" http-equiv="Content-Style-Type">
<meta content="text/javascript" http-equiv="Content-Script-Type">
<style type="text/css">@charset "UTF-8";
html, body {
	margin: 0;
	padding: 0;
	font-size: 100%;
}

h1, h2, h3, h4, h5, h6, p, pre, address, cite {
	margin: .5em auto;
	line-height: 1.4;
	font-size: 100%;
}

blockquote h1, blockquote h2, blockquote h3, blockquote h4, blockquote h5, blockquote h6, blockquote p {
	margin-left: .5em;
}

address {
	font-style: normal;
}

ul, ol {
	margin: 1em 2em;
	padding: 1px 0;
}

li ul, li ol {
	margin: 0 10px;
}

dd {
	margin-left: 0;
}

form {
	margin: 0;
	padding: 0;
}

fieldset {
	padding: 0 .5em .5em .5em;
	border: solid 1px #ccc;
}

legend {
	padding: 0 7px;
}

input, textarea {
	font-size: 100%;
	margin: 0;
}

label {
	cursor: pointer;
}

a img {
	border: none;
}

hr {
	border: 1px solid #DCDCDC;
}

hr.bold {
	border: 1px solid #999;
}

* {
	color: #1B1B1B;
	font-family: 'メイリオ', Meiryo, Verdana, 'ヒラギノ角ゴPro W3', 'Hiragino Kaku Gothic Pro', 'ＭＳ Ｐゴシック', sans-serif;
}

body {
	width: 100%;
	font-family: 'メイリオ', Meiryo, Verdana, 'ヒラギノ角ゴPro W3', 'Hiragino Kaku Gothic Pro', 'ＭＳ Ｐゴシック', sans-serif;
	padding: 0;
	margin: 0;
	font-size: .75em;
	color: #1B1B1B;
	background: #FFF;
	line-height: 1.4;
	-webkit-text-size-adjust: 100%;
	-moz-text-size-adjust: 100%;
	-ms-text-size-adjust: 100%;
	text-size-adjust: 100%;
}

* html body {
	font-size: .8em;
}

* + html body {
	font-size: .75em;
}

th label {
	display: block;
	width: 100%;
}

a {
	color: #1B1B1B;
	text-decoration: underline;
}

th a {
	color: #1B1B1B;
}

a:hover, a:hover strong, a:hover span {
	color: #F90;
	text-decoration: none;
}

div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, textarea, p, blockquote, th, td {
	margin: 0;
	padding: 0;
	line-height: 1.4;
}

ul li {
	list-style: none;
	line-height: 150%;
	text-align: left;
	display: block;
	background: url(../images/common/li_icon.gif) 0 .5em no-repeat;
	padding: 0 0 0 1em;
}

strong {
	font-weight: bold;
}

input {
	line-height: 1.5;
}

input[type="button"] {
	cursor: pointer;
}

input[type="text"], input[type="password"], .aipostyle input.text {
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	background-color: #FFF;
	border: 1px solid #C9C9C9;
	padding: 2px;
}

textarea {
	padding: 2px;
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	background-color: #FFF;
	border: 1px solid #C9C9C9;
}

select {
	font-size: 1em;
	line-height: normal;
	margin: 1px;
	z-index: 0 !important;
}

img {
	border: none;
}

a img {
	border: none;
	text-decoration: none;
}

.aipostyle h3 {
	line-height: 150%;
	padding: 2px 0;
	margin: 0 0 10px;
	border-bottom: 1px solid #f0f0f0;
}

.aipostyle h4 {
	background: transparent url(../images/common/bg_line.gif) repeat-x left bottom;
	line-height: 150%;
	padding: 0 0 3px;
	margin: 0 0 10px;
}

.aipostyle blockquote {
	border: 5px solid #ddd;
	background: whitesmoke url(../images/common/bg_slash.gif) repeat scroll left bottom;
	padding: 3px;
}

.aipostyle .required {
	display: block;
	background: transparent url(../images/common/icon_required.gif) no-repeat right top;
}

.aipostyle input[type=submit], .aipostyle input[type=button], .aipostyle input[type=reset], .aipostyle a.button {
	display: inline-block;
	*display: inline;
	margin-bottom: 0;
	*margin-left: .3em;
	color: #333 !important;
	text-align: center;
	text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
	vertical-align: middle;
	cursor: pointer;
	background-color: #f5f5f5;
	background-image: -moz-linear-gradient(top, white, #e6e6e6);
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(white), to(#e6e6e6));
	background-image: -webkit-linear-gradient(top, white, #e6e6e6);
	background-image: -o-linear-gradient(top, white, #e6e6e6);
	background-image: linear-gradient(to bottom, #fff, #e6e6e6);
	background-repeat: repeat-x;
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
	border: solid 1px #d2d2d2;
	border-color: #d2d2d2 #d2d2d2 silver;
	border-bottom-color: #b3b3b3;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	-ms-border-radius: 4px;
	border-radius: 4px;
	*zoom: 1;
	white-space: nowrap;
	text-decoration: none;
	-webkit-box-sizing: content-box;
	-moz-box-sizing: content-box;
	box-sizing: content-box;
	height: 30px;
	line-height: 30px;
	padding: 0 8px;
}

.aipostyle input[type=submit]:hover, .aipostyle input[type=submit]:focus, .aipostyle input[type=button]:hover, .aipostyle input[type=button]:focus, .aipostyle input[type=reset]:hover, .aipostyle input[type=reset]:focus, .aipostyle button:hover, .aipostyle button:focus, .aipostyle a.button:hover, .aipostyle a.button:focus {
	color: #333;
	background-color: #e6e6e6;
	background-color: #ccc \9;
	background-position: 0 -15px;
	filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}

.aipostyle input[type=submit]:focus, .aipostyle input[type=button]:focus, .aipostyle input[type=reset]:focus, .aipostyle button:focus, .aipostyle a.button:focus {
	outline: thin dotted #333;
	outline: 5px auto -webkit-focus-ring-color;
	outline-offset: -2px;
}

.aipostyle input[type=submit]:active, .aipostyle input[type=button]:active, .aipostyle input[type=reset]:active, .aipostyle button:active, .aipostyle a.button:active {
	background-image: none;
	filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
	outline: 0;
	-webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);
	-moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);
	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);
}

.aipostyle table {
	word-break: break-word;
}

.aipostyle table.list, .aipostyle table.form {
	border-spacing: 0;
	border-collapse: collapse;
	margin: 10px 0;
	border-top: solid 1px #f0f0f0;
}

.aipostyle table.list th, .aipostyle table.form th {
	padding: 3px 5px;
	white-space: nowrap;
	background: #f0f0f0;
	text-align: left;
}

.aipostyle table.list td, .aipostyle table.form td {
	padding: 3px 5px;
	border-bottom: solid 1px #f0f0f0;
}

.aipostyle .pagination {
	display: inline-block;
	*display: inline;
	*zoom: 1;
	margin: 5px 0;
	padding: 0;
	vertical-align: middle;
}

.aipostyle .pagination li {
	text-align: center;
	background: none;
	background-color: #FFF;
	float: left;
	background: none;
	padding: 0;
}

.aipostyle .pagination li a:link, .aipostyle .pagination li a:visited {
	display: block;
	min-width: 25px;
	line-height: 28px;
	padding: 0 2px;
	margin: 0;
	color: #333;
	text-decoration: none;
	font-size: .9em;
	border-top: solid 1px #d2d2d2;
	border-bottom: solid 1px #d2d2d2;
	border-right: 1px solid #d2d2d2;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.aipostyle .pagination li a:hover {
	background-color: #fff5d8;
	color: #f90;
}

.aipostyle .pagination li:first-child a {
	border-left: 1px solid #d2d2d2;
	border-radius: 4px 0 0 4px;
}

.aipostyle .pagination li:last-child a {
	border-radius: 0 4px 4px 0;
}

.aipostyle .pagination li.selected a:link, .aipostyle .pagination li.selected a:visited, .aipostyle .pagination li.selected a:active, .aipostyle .pagination li.selected a:hover {
	background-color: #d2d2d2;
	color: black;
	cursor: default;
	font-weight: bold;
}

.aipostyle .pagination li.prev a {
	margin: 0 4px 0 0;
	border-right: 1px solid #d2d2d2;
}

.aipostyle .pagination li.prev + li a {
	border-left: 1px solid #d2d2d2;
}

.aipostyle .pagination li.next a {
	margin: 0 0 0 4px;
	border-left: 1px solid #d2d2d2 !important;
}

.aipostyle .pagination li.next + li a {
	border-right: 1px solid #d2d2d2;
}

.aipostyle .pagination li.disabled a:link, .aipostyle .pagination li.disabled a:visited, .aipostyle .pagination li.disabled a:active, .aipostyle .pagination li.disabled a:hover {
	background-color: #FFF;
	border-color: #d2d2d2;
	color: #d2d2d2;
	cursor: default;
}

.aipostyle .alertGray, .aipostyle .alertRed, .aipostyle .alertYellow, .aipostyle .alertGreen, .aipostyle .alertBlue {
	display: block;
	padding: 3px 5px;
	margin: 5px 0;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	-ms-border-radius: 4px;
	border-radius: 4px;
}

.aipostyle .alertGray {
	background: #f0f0f0;
}

.aipostyle .alertRed {
	background: #e63439;
	color: white;
}

.aipostyle .alertYellow {
	background: #f3b700;
	color: white;
}

.aipostyle .alertGreen {
	background: #46a546;
	color: white;
}

.aipostyle .alertBlue {
	background: #049cdb;
	color: white;
}

.aipostyle select {
	border: solid 1px silver;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	-ms-border-radius: 3px;
	border-radius: 3px;
	min-height: 32px;
	min-height: 20 px\9;
	padding: 5px;
	max-width: 300px;
}

.aipostyle .clearfix:after {
	content: ".";
	display: block;
	height: 0;
	clear: both;
	visibility: hidden;
}

.aipostyle .clearfix {
	display: inline-block;
}

.aipostyle .clearfix {
	display: block;
}

.aipostyle .left {
	text-align: left;
}

.aipostyle .right {
	text-align: right;
}

.aipostyle .center {
	text-align: center;
}

.aipostyle .top {
	vertical-align: top;
}

.aipostyle .small {
	font-size: .9em;
	line-height: 1.2;
}

.aipostyle .thin {
	width: 2%;
}

.aipostyle .wide {
	width: 100%;
}

.aipostyle .w90 {
	width: 90%;
}

.aipostyle .w75 {
	width: 75%;
}

.aipostyle .w50 {
	width: 50%;
}

.aipostyle .w25 {
	width: 25%;
}

.aipostyle .w33 {
	width: 33.333333%;
}

.aipostyle .indicator {
	background: url(../images/common/indicator.gif) no-repeat left;
	padding: 2px 0 2px 18px;
	margin-left: 2px;
}

* html .aipostyle a.button:link, * html .aipostyle a.button:visited, * html .aipostyle a.button:active {
	padding: 2px;
	border: none;
	background-position: 1px 2px;
	background-repeat: no-repeat;
}

* html .aipostyle a.button:hover {
	padding: 1px;
	background-position: 1px 2px;
	background-repeat: no-repeat;
	border: 1px solid #F90;
}

* + html .aipostyle a.button:link, * + html .aipostyle a.button:visited, * + html .aipostyle a.button:active {
	padding: 2px;
	border: none;
	background-position: 1px 2px;
	background-repeat: no-repeat;
}

/* Hides from IE-mac \*/
* html .aipostyle .clearfix {
	height: 1%;
}

/* End hides from IE-mac */
.aipostyle .clear {
	clear: both;
}

*:first-child + html .aipostyle select {
	padding: 0;
}

*:first-child + html .aipostyle select[multiple] {
	height: auto;
}

*:first-child + html .aipostyle input[type=submit], *:first-child + html .aipostyle input[type=button], *:first-child + html .aipostyle input[type=reset] {
	line-height: 25px;
	padding: 0 2px;
}

*:first-child + html .aipostyle a.button {
	border: solid 1px #d2d2d2;
}</style>
<script>window['__isgadget'] = true;</script>
<script>var gadgets = gadgets || {};
var shindig = shindig || {};
var osapi = osapi || {};
;
gadgets.config = function () {
	var A = {};
	var B;
	return{register: function (E, D, C) {
		var F = A[E];
		if (!F) {
			F = [];
			A[E] = F
		}
		F.push({validators: D || {}, callback: C})
	}, get: function (C) {
		if (C) {
			return B[C] || {}
		}
		return B
	}, init: function (E, L) {
		B = E;
		for (var C in A) {
			if (A.hasOwnProperty(C)) {
				var D = A[C], I = E[C];
				for (var H = 0, G = D.length;
					 H < G;
					 ++H) {
					var J = D[H];
					if (I && !L) {
						var F = J.validators;
						for (var K in F) {
							if (F.hasOwnProperty(K)) {
								if (!F[K](I[K])) {
									throw new Error('Invalid config value "' + I[K] + '" for parameter "' + K + '" in component "' + C + '"')
								}
							}
						}
					}
					if (J.callback) {
						J.callback(E)
					}
				}
			}
		}
	}, EnumValidator: function (F) {
		var E = [];
		if (arguments.length > 1) {
			for (var D = 0, C;
				 (C = arguments[D]);
				 ++D) {
				E.push(C)
			}
		} else {
			E = F
		}
		return function (H) {
			for (var G = 0, I;
				 (I = E[G]);
				 ++G) {
				if (H === E[G]) {
					return true
				}
			}
			return false
		}
	}, RegExValidator: function (C) {
		return function (D) {
			return C.test(D)
		}
	}, ExistsValidator: function (C) {
		return typeof C !== "undefined"
	}, NonEmptyStringValidator: function (C) {
		return typeof C === "string" && C.length > 0
	}, BooleanValidator: function (C) {
		return typeof C === "boolean"
	}, LikeValidator: function (C) {
		return function (E) {
			for (var F in C) {
				if (C.hasOwnProperty(F)) {
					var D = C[F];
					if (!D(E[F])) {
						return false
					}
				}
			}
			return true
		}
	}}
}();
;
gadgets.config.isGadget = true;
gadgets.config.isContainer = false;
;
gadgets.util = function () {
	function G(K) {
		var L;
		var I = K.indexOf("?");
		var J = K.indexOf("#");
		if (J === -1) {
			L = K.substr(I + 1)
		} else {
			L = [K.substr(I + 1, J - I - 1), "&", K.substr(J + 1)].join("")
		}
		return L.split("&")
	}

	var E = null;
	var D = {};
	var C = {};
	var F = [];
	var A = {0: false, 10: true, 13: true, 34: true, 39: true, 60: true, 62: true, 92: true, 8232: true, 8233: true};

	function B(I, J) {
		return String.fromCharCode(J)
	}

	function H(I) {
		D = I["core.util"] || {}
	}

	if (gadgets.config) {
		gadgets.config.register("core.util", null, H)
	}
	return{getUrlParameters: function (R) {
		var J = typeof R === "undefined";
		if (E !== null && J) {
			return E
		}
		var N = {};
		var K = G(R || document.location.href);
		var P = window.decodeURIComponent ? decodeURIComponent : unescape;
		for (var M = 0, L = K.length;
			 M < L;
			 ++M) {
			var O = K[M].indexOf("=");
			if (O === -1) {
				continue
			}
			var I = K[M].substring(0, O);
			var Q = K[M].substring(O + 1);
			Q = Q.replace(/\+/g, " ");
			N[I] = P(Q)
		}
		if (J) {
			E = N
		}
		return N
	}, makeClosure: function (L, N, M) {
		var K = [];
		for (var J = 2, I = arguments.length;
			 J < I;
			 ++J) {
			K.push(arguments[J])
		}
		return function () {
			var O = K.slice();
			for (var Q = 0, P = arguments.length;
				 Q < P;
				 ++Q) {
				O.push(arguments[Q])
			}
			return N.apply(L, O)
		}
	}, makeEnum: function (J) {
		var K, I, L = {};
		for (K = 0;
			 (I = J[K]);
			 ++K) {
			L[I] = I
		}
		return L
	}, getFeatureParameters: function (I) {
		return typeof D[I] === "undefined" ? null : D[I]
	}, hasFeature: function (I) {
		return typeof D[I] !== "undefined"
	}, getServices: function () {
		return C
	}, registerOnLoadHandler: function (I) {
		F.push(I)
	}, runOnLoadHandlers: function () {
		for (var J = 0, I = F.length;
			 J < I;
			 ++J) {
			F[J]()
		}
	}, escape: function (I, M) {
		if (!I) {
			return I
		} else {
			if (typeof I === "string") {
				return gadgets.util.escapeString(I)
			} else {
				if (typeof I === "array") {
					for (var L = 0, J = I.length;
						 L < J;
						 ++L) {
						I[L] = gadgets.util.escape(I[L])
					}
				} else {
					if (typeof I === "object" && M) {
						var K = {};
						for (var N in I) {
							if (I.hasOwnProperty(N)) {
								K[gadgets.util.escapeString(N)] = gadgets.util.escape(I[N], true)
							}
						}
						return K
					}
				}
			}
		}
		return I
	}, escapeString: function (M) {
		if (!M) {
			return M
		}
		var J = [], L, N;
		for (var K = 0, I = M.length;
			 K < I;
			 ++K) {
			L = M.charCodeAt(K);
			N = A[L];
			if (N === true) {
				J.push("&#", L, ";")
			} else {
				if (N !== false) {
					J.push(M.charAt(K))
				}
			}
		}
		return J.join("")
	}, unescapeString: function (I) {
		if (!I) {
			return I
		}
		return I.replace(/&#([0-9]+);/g, B)
	}, attachBrowserEvent: function (K, J, L, I) {
		if (typeof K.addEventListener != "undefined") {
			K.addEventListener(J, L, I)
		} else {
			if (typeof K.attachEvent != "undefined") {
				K.attachEvent("on" + J, L)
			} else {
				gadgets.warn("cannot attachBrowserEvent: " + J)
			}
		}
	}, removeBrowserEvent: function (K, J, L, I) {
		if (K.removeEventListener) {
			K.removeEventListener(J, L, I)
		} else {
			if (K.detachEvent) {
				K.detachEvent("on" + J, L)
			} else {
				gadgets.warn("cannot removeBrowserEvent: " + J)
			}
		}
	}}
}();
gadgets.util.getUrlParameters();
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistFuncs([
		[gadgets.util, "escapeString"],
		[gadgets.util, "getFeatureParameters"],
		[gadgets.util, "getUrlParameters"],
		[gadgets.util, "hasFeature"],
		[gadgets.util, "registerOnLoadHandler"],
		[gadgets.util, "unescapeString"]
	])
});
;
if (window.JSON && window.JSON.parse && window.JSON.stringify) {
	gadgets.json = (function () {
		var A = /___$/;
		return{parse: function (C) {
			try {
				return window.JSON.parse(C)
			} catch (B) {
				return false
			}
		}, stringify: function (C) {
			try {
				return window.JSON.stringify(C, function (E, D) {
					return !A.test(E) ? D : null
				})
			} catch (B) {
				return null
			}
		}}
	})()
} else {
	gadgets.json = function () {
		function f(n) {
			return n < 10 ? "0" + n : n
		}

		Date.prototype.toJSON = function () {
			return[this.getUTCFullYear(), "-", f(this.getUTCMonth() + 1), "-", f(this.getUTCDate()), "T", f(this.getUTCHours()), ":", f(this.getUTCMinutes()), ":", f(this.getUTCSeconds()), "Z"].join("")
		};
		var m = {"\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\"};

		function stringify(value) {
			var a, i, k, l, r = /["\\\x00-\x1f\x7f-\x9f]/g, v;
			switch (typeof value) {
				case"string":
					return r.test(value) ? '"' + value.replace(r, function (a) {
						var c = m[a];
						if (c) {
							return c
						}
						c = a.charCodeAt();
						return"\\u00" + Math.floor(c / 16).toString(16) + (c % 16).toString(16)
					}) + '"' : '"' + value + '"';
				case"number":
					return isFinite(value) ? String(value) : "null";
				case"boolean":
				case"null":
					return String(value);
				case"object":
					if (!value) {
						return"null"
					}
					a = [];
					if (typeof value.length === "number" && !value.propertyIsEnumerable("length")) {
						l = value.length;
						for (i = 0;
							 i < l;
							 i += 1) {
							a.push(stringify(value[i]) || "null")
						}
						return"[" + a.join(",") + "]"
					}
					for (k in value) {
						if (k.match("___$")) {
							continue
						}
						if (value.hasOwnProperty(k)) {
							if (typeof k === "string") {
								v = stringify(value[k]);
								if (v) {
									a.push(stringify(k) + ":" + v)
								}
							}
						}
					}
					return"{" + a.join(",") + "}"
			}
			return""
		}

		return{stringify: stringify, parse: function (text) {
			if (/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) {
				return eval("(" + text + ")")
			}
			return false
		}}
	}()
}
gadgets.json.flatten = function (C) {
	var D = {};
	if (C === null || C === undefined) {
		return D
	}
	for (var A in C) {
		if (C.hasOwnProperty(A)) {
			var B = C[A];
			if (null === B || undefined === B) {
				continue
			}
			D[A] = (typeof B === "string") ? B : gadgets.json.stringify(B)
		}
	}
	return D
};
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	___.tamesTo(gadgets.json.stringify, safeJSON.stringify);
	___.tamesTo(gadgets.json.parse, safeJSON.parse)
});
;
shindig.Auth = function () {
	var authToken = null;
	var trusted = null;

	function addParamsToToken(urlParams) {
		var args = authToken.split("&");
		for (var i = 0;
			 i < args.length;
			 i++) {
			var nameAndValue = args[i].split("=");
			if (nameAndValue.length === 2) {
				var name = nameAndValue[0];
				var value = nameAndValue[1];
				if (value === "$") {
					value = encodeURIComponent(urlParams[name]);
					args[i] = name + "=" + value
				}
			}
		}
		authToken = args.join("&")
	}

	function init(configuration) {
		var urlParams = gadgets.util.getUrlParameters();
		var config = configuration["shindig.auth"] || {};
		if (config.authToken) {
			authToken = config.authToken
		} else {
			if (urlParams.st) {
				authToken = urlParams.st
			}
		}
		if (authToken !== null) {
			addParamsToToken(urlParams)
		}
		if (config.trustedJson) {
			trusted = eval("(" + config.trustedJson + ")")
		}
	}

	gadgets.config.register("shindig.auth", null, init);
	return{getSecurityToken: function () {
		return authToken
	}, updateSecurityToken: function (newToken) {
		authToken = newToken
	}, getTrustedData: function () {
		return trusted
	}}
};
;
shindig.auth = new shindig.Auth();
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.wpm) {
	gadgets.rpctx.wpm = function () {
		var D, C;

		function B(G, H, F) {
			if (typeof window.addEventListener != "undefined") {
				window.addEventListener(G, H, F)
			} else {
				if (typeof window.attachEvent != "undefined") {
					window.attachEvent("on" + G, H)
				}
			}
		}

		function A(G, H, F) {
			if (window.removeEventListener) {
				window.removeEventListener(G, H, F)
			} else {
				if (window.detachEvent) {
					window.detachEvent("on" + G, H)
				}
			}
		}

		function E(G) {
			var H = gadgets.json.parse(G.data);
			if (!H || !H.f) {
				return
			}
			var F = gadgets.rpc.getTargetOrigin(H.f);
			if (typeof G.origin !== "undefined" ? G.origin !== F : G.domain !== /^.+:\/\/([^:]+).*/.exec(F)[1]) {
				return
			}
			D(H, G.origin)
		}

		return{getCode: function () {
			return"wpm"
		}, isParentVerifiable: function () {
			return true
		}, init: function (F, G) {
			D = F;
			C = G;
			B("message", E, false);
			C("..", true);
			return true
		}, setup: function (G, F) {
			C(G, true);
			return true
		}, call: function (G, J, I) {
			var F = gadgets.rpc.getTargetOrigin(G);
			var H = gadgets.rpc._getTargetWin(G);
			if (F) {
				window.setTimeout(function () {
					H.postMessage(gadgets.json.stringify(I), F)
				}, 0)
			} else {
				gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message")
			}
			return true
		}}
	}()
}
;
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.flash) {
	gadgets.rpctx.flash = function () {
		var Z = "___xpcswf";
		var Q = null;
		var J = false;
		var K = null;
		var g = null;
		var U = null;
		var h = 100;
		var R = 50;
		var a = [];
		var i = null;
		var A = 0;
		var V = "_scr";
		var F = "_pnt";
		var I = 100;
		var P = 50;
		var M = 0;
		var E = null;
		var Y = {};
		var c = window.location.protocol + "//" + window.location.host;
		var N = "___jsl";
		var D = "_fm";
		var H;

		function T() {
			window[N] = window[N] || {};
			var k = window[N];
			var l = k[D] = {};
			H = N + "." + D;
			return l
		}

		var L = T();

		function j(m, k) {
			var l = function () {
				m.apply({}, arguments)
			};
			L[k] = L[k] || l;
			return H + "." + k
		}

		function O(k) {
			return k === ".." ? gadgets.rpc.RPC_ID : k
		}

		function d(k) {
			return k === ".." ? "INNER" : "OUTER"
		}

		function f(k) {
			if (J) {
				Q = k.rpc["commSwf"] || "/xpc.swf"
			}
		}

		gadgets.config.register("rpc", null, f);
		function W() {
			if (U === null && document.body && Q) {
				var m = Q + "?cb=" + Math.random() + "&origin=" + c + "&jsl=1";
				var l = document.createElement("div");
				l.style.height = "1px";
				l.style.width = "1px";
				var k = '<object height="1" width="1" id="' + Z + '" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"></param><param name="movie" value="' + m + '"></param><embed type="application/x-shockwave-flash" allowScriptAccess="always" src="' + m + '" height="1" width="1"></embed></object>';
				document.body.appendChild(l);
				l.innerHTML = k;
				U = l.firstChild
			}
			++A;
			if (i !== null && (U !== null || A >= R)) {
				window.clearTimeout(i)
			} else {
				i = window.setTimeout(W, h)
			}
		}

		function b() {
			if (Y[".."]) {
				return
			}
			X("..");
			M++;
			if (M >= P && E !== null) {
				window.clearTimeout(E);
				E = null
			} else {
				E = window.setTimeout(b, I)
			}
		}

		function e() {
			if (U !== null) {
				while (a.length > 0) {
					var l = a.shift();
					var k = l.targetId;
					U.setup(l.token, O(k), d(k))
				}
			}
		}

		function G() {
			e();
			if (i !== null) {
				window.clearTimeout(i)
			}
			i = null
		}

		j(G, "ready");
		function B() {
			if (!Y[".."] && E === null) {
				E = window.setTimeout(b, I)
			}
		}

		j(B, "setupDone");
		function C(m, q, o) {
			var l = gadgets.rpc.getTargetOrigin(m);
			var p = gadgets.rpc.getAuthToken(m);
			var k = "sendMessage_" + O(m) + "_" + p + "_" + d(m);
			var n = U[k];
			n.call(U, gadgets.json.stringify(o), l);
			return true
		}

		function S(m, o, n) {
			var k = gadgets.json.parse(m);
			var l = k[V];
			if (l) {
				g(l, true);
				Y[l] = true;
				if (l !== "..") {
					X(l, true)
				}
				return
			}
			window.setTimeout(function () {
				K(k, o)
			}, 0)
		}

		j(S, "receiveMessage");
		function X(n, m) {
			var k = gadgets.rpc.RPC_ID;
			var l = {};
			l[V] = m ? ".." : k;
			l[F] = k;
			C(n, k, l)
		}

		return{getCode: function () {
			return"flash"
		}, isParentVerifiable: function () {
			return true
		}, init: function (l, k) {
			K = l;
			g = k;
			J = true;
			return true
		}, setup: function (l, k) {
			a.push({token: k, targetId: l});
			if (U === null && i === null) {
				i = window.setTimeout(W, h)
			}
			e();
			return true
		}, call: C, _receiveMessage: S, _ready: G, _setupDone: B}
	}()
}
;
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.frameElement) {
	gadgets.rpctx.frameElement = function () {
		var E = "__g2c_rpc";
		var B = "__c2g_rpc";
		var D;
		var C;

		function A(G, K, J) {
			try {
				if (K !== "..") {
					var F = window.frameElement;
					if (typeof F[E] === "function") {
						if (typeof F[E][B] !== "function") {
							F[E][B] = function (L) {
								D(gadgets.json.parse(L))
							}
						}
						F[E](gadgets.json.stringify(J));
						return true
					}
				} else {
					var I = document.getElementById(G);
					if (typeof I[E] === "function" && typeof I[E][B] === "function") {
						I[E][B](gadgets.json.stringify(J));
						return true
					}
				}
			} catch (H) {
			}
			return false
		}

		return{getCode: function () {
			return"fe"
		}, isParentVerifiable: function () {
			return false
		}, init: function (F, G) {
			D = F;
			C = G;
			return true
		}, setup: function (J, F) {
			if (J !== "..") {
				try {
					var I = document.getElementById(J);
					I[E] = function (K) {
						D(gadgets.json.parse(K))
					}
				} catch (H) {
					return false
				}
			}
			if (J === "..") {
				C("..", true);
				var G = function () {
					window.setTimeout(function () {
						gadgets.rpc.call(J, gadgets.rpc.ACK)
					}, 500)
				};
				gadgets.util.registerOnLoadHandler(G)
			}
			return true
		}, call: function (F, H, G) {
			return A(F, H, G)
		}}
	}()
}
;
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.nix) {
	gadgets.rpctx.nix = function () {
		var C = "GRPC____NIXVBS_wrapper";
		var D = "GRPC____NIXVBS_get_wrapper";
		var F = "GRPC____NIXVBS_handle_message";
		var B = "GRPC____NIXVBS_create_channel";
		var A = 10;
		var J = 500;
		var I = {};
		var H;
		var G = 0;

		function E() {
			var L = I[".."];
			if (L) {
				return
			}
			if (++G > A) {
				gadgets.warn("Nix transport setup failed, falling back...");
				H("..", false);
				return
			}
			if (!L && window.opener && "GetAuthToken" in window.opener) {
				L = window.opener;
				if (L.GetAuthToken() == gadgets.rpc.getAuthToken("..")) {
					var K = gadgets.rpc.getAuthToken("..");
					L.CreateChannel(window[D]("..", K), K);
					I[".."] = L;
					window.opener = null;
					H("..", true);
					return
				}
			}
			window.setTimeout(function () {
				E()
			}, J)
		}

		return{getCode: function () {
			return"nix"
		}, isParentVerifiable: function () {
			return false
		}, init: function (L, M) {
			H = M;
			if (typeof window[D] !== "unknown") {
				window[F] = function (O) {
					window.setTimeout(function () {
						L(gadgets.json.parse(O))
					}, 0)
				};
				window[B] = function (O, Q, P) {
					if (gadgets.rpc.getAuthToken(O) === P) {
						I[O] = Q;
						H(O, true)
					}
				};
				var K = "Class " + C + "\n Private m_Intended\nPrivate m_Auth\nPublic Sub SetIntendedName(name)\n If isEmpty(m_Intended) Then\nm_Intended = name\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\n If isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Sub SendMessage(data)\n " + F + "(data)\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub CreateChannel(channel, auth)\n Call " + B + "(m_Intended, channel, auth)\nEnd Sub\nEnd Class\nFunction " + D + "(name, auth)\nDim wrap\nSet wrap = New " + C + "\nwrap.SetIntendedName name\nwrap.SetAuth auth\nSet " + D + " = wrap\nEnd Function";
				try {
					window.execScript(K, "vbscript")
				} catch (N) {
					return false
				}
			}
			return true
		}, setup: function (O, K) {
			if (O === "..") {
				E();
				return true
			}
			try {
				var M = document.getElementById(O);
				var N = window[D](O, K);
				M.contentWindow.opener = N
			} catch (L) {
				return false
			}
			return true
		}, call: function (K, N, M) {
			try {
				if (I[K]) {
					I[K].SendMessage(gadgets.json.stringify(M))
				}
			} catch (L) {
				return false
			}
			return true
		}}
	}()
}
;
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.rmr) {
	gadgets.rpctx.rmr = function () {
		var H = 500;
		var F = 10;
		var I = {};
		var A = gadgets.util.getUrlParameters()["parent"];
		var C;
		var J;

		function L(Q, O, P, N) {
			var R = function () {
				document.body.appendChild(Q);
				Q.src = "about:blank";
				if (N) {
					Q.onload = function () {
						M(N)
					}
				}
				Q.src = O + "#" + P
			};
			if (document.body) {
				R()
			} else {
				gadgets.util.registerOnLoadHandler(function () {
					R()
				})
			}
		}

		function D(Q) {
			if (typeof I[Q] === "object") {
				return
			}
			var R = document.createElement("iframe");
			var O = R.style;
			O.position = "absolute";
			O.top = "0px";
			O.border = "0";
			O.opacity = "0";
			O.width = "10px";
			O.height = "1px";
			R.id = "rmrtransport-" + Q;
			R.name = R.id;
			var P = gadgets.rpc.getRelayUrl(Q);
			var N = gadgets.rpc.getOrigin(A);
			if (!P) {
				P = N + "/robots.txt"
			}
			I[Q] = {frame: R, receiveWindow: null, relayUri: P, relayOrigin: N, searchCounter: 0, width: 10, waiting: true, queue: [], sendId: 0, recvId: 0, verifySendToken: String(Math.random()), verifyRecvToken: null, originVerified: false};
			if (Q !== "..") {
				L(R, P, B(Q))
			}
			E(Q)
		}

		function E(P) {
			var R = null;
			I[P].searchCounter++;
			try {
				var O = gadgets.rpc._getTargetWin(P);
				if (P === "..") {
					R = O.frames["rmrtransport-" + gadgets.rpc.RPC_ID]
				} else {
					R = O.frames["rmrtransport-.."]
				}
			} catch (Q) {
			}
			var N = false;
			if (R) {
				N = G(P, R)
			}
			if (!N) {
				if (I[P].searchCounter > F) {
					return
				}
				window.setTimeout(function () {
					E(P)
				}, H)
			}
		}

		function K(O, Q, U, T) {
			var P = null;
			if (U !== "..") {
				P = I[".."]
			} else {
				P = I[O]
			}
			if (P) {
				if (Q !== gadgets.rpc.ACK) {
					P.queue.push(T)
				}
				if (P.waiting || (P.queue.length === 0 && !(Q === gadgets.rpc.ACK && T && T.ackAlone === true))) {
					return true
				}
				if (P.queue.length > 0) {
					P.waiting = true
				}
				var N = P.relayUri + "#" + B(O);
				try {
					P.frame.contentWindow.location = N;
					var R = P.width == 10 ? 20 : 10;
					P.frame.style.width = R + "px";
					P.width = R
				} catch (S) {
					return false
				}
			}
			return true
		}

		function B(O) {
			var P = I[O];
			var N = {id: P.sendId};
			if (P) {
				N.d = Array.prototype.slice.call(P.queue, 0);
				var Q = {s: gadgets.rpc.ACK, id: P.recvId};
				if (!P.originVerified) {
					Q.sendToken = P.verifySendToken
				}
				if (P.verifyRecvToken) {
					Q.recvToken = P.verifyRecvToken
				}
				N.d.push(Q)
			}
			return gadgets.json.stringify(N)
		}

		function M(Y) {
			var V = I[Y];
			var R = V.receiveWindow.location.hash.substring(1);
			var Z = gadgets.json.parse(decodeURIComponent(R)) || {};
			var O = Z.d || [];
			var P = false;
			var U = false;
			var W = 0;
			var N = (V.recvId - Z.id);
			for (var Q = 0;
				 Q < O.length;
				 ++Q) {
				var T = O[Q];
				if (T.s === gadgets.rpc.ACK) {
					J(Y, true);
					V.verifyRecvToken = T.sendToken;
					if (!V.originVerified && T.recvToken && String(T.recvToken) == String(V.verifySendToken)) {
						V.originVerified = true
					}
					if (V.waiting) {
						U = true
					}
					V.waiting = false;
					var S = Math.max(0, T.id - V.sendId);
					V.queue.splice(0, S);
					V.sendId = Math.max(V.sendId, T.id || 0);
					continue
				}
				P = true;
				if (++W <= N) {
					continue
				}
				++V.recvId;
				C(T, V.originVerified ? V.relayOrigin : undefined)
			}
			if (P || (U && V.queue.length > 0)) {
				var X = (Y === "..") ? gadgets.rpc.RPC_ID : "..";
				K(Y, gadgets.rpc.ACK, X, {ackAlone: P})
			}
		}

		function G(Q, T) {
			var P = I[Q];
			try {
				var O = false;
				O = "document" in T;
				if (!O) {
					return false
				}
				O = typeof T.document == "object";
				if (!O) {
					return false
				}
				var S = T.location.href;
				if (S === "about:blank") {
					return false
				}
			} catch (N) {
				return false
			}
			P.receiveWindow = T;
			function R() {
				M(Q)
			}

			if (typeof T.attachEvent === "undefined") {
				T.onresize = R
			} else {
				T.attachEvent("onresize", R)
			}
			if (Q === "..") {
				L(P.frame, P.relayUri, B(Q), Q)
			} else {
				M(Q)
			}
			return true
		}

		return{getCode: function () {
			return"rmr"
		}, isParentVerifiable: function () {
			return true
		}, init: function (N, O) {
			C = N;
			J = O;
			return true
		}, setup: function (P, N) {
			try {
				D(P)
			} catch (O) {
				gadgets.warn("Caught exception setting up RMR: " + O);
				return false
			}
			return true
		}, call: function (N, P, O) {
			return K(N, O.s, P, O)
		}}
	}()
}
;
;
gadgets.rpctx = gadgets.rpctx || {};
if (!gadgets.rpctx.ifpc) {
	gadgets.rpctx.ifpc = function () {
		var H = [];
		var E = 0;
		var D;
		var A = 2000;
		var G = {};

		function C(K) {
			var I = [];
			for (var L = 0, J = K.length;
				 L < J;
				 ++L) {
				I.push(encodeURIComponent(gadgets.json.stringify(K[L])))
			}
			return I.join("&")
		}

		function B(L) {
			var J;
			for (var I = H.length - 1;
				 I >= 0;
				 --I) {
				var M = H[I];
				try {
					if (M && (M.recyclable || M.readyState === "complete")) {
						M.parentNode.removeChild(M);
						if (window.ActiveXObject) {
							H[I] = M = null;
							H.splice(I, 1)
						} else {
							M.recyclable = false;
							J = M;
							break
						}
					}
				} catch (K) {
				}
			}
			if (!J) {
				J = document.createElement("iframe");
				J.style.border = J.style.width = J.style.height = "0px";
				J.style.visibility = "hidden";
				J.style.position = "absolute";
				J.onload = function () {
					this.recyclable = true
				};
				H.push(J)
			}
			J.src = L;
			window.setTimeout(function () {
				document.body.appendChild(J)
			}, 0)
		}

		function F(I, K) {
			for (var J = K - 1;
				 J >= 0;
				 --J) {
				if (typeof I[J] === "undefined") {
					return false
				}
			}
			return true
		}

		return{getCode: function () {
			return"ifpc"
		}, isParentVerifiable: function () {
			return true
		}, init: function (I, J) {
			D = J;
			D("..", true);
			return true
		}, setup: function (J, I) {
			D(J, true);
			return true
		}, call: function (S, R, Q) {
			var L = gadgets.rpc.getRelayUrl(S);
			++E;
			if (!L) {
				gadgets.warn("No relay file assigned for IFPC");
				return false
			}
			var I = null, J = [];
			if (Q.l) {
				var O = Q.a;
				I = [L, "#", C([R, E, 1, 0, C([R, Q.s, "", "", R].concat(O))])].join("");
				J.push(I)
			} else {
				I = [L, "#", S, "&", R, "@", E, "&"].join("");
				var T = encodeURIComponent(gadgets.json.stringify(Q)), N = A - I.length, P = Math.ceil(T.length / N), M = 0, K;
				while (T.length > 0) {
					K = T.substring(0, N);
					T = T.substring(N);
					J.push([I, P, "&", M, "&", K].join(""));
					M += 1
				}
			}
			do {
				B(J.shift())
			} while (J.length > 0);
			return true
		}, _receiveMessage: function (I, N) {
			var O = I[1], M = parseInt(I[2], 10), K = parseInt(I[3], 10), L = I[I.length - 1], J = M === 1;
			if (M > 1) {
				if (!G[O]) {
					G[O] = []
				}
				G[O][K] = L;
				if (F(G[O], M)) {
					L = G[O].join("");
					delete G[O];
					J = true
				}
			}
			if (J) {
				N(gadgets.json.parse(decodeURIComponent(L)))
			}
		}}
	}()
}
;
;
if (!window.gadgets["rpc"]) {
	gadgets.rpc = function () {
		var l = "__cb";
		var s = "";
		var t = "__ack";
		var F = 500;
		var f = 10;
		var B = "|";
		var T = "callback";
		var G = "origin";
		var R = "referer";
		var Q = {};
		var w = {};
		var c = {};
		var a = {};
		var Y = 0;
		var L = {};
		var M = {};
		var q = {};
		var D = {};
		var N = {};
		var d = {};
		var E = null;
		var P = null;
		var Z = (window.top !== window.self);
		var U = window.name;
		var i = function () {
		};
		var p = 0;
		var y = 1;
		var A = 2;
		var W = window.console;
		var v = W && W.log && function (AD) {
			W.log(AD)
		} || function () {
		};
		var r = (function () {
			function AD(AE) {
				return function () {
					v(AE + ": call ignored")
				}
			}

			return{getCode: function () {
				return"noop"
			}, isParentVerifiable: function () {
				return true
			}, init: AD("init"), setup: AD("setup"), call: AD("call")}
		})();
		if (gadgets.util) {
			D = gadgets.util.getUrlParameters()
		}
		function j() {
			if (D.rpctx == "flash") {
				return gadgets.rpctx.flash
			}
			if (D.rpctx == "rmr") {
				return gadgets.rpctx.rmr
			}
			return typeof window.postMessage === "function" ? gadgets.rpctx.wpm : typeof window.postMessage === "object" ? gadgets.rpctx.wpm : window.ActiveXObject ? (gadgets.rpctx.flash ? gadgets.rpctx.flash : gadgets.rpctx.nix) : navigator.userAgent.indexOf("WebKit") > 0 ? gadgets.rpctx.rmr : navigator.product === "Gecko" ? gadgets.rpctx.frameElement : gadgets.rpctx.ifpc
		}

		function K(AI, AG) {
			if (N[AI]) {
				return
			}
			var AE = g;
			if (!AG) {
				AE = r
			}
			N[AI] = AE;
			var AD = d[AI] || [];
			for (var AF = 0;
				 AF < AD.length;
				 ++AF) {
				var AH = AD[AF];
				AH.t = e(AI);
				AE.call(AI, AH.f, AH)
			}
			d[AI] = []
		}

		var h = false, u = false;

		function n() {
			if (u) {
				return
			}
			function AD() {
				h = true
			}

			if (typeof window.addEventListener != "undefined") {
				window.addEventListener("unload", AD, false)
			} else {
				if (typeof window.attachEvent != "undefined") {
					window.attachEvent("onunload", AD)
				}
			}
			u = true
		}

		function J(AD, AH, AE, AG, AF) {
			if (!a[AH] || a[AH] !== AE) {
				gadgets.error("Invalid auth token. " + a[AH] + " vs " + AE);
				i(AH, A)
			}
			AF.onunload = function () {
				if (M[AH] && !h) {
					i(AH, y);
					gadgets.rpc.removeReceiver(AH)
				}
			};
			n();
			AG = gadgets.json.parse(decodeURIComponent(AG))
		}

		function z(AH, AE) {
			if (AH && typeof AH.s === "string" && typeof AH.f === "string" && AH.a instanceof Array) {
				if (a[AH.f]) {
					if (a[AH.f] !== AH.t) {
						gadgets.error("Invalid auth token. " + a[AH.f] + " vs " + AH.t);
						i(AH.f, A)
					}
				}
				if (AH.s === t) {
					window.setTimeout(function () {
						K(AH.f, true)
					}, 0);
					return
				}
				if (AH.c) {
					AH[T] = function (AI) {
						gadgets.rpc.call(AH.f, l, null, AH.c, AI)
					}
				}
				if (AE) {
					var AF = S(AE);
					AH[G] = AE;
					var AG = AH.r;
					if (!AG || S(AG) != AF) {
						AG = AE
					}
					AH[R] = AG
				}
				var AD = (Q[AH.s] || Q[s]).apply(AH, AH.a);
				if (AH.c && typeof AD !== "undefined") {
					gadgets.rpc.call(AH.f, l, null, AH.c, AD)
				}
			}
		}

		function S(AF) {
			if (!AF) {
				return""
			}
			AF = AF.toLowerCase();
			if (AF.indexOf("//") == 0) {
				AF = window.location.protocol + AF
			}
			if (AF.indexOf("://") == -1) {
				AF = window.location.protocol + "//" + AF
			}
			var AG = AF.substring(AF.indexOf("://") + 3);
			var AD = AG.indexOf("/");
			if (AD != -1) {
				AG = AG.substring(0, AD)
			}
			var AI = AF.substring(0, AF.indexOf("://"));
			var AH = "";
			var AJ = AG.indexOf(":");
			if (AJ != -1) {
				var AE = AG.substring(AJ + 1);
				AG = AG.substring(0, AJ);
				if ((AI === "http" && AE !== "80") || (AI === "https" && AE !== "443")) {
					AH = ":" + AE
				}
			}
			return AI + "://" + AG + AH
		}

		function b(AE, AD) {
			return"/" + AE + (AD ? B + AD : "")
		}

		function X(AG) {
			if (AG.charAt(0) == "/") {
				var AE = AG.indexOf(B);
				var AF = AE > 0 ? AG.substring(1, AE) : AG.substring(1);
				var AD = AE > 0 ? AG.substring(AE + 1) : null;
				return{id: AF, origin: AD}
			} else {
				return null
			}
		}

		function AC(AF) {
			if (typeof AF === "undefined" || AF === "..") {
				return window.parent
			}
			var AE = X(AF);
			if (AE) {
				return window.top.frames[AE.id]
			}
			AF = String(AF);
			var AD = window.frames[AF];
			if (AD) {
				return AD
			}
			AD = document.getElementById(AF);
			if (AD && AD.contentWindow) {
				return AD.contentWindow
			}
			return null
		}

		function k(AG) {
			var AF = null;
			var AD = o(AG);
			if (AD) {
				AF = AD
			} else {
				var AE = X(AG);
				if (AE) {
					AF = AE.origin
				} else {
					if (AG == "..") {
						AF = D.parent
					} else {
						AF = document.getElementById(AG).src
					}
				}
			}
			return S(AF)
		}

		var g = j();
		Q[s] = function () {
			v("Unknown RPC service: " + this.s)
		};
		Q[l] = function (AE, AD) {
			var AF = L[AE];
			if (AF) {
				delete L[AE];
				AF.call(this, AD)
			}
		};
		function x(AF, AD) {
			if (M[AF] === true) {
				return
			}
			if (typeof M[AF] === "undefined") {
				M[AF] = 0
			}
			var AE = AC(AF);
			if (AF === ".." || AE != null) {
				if (g.setup(AF, AD) === true) {
					M[AF] = true;
					return
				}
			}
			if (M[AF] !== true && M[AF]++ < f) {
				window.setTimeout(function () {
					x(AF, AD)
				}, F)
			} else {
				N[AF] = r;
				M[AF] = true
			}
		}

		function m(AE, AH) {
			if (typeof q[AE] === "undefined") {
				q[AE] = false;
				var AG = o(AE);
				if (S(AG) !== S(window.location.href)) {
					return false
				}
				var AF = AC(AE);
				try {
					var AI = AF.gadgets;
					q[AE] = AI.rpc.receiveSameDomain
				} catch (AD) {
				}
			}
			if (typeof q[AE] === "function") {
				q[AE](AH);
				return true
			}
			return false
		}

		function o(AE) {
			var AD = w[AE];
			if (AD && AD.substring(0, 1) === "/") {
				if (AD.substring(1, 2) === "/") {
					AD = document.location.protocol + AD
				} else {
					AD = document.location.protocol + "//" + document.location.host + AD
				}
			}
			return AD
		}

		function AB(AE, AD, AF) {
			if (!/http(s)?:\/\/.+/.test(AD)) {
				if (AD.indexOf("//") == 0) {
					AD = window.location.protocol + AD
				} else {
					if (AD.charAt(0) == "/") {
						AD = window.location.protocol + "//" + window.location.host + AD
					} else {
						if (AD.indexOf("://") == -1) {
							AD = window.location.protocol + "//" + AD
						}
					}
				}
			}
			w[AE] = AD;
			c[AE] = !!AF
		}

		function e(AD) {
			return a[AD]
		}

		function C(AD, AE) {
			AE = AE || "";
			a[AD] = String(AE);
			x(AD, AE)
		}

		function AA(AE) {
			var AD = AE.passReferrer || "";
			var AF = AD.split(":", 2);
			E = AF[0] || "none";
			P = AF[1] || "origin"
		}

		function H(AE, AD) {
			function AF(AI) {
				var AH = AI ? AI.rpc : {};
				var AJ = String(AH.useLegacyProtocol) === "true";
				AA(AH);
				var AG = AH.parentRelayUrl || "";
				AG = S(D.parent || AD) + AG;
				AB("..", AG, AJ);
				if (AJ) {
					g = gadgets.rpctx.ifpc;
					g.init(z, K)
				}
				C("..", AE)
			}

			if (!D.parent && AD) {
				AF({});
				return
			}
			gadgets.config.register("rpc", null, AF)
		}

		function O(AE, AI, AK) {
			if (AE.charAt(0) != "/") {
				if (!gadgets.util) {
					return
				}
				var AH = document.getElementById(AE);
				if (!AH) {
					throw new Error("Cannot set up gadgets.rpc receiver with ID: " + AE + ", element not found.")
				}
			}
			var AD = AH && AH.src;
			var AF = AI || gadgets.rpc.getOrigin(AD);
			AB(AE, AF);
			var AJ = gadgets.util.getUrlParameters(AD);
			var AG = AK || AJ.rpctoken;
			C(AE, AG)
		}

		function I(AD, AF, AG) {
			if (AD === "..") {
				var AE = AG || D.rpctoken || D.ifpctok || "";
				H(AE, AF)
			} else {
				O(AD, AF, AG)
			}
		}

		function V(AF) {
			if (E === "bidir" || (E === "c2p" && AF === "..") || (E === "p2c" && AF !== "..")) {
				var AE = window.location.href;
				var AG = "?";
				if (P === "query") {
					AG = "#"
				} else {
					if (P === "hash") {
						return AE
					}
				}
				var AD = AE.lastIndexOf(AG);
				AD = AD === -1 ? AE.length : AD;
				return AE.substring(0, AD)
			}
			return null
		}

		return{config: function (AD) {
			if (typeof AD.securityCallback === "function") {
				i = AD.securityCallback
			}
		}, register: function (AE, AD) {
			if (AE === l || AE === t) {
				throw new Error("Cannot overwrite callback/ack service")
			}
			if (AE === s) {
				throw new Error("Cannot overwrite default service: use registerDefault")
			}
			Q[AE] = AD
		}, unregister: function (AD) {
			if (AD === l || AD === t) {
				throw new Error("Cannot delete callback/ack service")
			}
			if (AD === s) {
				throw new Error("Cannot delete default service: use unregisterDefault")
			}
			delete Q[AD]
		}, registerDefault: function (AD) {
			Q[s] = AD
		}, unregisterDefault: function () {
			delete Q[s]
		}, forceParentVerifiable: function () {
			if (!g.isParentVerifiable()) {
				g = gadgets.rpctx.ifpc
			}
		}, call: function (AD, AF, AK, AI) {
			AD = AD || "..";
			var AJ = "..";
			if (AD === "..") {
				AJ = U
			} else {
				if (AD.charAt(0) == "/") {
					AJ = b(U, gadgets.rpc.getOrigin(window.location.href))
				}
			}
			++Y;
			if (AK) {
				L[Y] = AK
			}
			var AH = {s: AF, f: AJ, c: AK ? Y : 0, a: Array.prototype.slice.call(arguments, 3), t: a[AD], l: c[AD]};
			var AE = V(AD);
			if (AE) {
				AH.r = AE
			}
			if (AD !== ".." && X(AD) == null && !document.getElementById(AD)) {
				return
			}
			if (m(AD, AH)) {
				return
			}
			var AG = N[AD];
			if (!AG && X(AD) !== null) {
				AG = g
			}
			if (!AG) {
				if (!d[AD]) {
					d[AD] = [AH]
				} else {
					d[AD].push(AH)
				}
				return
			}
			if (c[AD]) {
				AG = gadgets.rpctx.ifpc
			}
			if (AG.call(AD, AJ, AH) === false) {
				N[AD] = r;
				g.call(AD, AJ, AH)
			}
		}, getRelayUrl: o, setRelayUrl: AB, setAuthToken: C, setupReceiver: I, getAuthToken: e, removeReceiver: function (AD) {
			delete w[AD];
			delete c[AD];
			delete a[AD];
			delete M[AD];
			delete q[AD];
			delete N[AD]
		}, getRelayChannel: function () {
			return g.getCode()
		}, receive: function (AE, AD) {
			if (AE.length > 4) {
				g._receiveMessage(AE, z)
			} else {
				J.apply(null, AE.concat(AD))
			}
		}, receiveSameDomain: function (AD) {
			AD.a = Array.prototype.slice.call(AD.a);
			window.setTimeout(function () {
				z(AD)
			}, 0)
		}, getOrigin: S, getTargetOrigin: k, init: function () {
			if (g.init(z, K) === false) {
				g = r
			}
			if (Z) {
				I("..")
			} else {
				gadgets.config.register("rpc", null, function (AD) {
					AA(AD.rpc || {})
				})
			}
		}, _getTargetWin: AC, _parseSiblingId: X, ACK: t, RPC_ID: U || "..", SEC_ERROR_LOAD_TIMEOUT: p, SEC_ERROR_FRAME_PHISH: y, SEC_ERROR_FORGED_MSG: A}
	}();
	gadgets.rpc.init()
}
;
;
gadgets.rpc.register("update_security_token", function (A) {
	shindig.auth.updateSecurityToken(A)
});
;
gadgets.io = function () {
	var config = {};
	var oauthState;

	function makeXhr() {
		var x;
		if (typeof shindig != "undefined" && shindig.xhrwrapper && shindig.xhrwrapper.createXHR) {
			return shindig.xhrwrapper.createXHR()
		} else {
			if (typeof ActiveXObject != "undefined") {
				x = new ActiveXObject("Msxml2.XMLHTTP");
				if (!x) {
					x = new ActiveXObject("Microsoft.XMLHTTP")
				}
				return x
			} else {
				if (typeof XMLHttpRequest != "undefined" || window.XMLHttpRequest) {
					return new window.XMLHttpRequest()
				} else {
					throw ("no xhr available")
				}
			}
		}
	}

	function hadError(xobj, callback) {
		if (xobj.readyState !== 4) {
			return true
		}
		try {
			if (xobj.status !== 200) {
				var error = ("" + xobj.status);
				if (xobj.responseText) {
					error = error + " " + xobj.responseText
				}
				callback({errors: [error], rc: xobj.status, text: xobj.responseText});
				return true
			}
		} catch (e) {
			callback({errors: [e.number + " Error not specified"], rc: e.number, text: e.description});
			return true
		}
		return false
	}

	function processNonProxiedResponse(url, callback, params, xobj) {
		if (hadError(xobj, callback)) {
			return
		}
		var data = {body: xobj.responseText};
		callback(transformResponseData(params, data))
	}

	var UNPARSEABLE_CRUFT = "throw 1; < don't be evil' >";

	function processResponse(url, callback, params, xobj) {
		if (hadError(xobj, callback)) {
			return
		}
		var txt = xobj.responseText;
		var offset = txt.indexOf(UNPARSEABLE_CRUFT) + UNPARSEABLE_CRUFT.length;
		if (offset < UNPARSEABLE_CRUFT.length) {
			return
		}
		txt = txt.substr(offset);
		var data = eval("(" + txt + ")");
		data = data[url];
		if (data.oauthState) {
			oauthState = data.oauthState
		}
		if (data.st) {
			shindig.auth.updateSecurityToken(data.st)
		}
		callback(transformResponseData(params, data))
	}

	function transformResponseData(params, data) {
		var resp = {text: data.body, rc: data.rc || 200, headers: data.headers, oauthApprovalUrl: data.oauthApprovalUrl, oauthError: data.oauthError, oauthErrorText: data.oauthErrorText, errors: []};
		if (resp.rc < 200 || resp.rc >= 400) {
			resp.errors = [resp.rc + " Error"]
		} else {
			if (resp.text) {
				if (resp.rc >= 300 && resp.rc < 400) {
					params.CONTENT_TYPE = "TEXT"
				}
				switch (params.CONTENT_TYPE) {
					case"JSON":
					case"FEED":
						resp.data = gadgets.json.parse(resp.text);
						if (!resp.data) {
							resp.errors.push("500 Failed to parse JSON");
							resp.rc = 500;
							resp.data = null
						}
						break;
					case"DOM":
						var dom;
						if (typeof ActiveXObject != "undefined") {
							dom = new ActiveXObject("Microsoft.XMLDOM");
							dom.async = false;
							dom.validateOnParse = false;
							dom.resolveExternals = false;
							if (!dom.loadXML(resp.text)) {
								resp.errors.push("500 Failed to parse XML");
								resp.rc = 500
							} else {
								resp.data = dom
							}
						} else {
							var parser = new DOMParser();
							dom = parser.parseFromString(resp.text, "text/xml");
							if ("parsererror" === dom.documentElement.nodeName) {
								resp.errors.push("500 Failed to parse XML");
								resp.rc = 500
							} else {
								resp.data = dom
							}
						}
						break;
					default:
						resp.data = resp.text;
						break
				}
			}
		}
		return resp
	}

	function makeXhrRequest(realUrl, proxyUrl, callback, paramData, method, params, processResponseFunction, opt_contentType) {
		var xhr = makeXhr();
		if (proxyUrl.indexOf("//") == 0) {
			proxyUrl = document.location.protocol + proxyUrl
		}
		xhr.open(method, proxyUrl, true);
		if (callback) {
			xhr.onreadystatechange = gadgets.util.makeClosure(null, processResponseFunction, realUrl, callback, params, xhr)
		}
		if (paramData !== null) {
			xhr.setRequestHeader("Content-Type", opt_contentType || "application/x-www-form-urlencoded");
			xhr.send(paramData)
		} else {
			xhr.send(null)
		}
	}

	function respondWithPreload(postData, params, callback) {
		if (gadgets.io.preloaded_ && postData.httpMethod === "GET") {
			for (var i = 0;
				 i < gadgets.io.preloaded_.length;
				 i++) {
				var preload = gadgets.io.preloaded_[i];
				if (preload && (preload.id === postData.url)) {
					delete gadgets.io.preloaded_[i];
					if (preload.rc !== 200) {
						callback({rc: preload.rc, errors: [preload.rc + " Error"]})
					} else {
						if (preload.oauthState) {
							oauthState = preload.oauthState
						}
						var resp = {body: preload.body, rc: preload.rc, headers: preload.headers, oauthApprovalUrl: preload.oauthApprovalUrl, oauthError: preload.oauthError, oauthErrorText: preload.oauthErrorText, errors: []};
						callback(transformResponseData(params, resp))
					}
					return true
				}
			}
		}
		return false
	}

	function init(configuration) {
		config = configuration["core.io"] || {}
	}

	var requiredConfig = {proxyUrl: new gadgets.config.RegExValidator(/.*%(raw)?url%.*/), jsonProxyUrl: gadgets.config.NonEmptyStringValidator};
	gadgets.config.register("core.io", requiredConfig, init);
	return{makeRequest: function (url, callback, opt_params) {
		var params = opt_params || {};
		var httpMethod = params.METHOD || "GET";
		var refreshInterval = params.REFRESH_INTERVAL;
		var auth, st;
		if (params.AUTHORIZATION && params.AUTHORIZATION !== "NONE") {
			auth = params.AUTHORIZATION.toLowerCase();
			st = shindig.auth.getSecurityToken()
		} else {
			if (httpMethod === "GET" && refreshInterval === undefined) {
				refreshInterval = 3600
			}
		}
		var signOwner = true;
		if (typeof params.OWNER_SIGNED !== "undefined") {
			signOwner = params.OWNER_SIGNED
		}
		var signViewer = true;
		if (typeof params.VIEWER_SIGNED !== "undefined") {
			signViewer = params.VIEWER_SIGNED
		}
		var headers = params.HEADERS || {};
		if (httpMethod === "POST" && !headers["Content-Type"]) {
			headers["Content-Type"] = "application/x-www-form-urlencoded"
		}
		var urlParams = gadgets.util.getUrlParameters();
		var paramData = {url: url, httpMethod: httpMethod, headers: gadgets.io.encodeValues(headers, false), postData: params.POST_DATA || "", authz: auth || "", st: st || "", contentType: params.CONTENT_TYPE || "TEXT", numEntries: params.NUM_ENTRIES || "3", getSummaries: !!params.GET_SUMMARIES, signOwner: signOwner, signViewer: signViewer, gadget: urlParams.url, container: urlParams.container || urlParams.synd || "default", bypassSpecCache: gadgets.util.getUrlParameters().nocache || "", getFullHeaders: !!params.GET_FULL_HEADERS};
		if (auth === "oauth" || auth === "signed") {
			if (gadgets.io.oauthReceivedCallbackUrl_) {
				paramData.OAUTH_RECEIVED_CALLBACK = gadgets.io.oauthReceivedCallbackUrl_;
				gadgets.io.oauthReceivedCallbackUrl_ = null
			}
			paramData.oauthState = oauthState || "";
			for (var opt in params) {
				if (params.hasOwnProperty(opt)) {
					if (opt.indexOf("OAUTH_") === 0) {
						paramData[opt] = params[opt]
					}
				}
			}
		}
		var proxyUrl = config.jsonProxyUrl.replace("%host%", document.location.host);
		if (!respondWithPreload(paramData, params, callback, processResponse)) {
			if (httpMethod === "GET" && refreshInterval > 0) {
				var extraparams = "?refresh=" + refreshInterval + "&" + gadgets.io.encodeValues(paramData);
				makeXhrRequest(url, proxyUrl + extraparams, callback, null, "GET", params, processResponse)
			} else {
				makeXhrRequest(url, proxyUrl, callback, gadgets.io.encodeValues(paramData), "POST", params, processResponse)
			}
		}
	}, makeNonProxiedRequest: function (relativeUrl, callback, opt_params, opt_contentType) {
		var params = opt_params || {};
		makeXhrRequest(relativeUrl, relativeUrl, callback, params.POST_DATA, params.METHOD, params, processNonProxiedResponse, opt_contentType)
	}, clearOAuthState: function () {
		oauthState = undefined
	}, encodeValues: function (fields, opt_noEscaping) {
		var escape = !opt_noEscaping;
		var buf = [];
		var first = false;
		for (var i in fields) {
			if (fields.hasOwnProperty(i) && !/___$/.test(i)) {
				if (!first) {
					first = true
				} else {
					buf.push("&")
				}
				buf.push(escape ? encodeURIComponent(i) : i);
				buf.push("=");
				buf.push(escape ? encodeURIComponent(fields[i]) : fields[i])
			}
		}
		return buf.join("")
	}, getProxyUrl: function (url, opt_params) {
		return url
	}}
}();
gadgets.io.RequestParameters = gadgets.util.makeEnum(["METHOD", "CONTENT_TYPE", "POST_DATA", "HEADERS", "AUTHORIZATION", "NUM_ENTRIES", "GET_SUMMARIES", "GET_FULL_HEADERS", "REFRESH_INTERVAL", "OAUTH_SERVICE_NAME", "OAUTH_USE_TOKEN", "OAUTH_TOKEN_NAME", "OAUTH_REQUEST_TOKEN", "OAUTH_REQUEST_TOKEN_SECRET", "OAUTH_RECEIVED_CALLBACK"]);
gadgets.io.MethodType = gadgets.util.makeEnum(["GET", "POST", "PUT", "DELETE", "HEAD"]);
gadgets.io.ContentType = gadgets.util.makeEnum(["TEXT", "DOM", "JSON", "FEED"]);
gadgets.io.AuthorizationType = gadgets.util.makeEnum(["NONE", "SIGNED", "OAUTH"]);
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistFuncs([
		[gadgets.io, "encodeValues"],
		[gadgets.io, "getProxyUrl"],
		[gadgets.io, "makeRequest"]
	])
});
;
gadgets.log = (function () {
	var E = 1;
	var A = 2;
	var F = 3;
	var C = 4;
	var D = function (I) {
		B(E, I)
	};
	gadgets.warn = function (I) {
		B(A, I)
	};
	gadgets.error = function (I) {
		B(F, I)
	};
	gadgets.setLogLevel = function (I) {
		H = I
	};
	function B(J, I) {
		if (J < H || !G) {
			return
		}
		if (J === A && G.warn) {
			G.warn(I)
		} else {
			if (J === F && G.error) {
				G.error(I)
			} else {
				if (G.log) {
					G.log(I)
				}
			}
		}
	}

	D.INFO = E;
	D.WARNING = A;
	D.NONE = C;
	var H = E;
	var G = window.console ? window.console : window.opera ? window.opera.postError : undefined;
	return D
})();
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	___.grantRead(gadgets.log, "INFO");
	___.grantRead(gadgets.log, "WARNING");
	___.grantRead(gadgets.log, "ERROR");
	___.grantRead(gadgets.log, "NONE");
	caja___.whitelistFuncs([
		[gadgets, "log"],
		[gadgets, "warn"],
		[gadgets, "error"],
		[gadgets, "setLogLevel"]
	])
});
;
(function () {
	osapi._registerMethod = function (G, F) {
		var A = typeof ___ !== "undefined";
		if (G == "newBatch") {
			return
		}
		var D = G.split(".");
		var C = osapi;
		for (var B = 0;
			 B < D.length - 1;
			 B++) {
			C[D[B]] = C[D[B]] || {};
			C = C[D[B]]
		}
		var E = function (J) {
			var I = osapi.newBatch();
			var H = {};
			H.execute = function (M) {
				var K = A ? ___.untame(M) : M;
				var L = A ? ___.USELESS : this;
				I.add(G, this);
				I.execute(function (N) {
					if (N.error) {
						K.call(L, N.error)
					} else {
						K.call(L, N[G])
					}
				})
			};
			if (A) {
				___.markInnocent(H.execute, "execute")
			}
			J = J || {};
			J.userId = J.userId || "@viewer";
			J.groupId = J.groupId || "@self";
			J.timestamp = (new Date).getTime();
			H.method = G;
			H.transport = F;
			H.rpc = J;
			return H
		};
		if (A && typeof ___.markInnocent !== "undefined") {
			___.markInnocent(E, G)
		}
		if (C[D[D.length - 1]]) {
		} else {
			C[D[D.length - 1]] = E
		}
	}
})();
;
(function () {
	var A = function () {
		var C = {};
		var B = [];
		var F = function (G, H) {
			if (H && G) {
				B.push({key: G, request: H})
			}
			return C
		};
		var E = function (H) {
			var G = {method: H.request.method, id: H.key};
			if (H.request.rpc) {
				G.params = H.request.rpc
			}
			return G
		};
		var D = function (G) {
			var H = {};
			var O = {};
			var J = 0;
			var K = [];
			for (var M = 0;
				 M < B.length;
				 M++) {
				var I = B[M].request.transport;
				if (!O[I.name]) {
					K.push(I);
					J++
				}
				O[I.name] = O[I.name] || [];
				O[I.name].push(E(B[M]))
			}
			var N = function (S) {
				if (S.error) {
					H.error = S.error
				}
				for (var R = 0;
					 R < B.length;
					 R++) {
					var Q = B[R].key;
					var P = S[Q];
					if (P) {
						if (P.error) {
							H[Q] = P
						} else {
							H[Q] = P.data || P.result
						}
					}
				}
				J--;
				if (J === 0) {
					G(H)
				}
			};
			for (var L = 0;
				 L < K.length;
				 L++) {
				K[L].execute(O[K[L].name], N)
			}
			if (J == 0) {
				window.setTimeout(function () {
					G(H)
				}, 0)
			}
		};
		C.execute = D;
		C.add = F;
		return C
	};
	osapi.newBatch = A
})();
;
(function () {
	function A(H, G) {
		function F(J) {
			if (J.errors[0]) {
				G({error: {code: J.rc, message: J.text}})
			} else {
				var K = J.result || J.data;
				if (K.error) {
					G(K)
				} else {
					var I = {};
					for (var L = 0;
						 L < K.length;
						 L++) {
						I[K[L].id] = K[L]
					}
					G(I)
				}
			}
		}

		var E = {POST_DATA: gadgets.json.stringify(H), CONTENT_TYPE: "JSON", METHOD: "POST", AUTHORIZATION: "SIGNED"};
		var C = this.name;
		var D = shindig.auth.getSecurityToken();
		if (D) {
			C += "?st=";
			C += encodeURIComponent(D)
		}
		gadgets.io.makeNonProxiedRequest(C, F, E, "application/json")
	}

	function B(F) {
		var H = F["osapi.services"];
		if (H) {
			for (var E in H) {
				if (H.hasOwnProperty(E)) {
					if (E.indexOf("http") == 0 || E.indexOf("//") == 0) {
						var C = E.replace("%host%", document.location.host);
						var I = {name: C, execute: A};
						var D = H[E];
						for (var G = 0;
							 G < D.length;
							 G++) {
							osapi._registerMethod(D[G], I)
						}
					}
				}
			}
		}
	}

	if (gadgets.config) {
		gadgets.config.register("osapi.services", null, B)
	}
})();
;
if (gadgets && gadgets.rpc) {
	(function () {
		function A(E, D) {
			var C = function (G) {
				if (!G) {
					D({code: 500, message: "Container refused the request"})
				} else {
					if (G.error) {
						D(G)
					} else {
						var F = {};
						for (var H = 0;
							 H < G.length;
							 H++) {
							F[G[H].id] = G[H]
						}
						D(F)
					}
				}
			};
			gadgets.rpc.call("..", "osapi._handleGadgetRpcMethod", C, E)
		}

		function B(C) {
			var F = {name: "gadgets.rpc", execute: A};
			var K = C["osapi.services"];
			if (K) {
				for (var D in K) {
					if (K.hasOwnProperty(D)) {
						if (D === "gadgets.rpc") {
							var E = K[D];
							for (var H = 0;
								 H < E.length;
								 H++) {
								osapi._registerMethod(E[H], F)
							}
						}
					}
				}
			}
			if (osapi.container && osapi.container.listMethods) {
				var G = gadgets.util.runOnLoadHandlers;
				var I = 2;
				var J = function () {
					I--;
					if (I == 0) {
						G()
					}
				};
				gadgets.util.runOnLoadHandlers = J;
				osapi.container.listMethods({}).execute(function (L) {
					if (!L.error) {
						for (var M = 0;
							 M < L.length;
							 M++) {
							if (L[M] != "container.listMethods") {
								osapi._registerMethod(L[M], F)
							}
						}
					}
					J()
				});
				window.setTimeout(J, 500)
			}
		}

		if (gadgets.config && gadgets.config.isGadget) {
			gadgets.config.register("osapi.services", null, B)
		}
	})()
}
;
;
gadgets.util.registerOnLoadHandler(function () {
	if (osapi && osapi.people && osapi.people.get) {
		osapi.people.getViewer = function (A) {
			A = A || {};
			A.userId = "@viewer";
			A.groupId = "@self";
			return osapi.people.get(A)
		};
		osapi.people.getViewerFriends = function (A) {
			A = A || {};
			A.userId = "@viewer";
			A.groupId = "@friends";
			return osapi.people.get(A)
		};
		osapi.people.getOwner = function (A) {
			A = A || {};
			A.userId = "@owner";
			A.groupId = "@self";
			return osapi.people.get(A)
		};
		osapi.people.getOwnerFriends = function (A) {
			A = A || {};
			A.userId = "@owner";
			A.groupId = "@friends";
			return osapi.people.get(A)
		}
	}
});
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	___.tamesTo(osapi.newBatch, ___.markFuncFreeze(function () {
		var C = osapi.newBatch();
		___.markInnocent(C.add, "add");
		___.markInnocent(C.execute, "execute");
		return ___.tame(C)
	}));
	A.outers.osapi = ___.tame(osapi);
	___.grantRead(A.outers, "osapi");
	var B = A;
	gadgets.util.registerOnLoadHandler(function () {
		if (osapi && osapi.people && osapi.people.get) {
			caja___.whitelistFuncs([
				[osapi.people, "getViewer"],
				[osapi.people, "getViewerFriends"],
				[osapi.people, "getOwner"],
				[osapi.people, "getOwnerFriends"]
			]);
			B.outers.osapi.people.getViewer = ___.tame(osapi.people.getViewer);
			B.outers.osapi.people.getViewerFriends = ___.tame(osapi.people.getViewerFriends);
			B.outers.osapi.people.getOwner = ___.tame(osapi.people.getOwner);
			B.outers.osapi.people.getOwnerFriends = ___.tame(osapi.people.getOwnerFriends)
		}
	})
});
;
(function () {
	var I = null;
	var J = {};
	var F = gadgets.util.escapeString;
	var D = {};
	var H = {};
	var E = "en";
	var B = "US";
	var A = 0;

	function C() {
		var L = gadgets.util.getUrlParameters();
		for (var K in L) {
			if (L.hasOwnProperty(K)) {
				if (K.indexOf("up_") === 0 && K.length > 3) {
					J[K.substr(3)] = String(L[K])
				} else {
					if (K === "country") {
						B = L[K]
					} else {
						if (K === "lang") {
							E = L[K]
						} else {
							if (K === "mid") {
								A = L[K]
							}
						}
					}
				}
			}
		}
	}

	function G() {
		for (var K in H) {
			if (typeof J[K] === "undefined") {
				J[K] = H[K]
			}
		}
	}

	gadgets.Prefs = function () {
		if (!I) {
			C();
			G();
			I = this
		}
		return I
	};
	gadgets.Prefs.setInternal_ = function (M, O) {
		var N = false;
		if (typeof M === "string") {
			if (!J.hasOwnProperty(M) || J[M] !== O) {
				N = true
			}
			J[M] = O
		} else {
			for (var L in M) {
				if (M.hasOwnProperty(L)) {
					var K = M[L];
					if (!J.hasOwnProperty(L) || J[L] !== K) {
						N = true
					}
					J[L] = K
				}
			}
		}
		return N
	};
	gadgets.Prefs.setMessages_ = function (K) {
		D = K
	};
	gadgets.Prefs.setDefaultPrefs_ = function (K) {
		H = K
	};
	gadgets.Prefs.prototype.getString = function (K) {
		if (K === ".lang") {
			K = "lang"
		}
		return J[K] ? F(J[K]) : ""
	};
	gadgets.Prefs.prototype.setDontEscape_ = function () {
		F = function (K) {
			return K
		}
	};
	gadgets.Prefs.prototype.getInt = function (K) {
		var L = parseInt(J[K], 10);
		return isNaN(L) ? 0 : L
	};
	gadgets.Prefs.prototype.getFloat = function (K) {
		var L = parseFloat(J[K]);
		return isNaN(L) ? 0 : L
	};
	gadgets.Prefs.prototype.getBool = function (K) {
		var L = J[K];
		if (L) {
			return L === "true" || L === true || !!parseInt(L, 10)
		}
		return false
	};
	gadgets.Prefs.prototype.set = function (K, L) {
		throw new Error("setprefs feature required to make this call.")
	};
	gadgets.Prefs.prototype.getArray = function (N) {
		var O = J[N];
		if (O) {
			var K = O.split("|");
			for (var M = 0, L = K.length;
				 M < L;
				 ++M) {
				K[M] = F(K[M].replace(/%7C/g, "|"))
			}
			return K
		}
		return[]
	};
	gadgets.Prefs.prototype.setArray = function (K, L) {
		throw new Error("setprefs feature required to make this call.")
	};
	gadgets.Prefs.prototype.getMsg = function (K) {
		return D[K] || ""
	};
	gadgets.Prefs.prototype.getCountry = function () {
		return B
	};
	gadgets.Prefs.prototype.getLang = function () {
		return E
	};
	gadgets.Prefs.prototype.getModuleId = function () {
		return A
	}
})();
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistCtors([
		[gadgets, "Prefs", Object]
	]);
	caja___.whitelistMeths([
		[gadgets.Prefs, "getArray"],
		[gadgets.Prefs, "getBool"],
		[gadgets.Prefs, "getCountry"],
		[gadgets.Prefs, "getFloat"],
		[gadgets.Prefs, "getInt"],
		[gadgets.Prefs, "getLang"],
		[gadgets.Prefs, "getMsg"],
		[gadgets.Prefs, "getString"],
		[gadgets.Prefs, "set"],
		[gadgets.Prefs, "setArray"]
	])
});
;
var gadgets;
var JSON = window.JSON || gadgets.json;
var _IG_Prefs = (function () {
	var A = null;
	var B = function () {
		if (!A) {
			A = new gadgets.Prefs();
			A.setDontEscape_()
		}
		return A
	};
	B._parseURL = gadgets.Prefs.parseUrl;
	return B
})();
function _IG_Fetch_wrapper(B, A) {
	B(A.data ? A.data : "")
}
function _IG_FetchContent(B, G, C) {
	var F = C || {};
	if (F.refreshInterval) {
		F.REFRESH_INTERVAL = F.refreshInterval
	} else {
		F.REFRESH_INTERVAL = 3600
	}
	for (var E in F) {
		var D = F[E];
		delete F[E];
		F[E.toUpperCase()] = D
	}
	var A = gadgets.util.makeClosure(null, _IG_Fetch_wrapper, G);
	gadgets.io.makeRequest(B, A, F)
}
function _IG_FetchXmlContent(B, E, C) {
	var D = C || {};
	if (D.refreshInterval) {
		D.REFRESH_INTERVAL = D.refreshInterval
	} else {
		D.REFRESH_INTERVAL = 3600
	}
	D.CONTENT_TYPE = "DOM";
	var A = gadgets.util.makeClosure(null, _IG_Fetch_wrapper, E);
	gadgets.io.makeRequest(B, A, D)
}
function _IG_FetchFeedAsJSON(B, F, C, A, D) {
	var E = D || {};
	E.CONTENT_TYPE = "FEED";
	E.NUM_ENTRIES = C;
	E.GET_SUMMARIES = A;
	gadgets.io.makeRequest(B, function (J) {
		J.data = J.data || {};
		if (J.errors && J.errors.length > 0) {
			J.data.ErrorMsg = J.errors[0]
		}
		if (J.data.link) {
			J.data.URL = B
		}
		if (J.data.title) {
			J.data.Title = J.data.title
		}
		if (J.data.description) {
			J.data.Description = J.data.description
		}
		if (J.data.link) {
			J.data.Link = J.data.link
		}
		if (J.data.items && J.data.items.length > 0) {
			J.data.Entry = J.data.items;
			for (var H = 0;
				 H < J.data.Entry.length;
				 ++H) {
				var I = J.data.Entry[H];
				I.Title = I.title;
				I.Link = I.link;
				I.Summary = I.summary || I.description;
				I.Date = I.pubDate
			}
		}
		for (var G = 0;
			 G < J.data.Entry.length;
			 ++G) {
			var I = J.data.Entry[G];
			I.Date = (I.Date / 1000)
		}
		F(J.data)
	}, E)
}
function _IG_GetCachedUrl(A, B) {
	var C = B || {};
	C.REFRESH_INTERVAL = 3600;
	if (C.refreshInterval) {
		C.REFRESH_INTERVAL = C.refreshInterval
	}
	return gadgets.io.getProxyUrl(A, C)
}
function _IG_GetImageUrl(A, B) {
	return _IG_GetCachedUrl(A, B)
}
function _IG_GetImage(B) {
	var A = document.createElement("img");
	A.src = _IG_GetCachedUrl(B);
	return A
}
function _IG_RegisterOnloadHandler(A) {
	gadgets.util.registerOnLoadHandler(A)
}
function _IG_Callback(B, C) {
	var A = arguments;
	return function () {
		var D = Array.prototype.slice.call(arguments);
		B.apply(null, D.concat(Array.prototype.slice.call(A, 1)))
	}
}
var _args = gadgets.util.getUrlParameters;
function _gel(A) {
	return document.getElementById ? document.getElementById(A) : null
}
function _gelstn(A) {
	if (A === "*" && document.all) {
		return document.all
	}
	return document.getElementsByTagName ? document.getElementsByTagName(A) : []
}
function _gelsbyregex(D, F) {
	var C = _gelstn(D);
	var E = [];
	for (var B = 0, A = C.length;
		 B < A;
		 ++B) {
		if (F.test(C[B].id)) {
			E.push(C[B])
		}
	}
	return E
}
function _esc(A) {
	return window.encodeURIComponent ? encodeURIComponent(A) : escape(A)
}
function _unesc(A) {
	return window.decodeURIComponent ? decodeURIComponent(A) : unescape(A)
}
function _hesc(A) {
	return gadgets.util.escapeString(A)
}
function _striptags(A) {
	return A.replace(/<\/?[^>]+>/g, "")
}
function _trim(A) {
	return A.replace(/^\s+|\s+$/g, "")
}
function _toggle(A) {
	A = (typeof A === "string") ? _gel(A) : A;
	if (A !== null) {
		if (A.style.display.length === 0 || A.style.display === "block") {
			A.style.display = "none"
		} else {
			if (A.style.display === "none") {
				A.style.display = "block"
			}
		}
	}
}
var _uid = (function () {
	var A = 0;
	return function () {
		return A++
	}
})();
function _min(B, A) {
	return(B < A ? B : A)
}
function _max(B, A) {
	return(B > A ? B : A)
}
function _exportSymbols(A, C) {
	var I = window;
	var F = A.split(".");
	for (var H = 0, G = F.length;
		 H < G;
		 H++) {
		var B = F[H];
		I[B] = I[B] || {};
		I = I[B]
	}
	for (var E = 0, D = C.length;
		 E < D;
		 E += 2) {
		I[C[E]] = C[E + 1]
	}
}
function _IG_AddDOMEventHandler(C, B, A) {
	gadgets.warn("_IG_AddDOMEventHandler not implemented - see SHINDIG-198")
}
;
;
{
	var css = {'properties': (function () {
		var s = ['|left|center|right', '|top|center|bottom', '#(?:[\\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\\(\\s*(?:-?\\d+|0|[+\\-]?\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:-?\\d+|0|[+\\-]?\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:-?\\d+|0|[+\\-]?\\d+(?:\\.\\d+)?%)\\)', '[+\\-]?\\d+(?:\\.\\d+)?(?:[cem]m|ex|in|p[ctx])', '\\d+(?:\\.\\d+)?(?:[cem]m|ex|in|p[ctx])', 'none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset', '[+\\-]?\\d+(?:\\.\\d+)?%', '\\d+(?:\\.\\d+)?%', 'url\\(\"[^()\\\\\"\\r\\n]+\"\\)', 'repeat-x|repeat-y|(?:repeat|space|round|no-repeat)(?:\\s+(?:repeat|space|round|no-repeat)){0,2}'], c = [RegExp('^\\s*(?:\\s*(?:0|' + s[3] + '|' + s[6] + ')){1,2}\\s*$', 'i'), RegExp('^\\s*(?:\\s*(?:0|' + s[3] + '|' + s[6] + ')){1,4}(?:\\s*\\/(?:\\s*(?:0|' + s[3] + '|' + s[6] + ')){1,4})?\\s*$', 'i'), RegExp('^\\s*(?:\\s*none|(?:(?:\\s*(?:' + s[2] + ')\\s+(?:0|' + s[3] + ')(?:\\s*(?:0|' + s[3] + ')){1,4}(?:\\s*inset)?|(?:\\s*inset)?\\s+(?:0|' + s[3] + ')(?:\\s*(?:0|' + s[3] + ')){1,4}(?:\\s*(?:' + s[2] + '))?)\\s*,)*(?:\\s*(?:' + s[2] + ')\\s+(?:0|' + s[3] + ')(?:\\s*(?:0|' + s[3] + ')){1,4}(?:\\s*inset)?|(?:\\s*inset)?\\s+(?:0|' + s[3] + ')(?:\\s*(?:0|' + s[3] + ')){1,4}(?:\\s*(?:' + s[2] + '))?))\\s*$', 'i'), RegExp('^\\s*(?:' + s[2] + '|transparent|inherit)\\s*$', 'i'), RegExp('^\\s*(?:' + s[5] + '|inherit)\\s*$', 'i'), RegExp('^\\s*(?:thin|medium|thick|0|' + s[3] + '|inherit)\\s*$', 'i'), RegExp('^\\s*(?:(?:thin|medium|thick|0|' + s[3] + '|' + s[5] + '|' + s[2] + '|transparent|inherit)(?:\\s+(?:thin|medium|thick|0|' + s[3] + ')|\\s+(?:' + s[5] + ')|\\s*#(?:[\\da-f]{3}){1,2}|\\s+aqua|\\s+black|\\s+blue|\\s+fuchsia|\\s+gray|\\s+green|\\s+lime|\\s+maroon|\\s+navy|\\s+olive|\\s+orange|\\s+purple|\\s+red|\\s+silver|\\s+teal|\\s+white|\\s+yellow|\\s+rgb\\(\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\)|\\s+transparent|\\s+inherit){0,2}|inherit)\\s*$', 'i'), /^\s*(?:none|inherit)\s*$/i, RegExp('^\\s*(?:' + s[8] + '|none|inherit)\\s*$', 'i'), RegExp('^\\s*(?:0|' + s[3] + '|' + s[6] + '|auto|inherit)\\s*$', 'i'), RegExp('^\\s*(?:0|' + s[4] + '|' + s[7] + '|none|inherit|auto)\\s*$', 'i'), RegExp('^\\s*(?:0|' + s[4] + '|' + s[7] + '|inherit|auto)\\s*$', 'i'), /^\s*(?:0(?:\.\d+)?|\.\d+|1(?:\.0+)?|inherit)\s*$/i, RegExp('^\\s*(?:(?:' + s[2] + '|invert|inherit|' + s[5] + '|thin|medium|thick|0|' + s[3] + ')(?:\\s*#(?:[\\da-f]{3}){1,2}|\\s+aqua|\\s+black|\\s+blue|\\s+fuchsia|\\s+gray|\\s+green|\\s+lime|\\s+maroon|\\s+navy|\\s+olive|\\s+orange|\\s+purple|\\s+red|\\s+silver|\\s+teal|\\s+white|\\s+yellow|\\s+rgb\\(\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\)|\\s+invert|\\s+inherit|\\s+(?:' + s[5] + '|inherit)|\\s+(?:thin|medium|thick|0|' + s[3] + '|inherit)){0,2}|inherit)\\s*$', 'i'), RegExp('^\\s*(?:' + s[2] + '|invert|inherit)\\s*$', 'i'), /^\s*(?:visible|hidden|scroll|auto|no-display|no-content)\s*$/i, RegExp('^\\s*(?:0|' + s[4] + '|' + s[7] + '|inherit)\\s*$', 'i'), /^\s*(?:auto|always|avoid|left|right|inherit)\s*$/i, RegExp('^\\s*(?:0|[+\\-]?\\d+(?:\\.\\d+)?m?s|' + s[6] + '|inherit)\\s*$', 'i'), /^\s*(?:0|[+\-]?\d+(?:\.\d+)?|inherit)\s*$/i, /^\s*(?:clip|ellipsis)\s*$/i, RegExp('^\\s*(?:normal|0|' + s[3] + '|inherit)\\s*$', 'i')];
		return{'-moz-border-radius': c[1], '-moz-border-radius-bottomleft': c[0], '-moz-border-radius-bottomright': c[0], '-moz-border-radius-topleft': c[0], '-moz-border-radius-topright': c[0], '-moz-box-shadow': c[2], '-moz-opacity': c[12], '-moz-outline': c[13], '-moz-outline-color': c[14], '-moz-outline-style': c[4], '-moz-outline-width': c[5], '-o-text-overflow': c[20], '-webkit-border-bottom-left-radius': c[0], '-webkit-border-bottom-right-radius': c[0], '-webkit-border-radius': c[1], '-webkit-border-radius-bottom-left': c[0], '-webkit-border-radius-bottom-right': c[0], '-webkit-border-radius-top-left': c[0], '-webkit-border-radius-top-right': c[0], '-webkit-border-top-left-radius': c[0], '-webkit-border-top-right-radius': c[0], '-webkit-box-shadow': c[2], 'azimuth': /^\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|(?:left-side|far-left|left|center-left|center|center-right|right|far-right|right-side|behind)(?:\s+(?:left-side|far-left|left|center-left|center|center-right|right|far-right|right-side|behind))?|leftwards|rightwards|inherit)\s*$/i, 'background': RegExp('^\\s*(?:\\s*(?:' + s[8] + '|none|(?:(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?))?)(?:\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain))?|\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain)|' + s[9] + '|scroll|fixed|local|(?:border|padding|content)-box)(?:\\s*' + s[8] + '|\\s+none|(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)){1,2})(?:\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain))?|\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain)|\\s+repeat-x|\\s+repeat-y|(?:\\s+(?:repeat|space|round|no-repeat)){1,2}|\\s+(?:scroll|fixed|local)|\\s+(?:border|padding|content)-box){0,4}\\s*,)*\\s*(?:' + s[2] + '|transparent|inherit|' + s[8] + '|none|(?:(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?))?)(?:\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain))?|\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain)|' + s[9] + '|scroll|fixed|local|(?:border|padding|content)-box)(?:\\s*#(?:[\\da-f]{3}){1,2}|\\s+aqua|\\s+black|\\s+blue|\\s+fuchsia|\\s+gray|\\s+green|\\s+lime|\\s+maroon|\\s+navy|\\s+olive|\\s+orange|\\s+purple|\\s+red|\\s+silver|\\s+teal|\\s+white|\\s+yellow|\\s+rgb\\(\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\)|\\s+transparent|\\s+inherit|\\s*' + s[8] + '|\\s+none|(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)){1,2})(?:\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain))?|\\s*\\/\\s*(?:(?:0|' + s[4] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[4] + '|' + s[6] + '|auto)){0,2}|cover|contain)|\\s+repeat-x|\\s+repeat-y|(?:\\s+(?:repeat|space|round|no-repeat)){1,2}|\\s+(?:scroll|fixed|local)|\\s+(?:border|padding|content)-box){0,5}\\s*$', 'i'), 'background-attachment': /^\s*(?:scroll|fixed|local)(?:\s*,\s*(?:scroll|fixed|local))*\s*$/i, 'background-color': c[3], 'background-image': RegExp('^\\s*(?:' + s[8] + '|none)(?:\\s*,\\s*(?:' + s[8] + '|none))*\\s*$', 'i'), 'background-position': RegExp('^\\s*(?:(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?))?)(?:\\s*,\\s*(?:(?:0|' + s[6] + '|' + s[3] + s[0] + ')(?:\\s+(?:0|' + s[6] + '|' + s[3] + s[1] + '))?|(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?)(?:\\s+(?:center|(?:lef|righ)t(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?|(?:top|bottom)(?:\\s+(?:0|' + s[6] + '|' + s[3] + '))?))?))*\\s*$', 'i'), 'background-repeat': RegExp('^\\s*(?:' + s[9] + ')(?:\\s*,\\s*(?:' + s[9] + '))*\\s*$', 'i'), 'border': RegExp('^\\s*(?:(?:thin|medium|thick|0|' + s[3] + '|' + s[5] + '|' + s[2] + '|transparent)(?:\\s+(?:thin|medium|thick|0|' + s[3] + ')|\\s+(?:' + s[5] + ')|\\s*#(?:[\\da-f]{3}){1,2}|\\s+aqua|\\s+black|\\s+blue|\\s+fuchsia|\\s+gray|\\s+green|\\s+lime|\\s+maroon|\\s+navy|\\s+olive|\\s+orange|\\s+purple|\\s+red|\\s+silver|\\s+teal|\\s+white|\\s+yellow|\\s+rgb\\(\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\)|\\s+transparent){0,2}|inherit)\\s*$', 'i'), 'border-bottom': c[6], 'border-bottom-color': c[3], 'border-bottom-left-radius': c[0], 'border-bottom-right-radius': c[0], 'border-bottom-style': c[4], 'border-bottom-width': c[5], 'border-collapse': /^\s*(?:collapse|separate|inherit)\s*$/i, 'border-color': RegExp('^\\s*(?:(?:' + s[2] + '|transparent)(?:\\s*#(?:[\\da-f]{3}){1,2}|\\s+aqua|\\s+black|\\s+blue|\\s+fuchsia|\\s+gray|\\s+green|\\s+lime|\\s+maroon|\\s+navy|\\s+olive|\\s+orange|\\s+purple|\\s+red|\\s+silver|\\s+teal|\\s+white|\\s+yellow|\\s+rgb\\(\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\s*,\\s*(?:-?\\d+|0|' + s[6] + ')\\)|\\s+transparent){0,4}|inherit)\\s*$', 'i'), 'border-left': c[6], 'border-left-color': c[3], 'border-left-style': c[4], 'border-left-width': c[5], 'border-radius': c[1], 'border-right': c[6], 'border-right-color': c[3], 'border-right-style': c[4], 'border-right-width': c[5], 'border-spacing': RegExp('^\\s*(?:(?:\\s*(?:0|' + s[3] + ')){1,2}|\\s*inherit)\\s*$', 'i'), 'border-style': RegExp('^\\s*(?:(?:' + s[5] + ')(?:\\s+(?:' + s[5] + ')){0,4}|inherit)\\s*$', 'i'), 'border-top': c[6], 'border-top-color': c[3], 'border-top-left-radius': c[0], 'border-top-right-radius': c[0], 'border-top-style': c[4], 'border-top-width': c[5], 'border-width': RegExp('^\\s*(?:(?:thin|medium|thick|0|' + s[3] + ')(?:\\s+(?:thin|medium|thick|0|' + s[3] + ')){0,4}|inherit)\\s*$', 'i'), 'bottom': c[9], 'box-shadow': c[2], 'caption-side': /^\s*(?:top|bottom|inherit)\s*$/i, 'clear': /^\s*(?:none|left|right|both|inherit)\s*$/i, 'clip': RegExp('^\\s*(?:rect\\(\\s*(?:0|' + s[3] + '|auto)\\s*,\\s*(?:0|' + s[3] + '|auto)\\s*,\\s*(?:0|' + s[3] + '|auto)\\s*,\\s*(?:0|' + s[3] + '|auto)\\)|auto|inherit)\\s*$', 'i'), 'color': RegExp('^\\s*(?:' + s[2] + '|inherit)\\s*$', 'i'), 'counter-increment': c[7], 'counter-reset': c[7], 'cue': RegExp('^\\s*(?:(?:' + s[8] + '|none|inherit)(?:\\s*' + s[8] + '|\\s+none|\\s+inherit)?|inherit)\\s*$', 'i'), 'cue-after': c[8], 'cue-before': c[8], 'cursor': RegExp('^\\s*(?:(?:\\s*' + s[8] + '\\s*,)*\\s*(?:auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)|\\s*inherit)\\s*$', 'i'), 'direction': /^\s*(?:ltr|rtl|inherit)\s*$/i, 'display': /^\s*(?:inline|block|list-item|run-in|inline-block|table|inline-table|table-row-group|table-header-group|table-footer-group|table-row|table-column-group|table-column|table-cell|table-caption|none|inherit|-moz-inline-box|-moz-inline-stack)\s*$/i, 'elevation': /^\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|below|level|above|higher|lower|inherit)\s*$/i, 'empty-cells': /^\s*(?:show|hide|inherit)\s*$/i, 'filter': RegExp('^\\s*(?:\\s*alpha\\(\\s*opacity\\s*=\\s*(?:0|' + s[6] + '|[+\\-]?\\d+(?:\\.\\d+)?)\\))+\\s*$', 'i'), 'float': /^\s*(?:left|right|none|inherit)\s*$/i, 'font': RegExp('^\\s*(?:(?:normal|italic|oblique|inherit|small-caps|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)(?:\\s+(?:normal|italic|oblique|inherit|small-caps|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)){0,2}\\s+(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|' + s[4] + '|' + s[7] + '|inherit)(?:\\s*\\/\\s*(?:normal|0|\\d+(?:\\.\\d+)?|' + s[4] + '|' + s[7] + '|inherit))?(?:(?:\\s*\"\\w(?:[\\w-]*\\w)(?:\\s+\\w([\\w-]*\\w))*\"|\\s+(?:serif|sans-serif|cursive|fantasy|monospace))(?:\\s*,\\s*(?:\"\\w(?:[\\w-]*\\w)(?:\\s+\\w([\\w-]*\\w))*\"|serif|sans-serif|cursive|fantasy|monospace))*|\\s+inherit)|caption|icon|menu|message-box|small-caption|status-bar|inherit)\\s*$', 'i'), 'font-family': /^\s*(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)(?:\s*,\s*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace))*|inherit)\s*$/i, 'font-size': RegExp('^\\s*(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|' + s[4] + '|' + s[7] + '|inherit)\\s*$', 'i'), 'font-stretch': /^\s*(?:normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded)\s*$/i, 'font-style': /^\s*(?:normal|italic|oblique|inherit)\s*$/i, 'font-variant': /^\s*(?:normal|small-caps|inherit)\s*$/i, 'font-weight': /^\s*(?:normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)\s*$/i, 'height': c[9], 'left': c[9], 'letter-spacing': c[21], 'line-height': RegExp('^\\s*(?:normal|0|\\d+(?:\\.\\d+)?|' + s[4] + '|' + s[7] + '|inherit)\\s*$', 'i'), 'list-style': RegExp('^\\s*(?:(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit|inside|outside|' + s[8] + ')(?:\\s+(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit)|\\s+(?:inside|outside|inherit)|\\s*' + s[8] + '|\\s+none|\\s+inherit){0,2}|inherit)\\s*$', 'i'), 'list-style-image': c[8], 'list-style-position': /^\s*(?:inside|outside|inherit)\s*$/i, 'list-style-type': /^\s*(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit)\s*$/i, 'margin': RegExp('^\\s*(?:(?:0|' + s[3] + '|' + s[6] + '|auto)(?:\\s+(?:0|' + s[3] + '|' + s[6] + '|auto)){0,4}|inherit)\\s*$', 'i'), 'margin-bottom': c[9], 'margin-left': c[9], 'margin-right': c[9], 'margin-top': c[9], 'max-height': c[10], 'max-width': c[10], 'min-height': c[11], 'min-width': c[11], 'opacity': c[12], 'outline': c[13], 'outline-color': c[14], 'outline-style': c[4], 'outline-width': c[5], 'overflow': /^\s*(?:visible|hidden|scroll|auto|inherit)\s*$/i, 'overflow-x': c[15], 'overflow-y': c[15], 'padding': RegExp('^\\s*(?:(?:\\s*(?:0|' + s[4] + '|' + s[7] + ')){1,4}|\\s*inherit)\\s*$', 'i'), 'padding-bottom': c[16], 'padding-left': c[16], 'padding-right': c[16], 'padding-top': c[16], 'page-break-after': c[17], 'page-break-before': c[17], 'page-break-inside': /^\s*(?:avoid|auto|inherit)\s*$/i, 'pause': RegExp('^\\s*(?:(?:\\s*(?:0|[+\\-]?\\d+(?:\\.\\d+)?m?s|' + s[6] + ')){1,2}|\\s*inherit)\\s*$', 'i'), 'pause-after': c[18], 'pause-before': c[18], 'pitch': /^\s*(?:0|\d+(?:\.\d+)?k?Hz|x-low|low|medium|high|x-high|inherit)\s*$/i, 'pitch-range': c[19], 'play-during': RegExp('^\\s*(?:' + s[8] + '\\s*(?:mix|repeat)(?:\\s+(?:mix|repeat))?|auto|none|inherit)\\s*$', 'i'), 'position': /^\s*(?:static|relative|absolute|inherit)\s*$/i, 'quotes': c[7], 'richness': c[19], 'right': c[9], 'speak': /^\s*(?:normal|none|spell-out|inherit)\s*$/i, 'speak-header': /^\s*(?:once|always|inherit)\s*$/i, 'speak-numeral': /^\s*(?:digits|continuous|inherit)\s*$/i, 'speak-punctuation': /^\s*(?:code|none|inherit)\s*$/i, 'speech-rate': /^\s*(?:0|[+\-]?\d+(?:\.\d+)?|x-slow|slow|medium|fast|x-fast|faster|slower|inherit)\s*$/i, 'stress': c[19], 'table-layout': /^\s*(?:auto|fixed|inherit)\s*$/i, 'text-align': /^\s*(?:left|right|center|justify|inherit)\s*$/i, 'text-decoration': /^\s*(?:none|(?:underline|overline|line-through|blink)(?:\s+(?:underline|overline|line-through|blink)){0,3}|inherit)\s*$/i, 'text-indent': RegExp('^\\s*(?:0|' + s[3] + '|' + s[6] + '|inherit)\\s*$', 'i'), 'text-overflow': c[20], 'text-shadow': c[2], 'text-transform': /^\s*(?:capitalize|uppercase|lowercase|none|inherit)\s*$/i, 'text-wrap': /^\s*(?:normal|unrestricted|none|suppress)\s*$/i, 'top': c[9], 'unicode-bidi': /^\s*(?:normal|embed|bidi-override|inherit)\s*$/i, 'vertical-align': RegExp('^\\s*(?:baseline|sub|super|top|text-top|middle|bottom|text-bottom|0|' + s[6] + '|' + s[3] + '|inherit)\\s*$', 'i'), 'visibility': /^\s*(?:visible|hidden|collapse|inherit)\s*$/i, 'voice-family': /^\s*(?:(?:\s*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)\s*,)*\s*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)|\s*inherit)\s*$/i, 'volume': RegExp('^\\s*(?:0|\\d+(?:\\.\\d+)?|' + s[7] + '|silent|x-soft|soft|medium|loud|x-loud|inherit)\\s*$', 'i'), 'white-space': /^\s*(?:normal|pre|nowrap|pre-wrap|pre-line|inherit|-o-pre-wrap|-moz-pre-wrap|-pre-wrap)\s*$/i, 'width': RegExp('^\\s*(?:0|' + s[4] + '|' + s[7] + '|auto|inherit)\\s*$', 'i'), 'word-spacing': c[21], 'word-wrap': /^\s*(?:normal|break-word)\s*$/i, 'z-index': /^\s*(?:auto|-?\d+|inherit)\s*$/i, 'zoom': RegExp('^\\s*(?:normal|0|\\d+(?:\\.\\d+)?|' + s[7] + ')\\s*$', 'i')}
	})(), 'alternates': {'MozBoxShadow': ['boxShadow'], 'WebkitBoxShadow': ['boxShadow'], 'float': ['cssFloat', 'styleFloat']}, 'HISTORY_INSENSITIVE_STYLE_WHITELIST': {'display': true, 'filter': true, 'float': true, 'height': true, 'left': true, 'opacity': true, 'overflow': true, 'position': true, 'right': true, 'top': true, 'visibility': true, 'width': true, 'padding-left': true, 'padding-right': true, 'padding-top': true, 'padding-bottom': true}}, html, html4;
	html4 = {}, html4
			.atype = {'NONE': 0, 'URI': 1, 'URI_FRAGMENT': 11, 'SCRIPT': 2, 'STYLE': 3, 'ID': 4, 'IDREF': 5, 'IDREFS': 6, 'GLOBAL_NAME': 7, 'LOCAL_NAME': 8, 'CLASSES': 9, 'FRAME_TARGET': 10}, html4
			.ATTRIBS = {'*::class': 9, '*::dir': 0, '*::id': 4, '*::lang': 0, '*::onclick': 2, '*::ondblclick': 2, '*::onkeydown': 2, '*::onkeypress': 2, '*::onkeyup': 2, '*::onload': 2, '*::onmousedown': 2, '*::onmousemove': 2, '*::onmouseout': 2, '*::onmouseover': 2, '*::onmouseup': 2, '*::style': 3, '*::title': 0, 'a::accesskey': 0, 'a::coords': 0, 'a::href': 1, 'a::hreflang': 0, 'a::name': 7, 'a::onblur': 2, 'a::onfocus': 2, 'a::rel': 0, 'a::rev': 0, 'a::shape': 0, 'a::tabindex': 0, 'a::target': 10, 'a::type': 0, 'area::accesskey': 0, 'area::alt': 0, 'area::coords': 0, 'area::href': 1, 'area::nohref': 0, 'area::onblur': 2, 'area::onfocus': 2, 'area::shape': 0, 'area::tabindex': 0, 'area::target': 10, 'bdo::dir': 0, 'blockquote::cite': 1, 'br::clear': 0, 'button::accesskey': 0, 'button::disabled': 0, 'button::name': 8, 'button::onblur': 2, 'button::onfocus': 2, 'button::tabindex': 0, 'button::type': 0, 'button::value': 0, 'caption::align': 0, 'col::align': 0, 'col::char': 0, 'col::charoff': 0, 'col::span': 0, 'col::valign': 0, 'col::width': 0, 'colgroup::align': 0, 'colgroup::char': 0, 'colgroup::charoff': 0, 'colgroup::span': 0, 'colgroup::valign': 0, 'colgroup::width': 0, 'del::cite': 1, 'del::datetime': 0, 'dir::compact': 0, 'div::align': 0, 'dl::compact': 0, 'font::color': 0, 'font::face': 0, 'font::size': 0, 'form::accept': 0, 'form::action': 1, 'form::autocomplete': 0, 'form::enctype': 0, 'form::method': 0, 'form::name': 7, 'form::onreset': 2, 'form::onsubmit': 2, 'form::target': 10, 'h1::align': 0, 'h2::align': 0, 'h3::align': 0, 'h4::align': 0, 'h5::align': 0, 'h6::align': 0, 'hr::align': 0, 'hr::noshade': 0, 'hr::size': 0, 'hr::width': 0, 'iframe::align': 0, 'iframe::frameborder': 0, 'iframe::height': 0, 'iframe::marginheight': 0, 'iframe::marginwidth': 0, 'iframe::width': 0, 'img::align': 0, 'img::alt': 0, 'img::border': 0, 'img::height': 0, 'img::hspace': 0, 'img::ismap': 0, 'img::name': 7, 'img::src': 1, 'img::usemap': 11, 'img::vspace': 0, 'img::width': 0, 'input::accept': 0, 'input::accesskey': 0, 'input::align': 0, 'input::alt': 0, 'input::autocomplete': 0, 'input::checked': 0, 'input::disabled': 0, 'input::ismap': 0, 'input::maxlength': 0, 'input::name': 8, 'input::onblur': 2, 'input::onchange': 2, 'input::onfocus': 2, 'input::onselect': 2, 'input::readonly': 0, 'input::size': 0, 'input::src': 1, 'input::tabindex': 0, 'input::type': 0, 'input::usemap': 11, 'input::value': 0, 'ins::cite': 1, 'ins::datetime': 0, 'label::accesskey': 0, 'label::for': 5, 'label::onblur': 2, 'label::onfocus': 2, 'legend::accesskey': 0, 'legend::align': 0, 'li::type': 0, 'li::value': 0, 'map::name': 7, 'menu::compact': 0, 'ol::compact': 0, 'ol::start': 0, 'ol::type': 0, 'optgroup::disabled': 0, 'optgroup::label': 0, 'option::disabled': 0, 'option::label': 0, 'option::selected': 0, 'option::value': 0, 'p::align': 0, 'pre::width': 0, 'q::cite': 1, 'select::disabled': 0, 'select::multiple': 0, 'select::name': 8, 'select::onblur': 2, 'select::onchange': 2, 'select::onfocus': 2, 'select::size': 0, 'select::tabindex': 0, 'table::align': 0, 'table::bgcolor': 0, 'table::border': 0, 'table::cellpadding': 0, 'table::cellspacing': 0, 'table::frame': 0, 'table::rules': 0, 'table::summary': 0, 'table::width': 0, 'tbody::align': 0, 'tbody::char': 0, 'tbody::charoff': 0, 'tbody::valign': 0, 'td::abbr': 0, 'td::align': 0, 'td::axis': 0, 'td::bgcolor': 0, 'td::char': 0, 'td::charoff': 0, 'td::colspan': 0, 'td::headers': 6, 'td::height': 0, 'td::nowrap': 0, 'td::rowspan': 0, 'td::scope': 0, 'td::valign': 0, 'td::width': 0, 'textarea::accesskey': 0, 'textarea::cols': 0, 'textarea::disabled': 0, 'textarea::name': 8, 'textarea::onblur': 2, 'textarea::onchange': 2, 'textarea::onfocus': 2, 'textarea::onselect': 2, 'textarea::readonly': 0, 'textarea::rows': 0, 'textarea::tabindex': 0, 'tfoot::align': 0, 'tfoot::char': 0, 'tfoot::charoff': 0, 'tfoot::valign': 0, 'th::abbr': 0, 'th::align': 0, 'th::axis': 0, 'th::bgcolor': 0, 'th::char': 0, 'th::charoff': 0, 'th::colspan': 0, 'th::headers': 6, 'th::height': 0, 'th::nowrap': 0, 'th::rowspan': 0, 'th::scope': 0, 'th::valign': 0, 'th::width': 0, 'thead::align': 0, 'thead::char': 0, 'thead::charoff': 0, 'thead::valign': 0, 'tr::align': 0, 'tr::bgcolor': 0, 'tr::char': 0, 'tr::charoff': 0, 'tr::valign': 0, 'ul::compact': 0, 'ul::type': 0}, html4
			.eflags = {'OPTIONAL_ENDTAG': 1, 'EMPTY': 2, 'CDATA': 4, 'RCDATA': 8, 'UNSAFE': 16, 'FOLDABLE': 32, 'SCRIPT': 64, 'STYLE': 128}, html4
			.ELEMENTS = {'a': 0, 'abbr': 0, 'acronym': 0, 'address': 0, 'applet': 16, 'area': 2, 'b': 0, 'base': 18, 'basefont': 18, 'bdo': 0, 'big': 0, 'blockquote': 0, 'body': 49, 'br': 2, 'button': 0, 'caption': 0, 'center': 0, 'cite': 0, 'code': 0, 'col': 2, 'colgroup': 1, 'dd': 1, 'del': 0, 'dfn': 0, 'dir': 0, 'div': 0, 'dl': 0, 'dt': 1, 'em': 0, 'fieldset': 0, 'font': 0, 'form': 0, 'frame': 18, 'frameset': 16, 'h1': 0, 'h2': 0, 'h3': 0, 'h4': 0, 'h5': 0, 'h6': 0, 'head': 49, 'hr': 2, 'html': 49, 'i': 0, 'iframe': 4, 'img': 2, 'input': 2, 'ins': 0, 'isindex': 18, 'kbd': 0, 'label': 0, 'legend': 0, 'li': 1, 'link': 18, 'map': 0, 'menu': 0, 'meta': 18, 'noframes': 20, 'noscript': 20, 'object': 16, 'ol': 0, 'optgroup': 0, 'option': 1, 'p': 1, 'param': 18, 'pre': 0, 'q': 0, 's': 0, 'samp': 0, 'script': 84, 'select': 0, 'small': 0, 'span': 0, 'strike': 0, 'strong': 0, 'style': 148, 'sub': 0, 'sup': 0, 'table': 0, 'tbody': 1, 'td': 1, 'textarea': 8, 'tfoot': 1, 'th': 1, 'thead': 1, 'title': 24, 'tr': 1, 'tt': 0, 'u': 0, 'ul': 0, 'var': 0}, html = (function () {
		var
				ENTITIES, INSIDE_TAG_TOKEN, OUTSIDE_TAG_TOKEN, ampRe, decimalEscapeRe, entityRe, eqRe, gtRe, hexEscapeRe, lcase, looseAmpRe, ltRe, nulRe, quotRe;
		'script' === 'SCRIPT'.toLowerCase() ? (lcase = function (s) {
			return s.toLowerCase()
		}) : (lcase = function (s) {
			return s.replace(/[A-Z]/g, function (ch) {
				return String.fromCharCode(ch.charCodeAt(0) | 32)
			})
		}), ENTITIES = {'lt': '<', 'gt': '>', 'amp': '&', 'nbsp': '\xa0', 'quot': '\"', 'apos': '\''}, decimalEscapeRe = /^#(\d+)$/, hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;
		function
				lookupEntity(name) {
			var m;
			return name = lcase(name), ENTITIES.hasOwnProperty(name) ? ENTITIES[name] : (m = name.match(decimalEscapeRe), m ? String.fromCharCode(parseInt(m[1], 10)) : (m = name.match(hexEscapeRe)) ? String.fromCharCode(parseInt(m[1], 16)) : '')
		}

		function
				decodeOneEntity(_, name) {
			return lookupEntity(name)
		}

		nulRe = /\0/g;
		function stripNULs(s) {
			return s.replace(nulRe, '')
		}

		entityRe = /&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;
		function
				unescapeEntities(s) {
			return s.replace(entityRe, decodeOneEntity)
		}

		ampRe = /&/g, looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi, ltRe = /</g, gtRe = />/g, quotRe = /\"/g, eqRe = /\=/g;
		function
				escapeAttrib(s) {
			return s.replace(ampRe, '&amp;').replace(ltRe, '&lt;').replace(gtRe, '&gt;').replace(quotRe, '&#34;').replace(eqRe, '&#61;')
		}

		function
				normalizeRCData(rcdata) {
			return rcdata.replace(looseAmpRe, '&amp;$1').replace(ltRe, '&lt;').replace(gtRe, '&gt;')
		}

		INSIDE_TAG_TOKEN = new
				RegExp('^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|\'[^\']*\'|(?=[a-z][a-z-]*\\s*=)|[^>\"\'\\s]*))?)|(/?>)|.[^a-z\\s>]*)', 'i'), OUTSIDE_TAG_TOKEN = new
				RegExp('^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?--> | < !\\w[ ^
		>]*>|<\\? [ ^
		>*]*>|<
		(/)
		? ([a - z][a - z0 - 9] *) | ([ ^ < &
		>]
		+
		)|
		([ < & >
		]))
		','
		i
		');function
		makeSaxParser(handler)
		{
			return function parse(htmlText, param) {
				var attribName, attribs, dataEnd, decodedValue, eflags, encodedValue, htmlLower, inTag, m, openTag, tagName;
				htmlText = String(htmlText), htmlLower = null, inTag = false, attribs = [], tagName = void
						0, eflags = void 0, openTag = void 0, handler.startDoc && handler.startDoc(param);
				while (htmlText) {
					m = htmlText.match(inTag ? INSIDE_TAG_TOKEN : OUTSIDE_TAG_TOKEN), htmlText = htmlText.substring(m[0].length);
					if (inTag) {
						if (m[1]) {
							attribName = lcase(m[1]);
							if (m[2]) {
								encodedValue = m[3];
								switch (encodedValue.charCodeAt(0)) {
									case
									34:
									case 39:
										encodedValue = encodedValue.substring(1, encodedValue.length - 1)
								}
								decodedValue = unescapeEntities(stripNULs(encodedValue))
							} else
								decodedValue = attribName;
							attribs.push(attribName, decodedValue)
						} else if (m[4])eflags !== void
								0 && (openTag ? handler.startTag && handler.startTag(tagName, attribs, param) : handler.endTag && handler.endTag(tagName, param)), openTag && eflags & (html4
								.eflags.CDATA | html4.eflags.RCDATA) && (htmlLower === null ? (htmlLower = lcase(htmlText)) : (htmlLower = htmlLower.substring(htmlLower.length - htmlText.length)), dataEnd = htmlLower.indexOf('</' + tagName), dataEnd < 0 && (dataEnd = htmlText.length), eflags & html4
								.eflags.CDATA ? handler.cdata && handler.cdata(htmlText.substring(0, dataEnd), param) : handler.rcdata && handler.rcdata(normalizeRCData(htmlText.substring(0, dataEnd)), param), htmlText = htmlText.substring(dataEnd)), tagName = eflags = openTag = void
								0, attribs.length = 0, inTag = false
					} else if (m[1])handler.pcdata && handler.pcdata(m[0], param); else if (m[3])openTag = !m[2], inTag = true, tagName = lcase(m[3]), eflags = html4.ELEMENTS.hasOwnProperty(tagName) ? html4
							.ELEMENTS[tagName] : void 0; else if (m[4])handler.pcdata && handler.pcdata(m[4], param); else if (m[5]) {
						if (handler.pcdata)switch (m[5]) {
							case'<':
								handler.pcdata('&lt;', param);
								break;
							case'>':
								handler.pcdata('&gt;', param);
								break;
							default:
								handler.pcdata('&amp;', param)
						}
					}
				}
				handler.endDoc && handler.endDoc(param)
			}
		}
		return{'normalizeRCData': normalizeRCData, 'escapeAttrib': escapeAttrib, 'unescapeEntities': unescapeEntities, 'makeSaxParser': makeSaxParser}
	})(), html.makeHtmlSanitizer = function (sanitizeAttributes) {
		var
				ignoring, stack;
		return html.makeSaxParser({'startDoc': function (_) {
			stack = [], ignoring = false
		}, 'startTag': function (tagName, attribs, out) {
			var
					attribName, eflags, i, n, value;
			if (ignoring)return;
			if (!html4.ELEMENTS.hasOwnProperty(tagName))return;
			eflags = html4
					.ELEMENTS[tagName];
			if (eflags & html4.eflags.FOLDABLE)return; else if (eflags & html4.eflags.UNSAFE)return ignoring = !(eflags & html4
					.eflags.EMPTY), void 0;
			attribs = sanitizeAttributes(tagName, attribs);
			if (attribs) {
				eflags & html4
						.eflags.EMPTY || stack.push(tagName), out.push('<', tagName);
				for (i = 0, n = attribs.length; i < n; i += 2)attribName = attribs[i], value = attribs[i + 1], value !== null && value !== void
						0 && out.push(' ', attribName, '=\"', html.escapeAttrib(value), '\"');
				out.push('>')
			}
		}, 'endTag': function (tagName, out) {
			var
					eflags, i, index, stackEl;
			if (ignoring)return ignoring = false, void 0;
			if (!html4.ELEMENTS.hasOwnProperty(tagName))return;
			eflags = html4
					.ELEMENTS[tagName];
			if (!(eflags & (html4.eflags.UNSAFE | html4.eflags.EMPTY | html4.eflags.FOLDABLE))) {
				if (eflags & html4
						.eflags.OPTIONAL_ENDTAG)for (index = stack.length; --index >= 0;) {
					stackEl = stack[index];
					if (stackEl === tagName)break;
					if (!(html4
							.ELEMENTS[stackEl] & html4.eflags.OPTIONAL_ENDTAG))return
				} else for (index = stack.length; --index >= 0;)if (stack[index] === tagName)break;
				if (index < 0)return;
				for (i = stack.length; --i > index;)stackEl = stack[i], html4
						.ELEMENTS[stackEl] & html4.eflags.OPTIONAL_ENDTAG || out.push('</', stackEl, '>');
				stack.length = index, out.push('</', tagName, '>')
			}
		}, 'pcdata': function (text, out) {
			ignoring || out.push(text)
		}, 'rcdata': function (text, out) {
			ignoring || out.push(text)
		}, 'cdata': function (text, out) {
			ignoring || out.push(text)
		}, 'endDoc': function (out) {
			var
					i;
			for (i = stack.length; --i >= 0;)out.push('</', stack[i], '>');
			stack.length = 0
		}})
	};
	function
			html_sanitize(htmlText, opt_uriPolicy, opt_nmTokenPolicy) {
		var out = [];
		return html.makeHtmlSanitizer(function
				sanitizeAttribs(tagName, attribs) {
			var attribKey, attribName, atype, i, value;
			for (i = 0; i < attribs.length; i += 2) {
				attribName = attribs[i], value = attribs[i + 1], atype = null, ((attribKey = tagName + '::' + attribName, html4
						.ATTRIBS.hasOwnProperty(attribKey)) || (attribKey = '*::' + attribName, html4.ATTRIBS.hasOwnProperty(attribKey))) && (atype = html4
						.ATTRIBS[attribKey]);
				if (atype !== null)switch (atype) {
					case html4.atype.NONE:
						break;
					case
					html4.atype.SCRIPT:
					case html4.atype.STYLE:
						value = null;
						break;
					case html4.atype.ID:
					case
					html4.atype.IDREF:
					case html4.atype.IDREFS:
					case html4.atype.GLOBAL_NAME:
					case html4
							.atype.LOCAL_NAME:
					case html4.atype.CLASSES:
						value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;
						break;
					case
					html4.atype.URI:
						value = opt_uriPolicy && opt_uriPolicy(value);
						break;
					case html4.atype.URI_FRAGMENT:
						value && '#' === value.charAt(0) ? (value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value, value && (value = '#' + value)) : (value = null);
						break;
					default:
						value = null
				} else
					value = null;
				attribs[i + 1] = value
			}
			return attribs
		})(htmlText, out), out.join('')
	}
}
;
gadgets.views = function () {
	var E = null;
	var B = {};
	var D = {};

	function A(H) {
		if (!H) {
			H = window.event
		}
		var G;
		if (H.target) {
			G = H.target
		} else {
			if (H.srcElement) {
				G = H.srcElement
			}
		}
		if (G.nodeType === 3) {
			G = G.parentNode
		}
		if (G.nodeName.toLowerCase() === "a") {
			var F = G.getAttribute("href");
			if (F && F[0] !== "#" && F.indexOf("://") === -1) {
				gadgets.views.requestNavigateTo(E, F);
				if (H.stopPropagation) {
					H.stopPropagation()
				}
				if (H.preventDefault) {
					H.preventDefault()
				}
				H.returnValue = false;
				H.cancelBubble = true;
				return false
			}
		}
		return false
	}

	function C(I) {
		var H = I.views || {};
		for (var L in H) {
			if (H.hasOwnProperty(L)) {
				if (L != "rewriteLinks") {
					var M = H[L];
					if (!M) {
						continue
					}
					B[L] = new gadgets.views.View(L, M.isOnlyVisible);
					var F = M.aliases || [];
					for (var K = 0, J;
						 (J = F[K]);
						 ++K) {
						B[J] = new gadgets.views.View(L, M.isOnlyVisible)
					}
				}
			}
		}
		var G = gadgets.util.getUrlParameters();
		if (G["view-params"]) {
			D = gadgets.json.parse(G["view-params"]) || D
		}
		E = B[G.view] || B["default"];
		if (H.rewriteLinks) {
			gadgets.util.attachBrowserEvent(document, "click", A, false)
		}
	}

	gadgets.config.register("views", null, C);
	return{bind: function (W, U) {
		if (typeof W !== "string") {
			throw new Error("Invalid urlTemplate")
		}
		if (typeof U !== "object") {
			throw new Error("Invalid environment")
		}
		var R = /^([a-zA-Z0-9][a-zA-Z0-9_\.\-]*)(=([a-zA-Z0-9\-\._~]|(%[0-9a-fA-F]{2}))*)?$/, Y = new RegExp("\\{([^}]*)\\}", "g"), V = /^-([a-zA-Z]+)\|([^|]*)\|(.+)$/, M = [], Q = 0, K, J, H, P, L, G, N, S;

		function I(a, Z) {
			return U.hasOwnProperty(a) ? U[a] : Z
		}

		function F(Z) {
			if (!(J = Z.match(R))) {
				throw new Error("Invalid variable : " + Z)
			}
		}

		function X(d, Z, c) {
			var a, b = d.split(",");
			for (a = 0;
				 a < b.length;
				 ++a) {
				F(b[a]);
				if (c(Z, I(J[1]), J[1])) {
					break
				}
			}
			return Z
		}

		function T(Z) {
			if ((typeof Z === "object") || (typeof Z === "function")) {
				for (var a in Z) {
					if (Z.hasOwnProperty(a)) {
						return false
					}
				}
				return true
			}
			return false
		}

		while ((K = Y.exec(W))) {
			M.push(W.substring(Q, K.index));
			Q = Y.lastIndex;
			if ((J = K[1].match(R))) {
				H = J[1];
				P = J[2] ? J[2].substr(1) : "";
				M.push(I(H, P))
			} else {
				if ((J = K[1].match(V))) {
					L = J[1];
					G = J[2];
					N = J[3];
					S = 0;
					switch (L) {
						case"neg":
							S = 1;
						case"opt":
							if (X(N, {flag: S},function (a, Z) {
								if (typeof Z !== "undefined" && !T(Z)) {
									a.flag = !a.flag;
									return 1
								}
								return 0
							}).flag) {
								M.push(G)
							}
							break;
						case"join":
							M.push(X(N, [],function (b, a, Z) {
								if (typeof a === "string") {
									b.push(Z + "=" + a)
								} else {
									if (typeof a === "object") {
										for (var c in a) {
											if (a.hasOwnProperty(c)) {
												b.push(c + "=" + a[c])
											}
										}
									}
								}
							}).join(G));
							break;
						case"list":
							F(N);
							var O = I(J[1]);
							if (typeof O === "object" && typeof O.join === "function") {
								M.push(O.join(G))
							}
							break;
						case"prefix":
							S = 1;
						case"suffix":
							F(N);
							O = I(J[1], J[2] && J[2].substr(1));
							if (typeof O === "string") {
								M.push(S ? G + O : O + G)
							} else {
								if (typeof O === "object" && typeof O.join === "function") {
									M.push(S ? G + O.join(G) : O.join(G) + G)
								}
							}
							break;
						default:
							throw new Error("Invalid operator : " + L)
					}
				} else {
					throw new Error("Invalid syntax : " + K[0])
				}
			}
		}
		M.push(W.substr(Q));
		return M.join("")
	}, requestNavigateTo: function (F, H, G) {
		if (typeof F !== "string") {
			F = F.getName()
		}
		gadgets.rpc.call(null, "requestNavigateTo", null, F, H, G)
	}, getCurrentView: function () {
		return E
	}, getSupportedViews: function () {
		return B
	}, getParams: function () {
		return D
	}}
}();
gadgets.views.View = function (A, B) {
	this.name_ = A;
	this.isOnlyVisible_ = !!B
};
gadgets.views.View.prototype.getName = function () {
	return this.name_
};
gadgets.views.View.prototype.getUrlTemplate = function () {
	return gadgets.config && gadgets.config.views && gadgets.config.views[this.name_] && gadgets.config.views[this.name_].urlTemplate
};
gadgets.views.View.prototype.bind = function (A) {
	return gadgets.views.bind(this.getUrlTemplate(), A)
};
gadgets.views.View.prototype.isOnlyVisibleGadget = function () {
	return this.isOnlyVisible_
};
gadgets.views.ViewType = gadgets.util.makeEnum(["CANVAS", "HOME", "PREVIEW", "PROFILE", "FULL_PAGE", "DASHBOARD", "POPUP"]);
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistCtors([
		[gadgets.views, "View", Object]
	]);
	caja___.whitelistMeths([
		[gadgets.views.View, "bind"],
		[gadgets.views.View, "getUrlTemplate"],
		[gadgets.views.View, "isOnlyVisibleGadget"],
		[gadgets.views.View, "getName"]
	]);
	caja___.whitelistFuncs([
		[gadgets.views, "getCurrentView"],
		[gadgets.views, "getParams"],
		[gadgets.views, "requestNavigateTo"]
	])
});
;
gadgets.window = gadgets.window || {};
(function () {
	gadgets.window.getViewportDimensions = function () {
		var A = 0;
		var B = 0;
		if (self.innerHeight) {
			A = self.innerWidth;
			B = self.innerHeight
		} else {
			if (document.documentElement && document.documentElement.clientHeight) {
				A = document.documentElement.clientWidth;
				B = document.documentElement.clientHeight
			} else {
				if (document.body) {
					A = document.body.clientWidth;
					B = document.body.clientHeight
				}
			}
		}
		return{width: A, height: B}
	}
})();
;
gadgets.window = gadgets.window || {};
(function () {
	var C;

	function A(F, D) {
		var E = window.getComputedStyle(F, "");
		var G = E.getPropertyValue(D);
		G.match(/^([0-9]+)/);
		return parseInt(RegExp.$1, 10)
	}

	function B() {
		var E = 0;
		var D = [document.body];
		while (D.length > 0) {
			var I = D.shift();
			var H = I.childNodes;
			for (var G = 0;
				 G < H.length;
				 G++) {
				var J = H[G];
				if (typeof J.offsetTop !== "undefined" && typeof J.scrollHeight !== "undefined") {
					var F = J.offsetTop + J.scrollHeight + A(J, "margin-bottom");
					E = Math.max(E, F)
				}
				D.push(J)
			}
		}
		return E + A(document.body, "border-bottom") + A(document.body, "margin-bottom") + A(document.body, "padding-bottom")
	}

	gadgets.window.adjustHeight = function (I) {
		var F = parseInt(I, 10);
		var E = false;
		if (isNaN(F)) {
			E = true;
			var K = gadgets.window.getViewportDimensions().height;
			var D = document.body;
			var J = document.documentElement;
			if (document.compatMode === "CSS1Compat" && J.scrollHeight) {
				F = J.scrollHeight !== K ? J.scrollHeight : J.offsetHeight
			} else {
				if (navigator.userAgent.indexOf("AppleWebKit") >= 0) {
					F = B()
				} else {
					if (D && J) {
						var G = J.scrollHeight;
						var H = J.offsetHeight;
						if (J.clientHeight !== H) {
							G = D.scrollHeight;
							H = D.offsetHeight
						}
						if (G > K) {
							F = G > H ? G : H
						} else {
							F = G < H ? G : H
						}
					}
				}
			}
		}
		if (F !== C && !isNaN(F) && !(E && F === 0)) {
			C = F;
			gadgets.rpc.call(null, "resize_iframe", null, F)
		}
	}
}());
var _IG_AdjustIFrameHeight = gadgets.window.adjustHeight;
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistFuncs([
		[gadgets.window, "adjustHeight"],
		[gadgets.window, "getViewportDimensions"]
	])
});
;
gadgets.Prefs.prototype.set = function (D, E) {
	var G = false;
	if (arguments.length > 2) {
		var F = {};
		for (var C = 0, B = arguments.length;
			 C < B;
			 C += 2) {
			F[arguments[C]] = arguments[C + 1]
		}
		G = gadgets.Prefs.setInternal_(F)
	} else {
		G = gadgets.Prefs.setInternal_(D, E)
	}
	if (!G) {
		return
	}
	var A = [null, "set_pref", null, gadgets.util.getUrlParameters().ifpctok || gadgets.util.getUrlParameters().rpctoken || 0].concat(Array.prototype.slice.call(arguments));
	gadgets.rpc.call.apply(gadgets.rpc, A)
};
gadgets.Prefs.prototype.setArray = function (C, D) {
	for (var B = 0, A = D.length;
		 B < A;
		 ++B) {
		if (typeof D[B] !== "number") {
			D[B] = D[B].replace(/\|/g, "%7C")
		}
	}
	this.set(C, D.join("|"))
};
;
gadgets.MiniMessage = function (B, A) {
	this.numMessages_ = 0;
	this.moduleId_ = B || 0;
	this.container_ = typeof A === "object" ? A : this.createContainer_()
};
gadgets.MiniMessage.prototype.createContainer_ = function () {
	var B = "mm_" + this.moduleId_;
	var A = document.getElementById(B);
	if (!A) {
		A = document.createElement("div");
		A.id = B;
		document.body.insertBefore(A, document.body.firstChild)
	}
	return A
};
gadgets.MiniMessage.addCSS_ = function (C) {
	var B = document.getElementsByTagName("head")[0];
	if (B) {
		var A = document.createElement("style");
		A.type = "text/css";
		if (A.styleSheet) {
			A.styleSheet.cssText = C
		} else {
			A.appendChild(document.createTextNode(C))
		}
		B.insertBefore(A, B.firstChild)
	}
};
gadgets.MiniMessage.prototype.cascade_ = function (A) {
	return A + " " + A + this.moduleId_
};
gadgets.MiniMessage.prototype.dismissFunction_ = function (B, A) {
	return function () {
		if (typeof A === "function" && !A()) {
			return
		}
		try {
			B.parentNode.removeChild(B)
		} catch (C) {
		}
	}
};
gadgets.MiniMessage.prototype.createDismissibleMessage = function (D, A) {
	var C = this.createStaticMessage(D);
	var E = document.createElement("td");
	E.width = 10;
	var B = E.appendChild(document.createElement("span"));
	B.className = this.cascade_("mmlib_xlink");
	B.onclick = this.dismissFunction_(C, A);
	B.innerHTML = "[x]";
	C.rows[0].appendChild(E);
	return C
};
gadgets.MiniMessage.prototype.createTimerMessage = function (C, D, A) {
	var B = this.createStaticMessage(C);
	window.setTimeout(this.dismissFunction_(B, A), D * 1000);
	return B
};
gadgets.MiniMessage.prototype.createStaticMessage = function (E) {
	var D = document.createElement("table");
	D.id = "mm_" + this.moduleId_ + "_" + this.numMessages_;
	D.className = this.cascade_("mmlib_table");
	D.cellSpacing = 0;
	D.cellPadding = 0;
	this.numMessages_++;
	var B = D.appendChild(document.createElement("tbody"));
	var F = B.appendChild(document.createElement("tr"));
	var G = F.appendChild(document.createElement("td"));
	var A = 1;
	if (typeof E === "object" && E.parentNode && E.parentNode.nodeType === A) {
		var C = E.cloneNode(true);
		E.style.display = "none";
		C.id = "";
		G.appendChild(C);
		E.parentNode.insertBefore(D, E.nextSibling)
	} else {
		if (typeof E === "object") {
			G.appendChild(E)
		} else {
			G.innerHTML = html_sanitize(E)
		}
		this.container_.appendChild(D)
	}
	return D
};
gadgets.MiniMessage.prototype.dismissMessage = function (A) {
	this.dismissFunction_(A)()
};
gadgets.config.register("minimessage", {}, function (A) {
	gadgets.MiniMessage.addCSS_(A.minimessage.css.join(""))
});
var _IG_MiniMessage = gadgets.MiniMessage;
;
var tamings___ = tamings___ || [];
tamings___.push(function (A) {
	caja___.whitelistCtors([
		[gadgets, "MiniMessage", Object]
	]);
	caja___.whitelistMeths([
		[gadgets.MiniMessage, "createDismissibleMessage"],
		[gadgets.MiniMessage, "createStaticMessage"],
		[gadgets.MiniMessage, "createTimerMessage"],
		[gadgets.MiniMessage, "dismissMessage"]
	])
});
;
gadgets.config.init({"shindig.auth": {}, "osapi": {"endPoints": ["https://%host%/rpc"]}, "osapi.services": {"gadgets.rpc": ["container.listMethods"], "https://%host%/rpc": ["activities.supportedFields", "activities.update", "gadgets.metadata", "activities.delete", "activities.get", "appdata.update", "http.put", "http.post", "gadgets.tokenSupportedFields", "appdata.get", "activities.create", "system.listMethods", "cache.invalidate", "groups.get", "people.supportedFields", "http.get", "http.head", "appdata.delete", "http.delete", "aipo.version", "gadgets.token", "appdata.create", "people.get", "gadgets.supportedFields"]}, "rpc": {"parentRelayUrl": "/gadgets/files/container/rpc_relay.html", "useLegacyProtocol": false}, "views": {"preview": {"isOnlyVisible": false}, "canvas": {"isOnlyVisible": true}, "home": {"aliases": ["default"], "isOnlyVisible": false}, "popup": {"isOnlyVisible": true}}, "core.util": {"views": {}, "dynamic-height": {}, "aipostyle": {}, "setprefs": {}, "osapi": {}, "core": {}, "minimessage": {}}, "minimessage": {"css": [".mmlib_table {", "width:100%;", "margin: 5px 0;", "-webkit-border-radius: 4px;", "-moz-border-radius: 4px;", "-ms-border-radius: 4px;", "border-radius: 4px;", "background: #f0f0f0;", "}", ".mmlib_table td {", "padding: 3px 5px;", "}", ".mmlib_xlink {", "display:block;", "overflow:hidden;", "line-height:50px;", "height:11px;", "width:11px;", "cursor: pointer;", "background:url(../images/common/icon_close_mini.gif) top left no-repeat;", "}"]}, "core.io": {"proxyUrl": "//%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%", "jsonProxyUrl": "//%host%/gadgets/makeRequest"}});
</script>
<script>gadgets.Prefs.setMessages_({});
gadgets.Prefs.setDefaultPrefs_({"p4autoReload": "10", "p2homeRows": "5", "version": "", "p5createActivity": "0"});
gadgets.io.preloaded_ = [];</script>
<style type="text/css">
	table.feedTable {
		border: none;
		padding: 0;
		border-collapse: collapse;
		width: 100%;
		margin-bottom: 10px;
	}

	table.feedTable tr:hover {
		background: #f5f5f5;
	}

	table.feedTable td {
		padding: 3px;
		margin: 0px;
		border-bottom: #f0f0f0 solid 1px;
		vertical-align: top;
	}

	table.feedTable td.icon {
		width: 22px;
		padding: 0;
		text-align: right;
		vertical-align: middle;
	}

	table.feedTable td.name {
		width: 100px;
		font-size: 85%;
		vertical-align: middle;
	}

	table.feedTable td.name {
		width: 70px;
	}

	table.feedTable td span.date {
		font-size: 85%;
		padding: 0px 0 3px;
		display: block;
	}

	table.feedTable tr.unread {
		background: #f0f0f0;
	}

	table.feedTable tr.unread td {
		font-weight: bold;
	}

</style>
</head>
<body dir="ltr">

<div id="mm_0"><table id="mm_0_2" class="mmlib_table mmlib_table0" cellspacing="0" cellpadding="0"><tbody><tr><td>Aipo.comへの新着ツイートが 1 件あります。</td><td width="10"><span class="mmlib_xlink mmlib_xlink0"><i class="icon-remove"></i></span></td></tr></tbody></table></div>

メモ：CSSが適用されていない。

<div id="mm_0">
	<table id="mm_0_2" class="mmlib_table mmlib_table0" cellspacing="0" cellpadding="0">
		<tbody>
		<tr>
			<td>Aipo.comへの新着ツイートが 1 件あります。</td>
			<td width="10">
				<span class="mmlib_xlink mmlib_xlink0"><i class="icon-remove"></i></span>
			</td>
		</tr>
		</tbody>
	</table>
</div>
<div class="aipostyle">
	<h4>テストですよ。</h4>
	<div id="content">
		<table class="feedTable wide">
			<tbody>
			<tr class="unread">
				<td><span class="date">11:03</span><a href="https://twitter.com/joetsuSatoMec/status/453714885201772545" target="_blank">どこかに書き込んだり、何かを更新したときのタイムラインへの反映があったりなかったりしませんか？ Aipo.com</a></td>
			</tr>
			<tr>
				<td><span class="date">10:55</span><a href="https://twitter.com/moving_mountain/status/453712781875769344" target="_blank">サーバ等に 負担を掛けると 遅くなりそうなので、不可の掛からぬ時間帯は ありますか？ Aipo.com</a></td>
			</tr>
			<tr>
				<td><span class="date">09:56</span><a href="https://twitter.com/poff1ce/status/453697920059990016" target="_blank">【ログイン】急にユーザー１人がログインできなくなってしまい、パスワードの再発行を試みてもなぜか登録アドレスにメールが届きません…。ユーザー管理では有効アドレスになっているのですが、考えられる要因がございましたらお教えください！ Aipo.com</a></td>
			</tr>
			<tr>
				<td><span class="date">09:54</span><a href="https://twitter.com/nopopuyo/status/453697466085281792" target="_blank">中長期のプロジェクト管理に便利な使い方ってありますか？　できれば複数プロジェクトの繁閑が一目でわかるような。 Aipo.com</a></td>
			</tr>
			<tr>
				<td><span class="date">09:43</span><a href="https://twitter.com/nopopuyo/status/453694639308935168" target="_blank">Wikiとデータベースのお試しは終了ですか？　ちょっと試してみたいです Aipo.com</a></td>
			</tr>
			</tbody>
		</table>
	</div>
	<div id="formContent" style="display: none;">
		<form action="#" id="form" name="form">
			RSS、Atom フィードの URL を入力してください。
			<table class="wide">
				<tbody>
				<tr>
					<td><input class="text w90" name="feedUrl" type="text" value=""></td>
					<td class="thin"><input name="submit" type="submit" value="保存する"></td>
				</tr>
				</tbody>
			</table>
		</form>
	</div>
</div>
<script type="text/javascript">

var version = "1.0";
var changeLogUrl = "javascript:void(0);";

gadgets.util.registerOnLoadHandler(init);

var msg = new gadgets.MiniMessage();
var staticMsg;
var noticeMsg;
var prefs = new gadgets.Prefs();
var url;
var rows = 5;
var autoReload = 5;
var unread;
var latest;
var viewerId;
var notice = 0;
var isFirst = true;
var activityCount = 0;
var task;

function CronTask(task, interval, isDecay) {
	this.task = task;
	this.isDecay = isDecay;
	this.interval = interval;
	this.decayRate = 1;
	this.decayMultiplier = 1.5;
	this.maxDecayTime = 5 * 60 * 1000; // 3 minutes
}

CronTask.prototype = {

	start: function () {
		this.stop().run();
		return this;
	},

	stop: function () {
		if (this.worker) {
			window.clearTimeout(this.worker);
		}
		return this;
	},

	run: function () {
		var cronTask = this;
		this.task(function () {
			cronTask.decayRate = cronTask.isDecay ? Math.max(1, cronTask.decayRate / cronTask.decayMultiplier) : cronTask.decayRate * cronTask.decayMultiplier;
			var expire = cronTask.interval * cronTask.decayRate;
			if (!cronTask.isDecay) {
				expire = (expire >= cronTask.maxDecayTime) ? cronTask.maxDecayTime : expire;
			}
			expire = Math.floor(expire);
			cronTask.worker = window.setTimeout(
					function () {
						cronTask.run.call(cronTask);
					},
					expire);
		});
	},

	reset: function () {
		this.destroy().run();
		return this;
	},

	destroy: function () {
		this.stop();
		this.decayRate = 1;
		return this;
	}
};

function showMessage(text) {
	if (staticMsg) {
		msg.dismissMessage(staticMsg);
	}
	staticMsg = msg.createStaticMessage(text);
}

function showValidateErrorMessage(text) {
	var timerMsg = msg.createTimerMessage(text, 3, function () {
		msg.dismissMessage(timerMsg);
		gadgets.window.adjustHeight();
	});
	gadgets.window.adjustHeight();
}

function stripTags(text) {
	return  text.replace(/<\/?[^>]+>/gi, '');
}

function splitBytes(src, len) {
	var re = [/[\u0000-\u007F]/g, /[\u0080-\u07FF]/g, /[\u0800-\uFFFF]/g]
	var enc = src;
	for (var i = 0; i < re.length; i++) {
		enc = enc.replace(re[i], Math.pow(10, i));
	}
	var startSrc = 0, startEnc = 0, tmp, splitLen, rslt = [];

	while (startSrc != src.length) {
		tmp = enc.substr(startEnc, len + 1);
		if (tmp.length > len) tmp = tmp.replace(/10*$/, "");
		startEnc += tmp.length;
		splitLen = tmp.replace(/0+/g, "").length;
		rslt.push(src.substr(startSrc, splitLen));
		startSrc += splitLen;
	}
	return rslt;
}

function formatDate(date) {
	var currentDate = new Date();
	var result = "";
	if (currentDate.getYear() == date.getYear() && currentDate.getMonth() == date.getMonth() && currentDate.getDate() == date.getDate()) {
		return  ("0" + date.getHours()).slice(-2) + ":" + ("0" + date.getMinutes()).slice(-2);
	} else {
		return date.getMonth() + 1 + "月" + date.getDate() + "日";
	}
}

function fetchViewer() {
	var callback = function (response) {
		viewerId = response.viewer.id;

		if (autoReload == 0) {
			fetchFeed();
		} else {
			if (task) {
				task.destroy();
			}
			task = new CronTask(fetchFeed, autoReload * 60 * 1000, true);
			task.start();
		}
	};
	var batch = osapi.newBatch()
			.add('viewer', osapi.people.getViewer());
	batch.execute(callback);
}

function createActivity(count, title) {
	var callback = function (response) {
		if (response.error) {
			msg.createTimerMessage("アクティビティの送信に失敗しました。", 5);
		} else {
			activityCount = count;
		}
	};
	var activity = {};
	var split = splitBytes("新着記事が " + count + " 件あります。(" + title + ")", 60);
	activity['title'] = split[0];
	if (split.length > 1) {
		activity['title'] += '...)';
	}
	activity['priority'] = 1;
	activity['externalId'] = '40936.unread';
	activity['recipients'] = [ viewerId ];
	osapi.activities.create({
		userId: '@viewer', activity: activity
	}).execute(callback);
}

function fetchFeed(decay) {
	document.getElementById("formContent").style.display = "none";
	var callback = function (response) {
		if (response.rc == 200) {
			if (staticMsg) {
				msg.dismissMessage(staticMsg);
			}
			var entries = response.data.Entry;
			var html = new Array();

			if (entries.length == 0) {
				html.push('ツイートがありません。');
			} else {
				html.push('<table class="feedTable wide">');
			}
			var count = 0;
			var isRead = isFirst;
			for (var i in entries) {
				var entry = entries[i];
				var currentId = entry.Date;
				if (i == 0) {
					latest = entry.Date;
				}
				if (currentId == unread) {
					isRead = true;
				}
				if (!isRead && currentId != unread) {
					count++;
				}
				var date = new Date();
				date.setTime(entry.Date);
				if (isRead) {
					html.push('<tr><td>');
				} else {
					html.push('<tr class="unread"><td>');
				}
				html.push('<span class="date">' + formatDate(date) + '</span>');
				if (entry.Link != "") {
					html.push('<a href="' + entry.Link + '" target="_blank">' + stripTags(entry.Title) + "</a></td>");
				} else {
					html.push('<span>' + stripTags(entry.Title) + "</span></td>");
				}
				html.push('</td></tr>');
			}
			if (entries.length > 0) {
				html.push('</table>');
			}
			document.getElementById('content').innerHTML = html.join('');
			if (count > 0) {
				if (noticeMsg) {
					msg.dismissMessage(noticeMsg);
				}
				if (!isFirst) {
					noticeMsg = msg.createDismissibleMessage("Aipo.comへの新着ツイートが " + count + " 件あります。", function () {
						unread = latest;
						if (noticeMsg) {
							msg.dismissMessage(noticeMsg);
						}
						fetchFeed();
					});
					if (notice == 1) {
						if (count > activityCount) {
							createActivity(count, gadgets.util.escapeString(response.data.Title));
						}
					}
				} else {
					unread = latest;
				}
			} else {
				unread = latest;
			}
			isFirst = false;
		} else {
			showMessage("フィードの読み込みに失敗しました。")
			initForm();
		}
		gadgets.window.adjustHeight();
		if (decay) {
			decay();
		}
	};
	var params = {};
	params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.FEED;
	params[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.NONE;
	params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.GET;
	params[gadgets.io.RequestParameters.NUM_ENTRIES] = rows;
	params[gadgets.io.RequestParameters.GET_SUMMARIES] = false;

	var ts = new Date().getTime();
	var sep = "?";
	var refreshInterval = autoReload * 60;
	if (refreshInterval && refreshInterval > 0) {
		ts = Math.floor(ts / (refreshInterval * 1000));
	}
	if (url.indexOf("?") > -1) {
		sep = "&";
	}

	gadgets.io.makeRequest([ url, sep, "nocache=", ts ].join(""), callback, params);

	showMessage("フィードを読み込んでいます。");

	gadgets.window.adjustHeight();
}

function initForm() {
	document.getElementById("formContent").style.display = "";
	document.form.feedUrl.value = url;
	document.form.onsubmit = function () {
		var feedUrl = document.form.feedUrl.value;
		if (!feedUrl) {
			showValidateErrorMessage("フィード URL を入力して下さい。");
			return false;
		} else if (feedUrl.length > 250) {
			showValidateErrorMessage("フィード URL を 250 文字以内で入力してください。");
			return false;
		}
		gadgets.window.adjustHeight();
		url = feedUrl;
		fetchViewer();
		return false;
	}
}

function showVersion() {
	var span = document.createElement("span");
	span.innerHTML = "<a href='" + changeLogUrl + "' target='_blank'>バージョン " + version + " にアップデートされました。</a>";
	var versionMsg = msg.createDismissibleMessage(span, function () {
		msg.dismissMessage(versionMsg);
		gadgets.window.adjustHeight();
	});
}

function init() {
	var oldVersion = prefs.getString("version");
	if (version != oldVersion) {
		if (oldVersion) {
			showVersion();
		}
		prefs.set("version", version);
	}
	var currentView = gadgets.views.getCurrentView();
	var supportViews = gadgets.views.getSupportedViews();
	if (currentView.getName() == 'canvas') {
		rows = 65535;
	} else {
		rows = prefs.getInt("p2homeRows");
	}
	autoReload = prefs.getInt("p4autoReload");
	notice = prefs.getInt("p5createActivity");
	url = "https://manager.aipo.com/inquiry/twitter/feed.xml";
	if (!url) {
		initForm();
	} else {
		fetchViewer();
	}
	gadgets.window.adjustHeight();
}

</script>
<script>gadgets.util.runOnLoadHandlers();</script>
</body>
</html>