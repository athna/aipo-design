dojo._xdResourceLoaded({depends:[["provide","dijit._editor.selection"]],defineResource:function(e){e._hasResource["dijit._editor.selection"]||(e._hasResource["dijit._editor.selection"]=!0,e.provide("dijit._editor.selection"),e.mixin(dijit._editor.selection,{getType:function(){if(e.doc.selection)return e.doc.selection.type.toLowerCase();var t,n="text";try{t=e.global.getSelection()}catch(o){}if(t&&1==t.rangeCount){var r=t.getRangeAt(0);r.startContainer==r.endContainer&&r.endOffset-r.startOffset==1&&3!=r.startContainer.nodeType&&(n="control")}return n},getSelectedText:function(){if(e.doc.selection)return"control"==dijit._editor.selection.getType()?null:e.doc.selection.createRange().text;var t=e.global.getSelection();return t?t.toString():void 0},getSelectedHtml:function(){if(e.doc.selection)return"control"==dijit._editor.selection.getType()?null:e.doc.selection.createRange().htmlText;var t=e.global.getSelection();if(t&&t.rangeCount){var n=t.getRangeAt(0).cloneContents(),o=document.createElement("div");return o.appendChild(n),o.innerHTML}return null},getSelectedElement:function(){if("control"==this.getType()){if(!e.doc.selection){var t=e.global.getSelection();return t.anchorNode.childNodes[t.anchorOffset]}var n=e.doc.selection.createRange();if(n&&n.item)return e.doc.selection.createRange().item(0)}},getParentElement:function(){if("control"==this.getType()){var t=this.getSelectedElement();if(t)return t.parentNode}else{if(e.doc.selection)return e.doc.selection.createRange().parentElement();var n=e.global.getSelection();if(n){for(var o=n.anchorNode;o&&1!=o.nodeType;)o=o.parentNode;return o}}},hasAncestorElement:function(){return null!=this.getAncestorElement.apply(this,arguments)},getAncestorElement:function(){var e=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(e,arguments)},isTag:function(e,t){if(e&&e.tagName)for(var n=e.tagName.toLowerCase(),o=0;o<t.length;o++){var r=String(t[o]).toLowerCase();if(n==r)return r}return""},getParentOfType:function(e,t){for(;e;){if(this.isTag(e,t).length)return e;e=e.parentNode}return null},remove:function(){var t=e.doc.selection;return t?("none"!=t.type.toLowerCase()&&t.clear(),t):(t=e.global.getSelection(),t.deleteFromDocument(),t)},selectElementChildren:function(t,n){var o=e.global,r=e.doc;if(t=e.byId(t),r.selection&&e.body().createTextRange){var i=t.ownerDocument.body.createTextRange();i.moveToElementText(t),n||i.select()}else if(o.getSelection){var l=o.getSelection();l.setBaseAndExtent?l.setBaseAndExtent(t,0,t,t.innerText.length-1):l.selectAllChildren&&l.selectAllChildren(t)}},selectElement:function(t,n){var o=e.doc;if(t=e.byId(t),o.selection&&e.body().createTextRange)try{var r=e.body().createControlRange();r.addElement(t),n||r.select()}catch(i){this.selectElementChildren(t,n)}else if(e.global.getSelection){var l=e.global.getSelection();if(l.removeAllRanges){var r=o.createRange();r.selectNode(t),l.removeAllRanges(),l.addRange(r)}}}}))}});