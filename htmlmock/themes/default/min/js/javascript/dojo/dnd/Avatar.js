dojo._hasResource["dojo.dnd.Avatar"]||(dojo._hasResource["dojo.dnd.Avatar"]=!0,dojo.provide("dojo.dnd.Avatar"),dojo.require("dojo.dnd.common"),dojo.dnd.Avatar=function(e){this.manager=e,this.construct()},dojo.extend(dojo.dnd.Avatar,{construct:function(){var e=dojo.doc.createElement("table");e.className="dojoDndAvatar",e.style.position="absolute",e.style.zIndex=1999,e.style.margin="0px";var o=dojo.doc.createElement("tbody"),a=dojo.doc.createElement("tr");a.className="dojoDndAvatarHeader";var d=dojo.doc.createElement("td");d.innerHTML=this._generateText(),a.appendChild(d),dojo.style(a,"opacity",.9),o.appendChild(a);for(var t=Math.min(5,this.manager.nodes.length),n=this.manager.source,r=0;t>r;++r){a=dojo.doc.createElement("tr"),a.className="dojoDndAvatarItem",d=dojo.doc.createElement("td");var s=s=n.creator?n._normalizedCreator(n.getItem(this.manager.nodes[r].id).data,"avatar").node:this.manager.nodes[r].cloneNode(!0);s.id="",d.appendChild(s),a.appendChild(d),dojo.style(a,"opacity",(9-r)/10),o.appendChild(a)}e.appendChild(o),this.node=e},destroy:function(){dojo._destroyElement(this.node),this.node=!1},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");for(var e=this.node.getElementsByTagName("td"),o=0;o<e.length;++o){var a=e[o];if(dojo.hasClass(a.parentNode,"dojoDndAvatarHeader")){a.innerHTML=this._generateText();break}}},_generateText:function(){return this.manager.nodes.length.toString()}}));