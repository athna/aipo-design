dojo._hasResource["dojox.dtl.tag.loader"]||(dojo._hasResource["dojox.dtl.tag.loader"]=!0,dojo.provide("dojox.dtl.tag.loader"),dojo.require("dojox.dtl._base"),dojox.dtl.tag.loader.BlockNode=function(t,e){this.name=t,this.nodelist=e},dojo.extend(dojox.dtl.tag.loader.BlockNode,{render:function(t,e){return this.override?(e=this.override.render(t,e,this),this.rendered=this.override):(e=this.nodelist.render(t,e,this),this.rendered=this.nodelist),this.override=null,e},unrender:function(t,e){return this.rendered.unrender(t,e)},setOverride:function(t){this.override||(this.override=t)},toString:function(){return"dojox.dtl.tag.loader.BlockNode"}}),dojox.dtl.tag.loader.block=function(t,e){var r=e.split(" "),n=r[1];t._blocks=t._blocks||{},t._blocks[n]=t._blocks[n]||[],t._blocks[n].push(n);var o=t.parse(["endblock","endblock "+n]);return t.next(),new dojox.dtl.tag.loader.BlockNode(n,o)},dojox.dtl.tag.loader.ExtendsNode=function(t,e,r,n,o){this.getTemplate=t,this.nodelist=e,this.shared=r,this.parent=n,this.key=o},dojo.extend(dojox.dtl.tag.loader.ExtendsNode,{parents:{},getParent:function(t){if(!this.parent){if(this.parent=t.get(this.key,!1),!this.parent)throw new Error("extends tag used a variable that did not resolve");"object"==typeof this.parent&&(this.parent.url?(this.parent.shared&&(this.shared=!0),this.parent=this.parent.url.toString()):this.parent=this.parent.toString()),this.parent&&0==this.parent.indexOf("shared:")&&(this.shared=!0,this.parent=this.parent.substring(7,e.length))}var e=this.parent;if(!e)throw new Error("Invalid template name in 'extends' tag.");return e.render?e:this.parents[e]?this.parents[e]:(this.parent=this.getTemplate(dojox.dtl.text.getTemplateString(e)),this.shared&&(this.parents[e]=this.parent),this.parent)},render:function(t,e){for(var r,n=(dojox.dtl,dojox.dtl.tag.loader),o=this.getParent(t),d=o.nodelist[0]instanceof this.constructor,s={},i=0;r=o.nodelist.contents[i];i++)r instanceof n.BlockNode&&(s[r.name]=r);for(var r,i=0;r=this.nodelist.contents[i];i++)if(r instanceof n.BlockNode){var a=s[r.name];a?this.shared?a.setOverride(r.nodelist):a.nodelist=r.nodelist:d&&o.nodelist[0].nodelist.append(r)}return this.rendered=o,o.render(t,e,this)},unrender:function(t,e){return this.rendered.unrender(t,e,this)},toString:function(){return"dojox.dtl.block.ExtendsNode"}}),dojox.dtl.tag.loader.extends_=function(t,e){var r=e.split(" "),n=!1,o=null,d=null;'"'==r[1].charAt(0)||"'"==r[1].charAt(0)?o=r[1].substring(1,r[1].length-1):d=r[1],o&&0==o.indexOf("shared:")&&(n=!0,o=o.substring(7,o.length));var s=t.parse();return new dojox.dtl.tag.loader.ExtendsNode(t.getTemplate,s,n,o,d)});