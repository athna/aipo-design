dojo._xdResourceLoaded({depends:[["provide","dojox.dtl.tag.loader"],["require","dojox.dtl._base"]],defineResource:function(e){e._hasResource["dojox.dtl.tag.loader"]||(e._hasResource["dojox.dtl.tag.loader"]=!0,e.provide("dojox.dtl.tag.loader"),e.require("dojox.dtl._base"),dojox.dtl.tag.loader.BlockNode=function(e,t){this.name=e,this.nodelist=t},e.extend(dojox.dtl.tag.loader.BlockNode,{render:function(e,t){return this.override?(t=this.override.render(e,t,this),this.rendered=this.override):(t=this.nodelist.render(e,t,this),this.rendered=this.nodelist),this.override=null,t},unrender:function(e,t){return this.rendered.unrender(e,t)},setOverride:function(e){this.override||(this.override=e)},toString:function(){return"dojox.dtl.tag.loader.BlockNode"}}),dojox.dtl.tag.loader.block=function(e,t){var r=t.split(" "),n=r[1];e._blocks=e._blocks||{},e._blocks[n]=e._blocks[n]||[],e._blocks[n].push(n);var o=e.parse(["endblock","endblock "+n]);return e.next(),new dojox.dtl.tag.loader.BlockNode(n,o)},dojox.dtl.tag.loader.ExtendsNode=function(e,t,r,n,o){this.getTemplate=e,this.nodelist=t,this.shared=r,this.parent=n,this.key=o},e.extend(dojox.dtl.tag.loader.ExtendsNode,{parents:{},getParent:function(e){if(!this.parent){if(this.parent=e.get(this.key,!1),!this.parent)throw new Error("extends tag used a variable that did not resolve");"object"==typeof this.parent&&(this.parent.url?(this.parent.shared&&(this.shared=!0),this.parent=this.parent.url.toString()):this.parent=this.parent.toString()),this.parent&&0==this.parent.indexOf("shared:")&&(this.shared=!0,this.parent=this.parent.substring(7,t.length))}var t=this.parent;if(!t)throw new Error("Invalid template name in 'extends' tag.");return t.render?t:this.parents[t]?this.parents[t]:(this.parent=this.getTemplate(dojox.dtl.text.getTemplateString(t)),this.shared&&(this.parents[t]=this.parent),this.parent)},render:function(e,t){for(var r,n=(dojox.dtl,dojox.dtl.tag.loader),o=this.getParent(e),d=o.nodelist[0]instanceof this.constructor,s={},i=0;r=o.nodelist.contents[i];i++)r instanceof n.BlockNode&&(s[r.name]=r);for(var r,i=0;r=this.nodelist.contents[i];i++)if(r instanceof n.BlockNode){var a=s[r.name];a?this.shared?a.setOverride(r.nodelist):a.nodelist=r.nodelist:d&&o.nodelist[0].nodelist.append(r)}return this.rendered=o,o.render(e,t,this)},unrender:function(e,t){return this.rendered.unrender(e,t,this)},toString:function(){return"dojox.dtl.block.ExtendsNode"}}),dojox.dtl.tag.loader.extends_=function(e,t){var r=t.split(" "),n=!1,o=null,d=null;'"'==r[1].charAt(0)||"'"==r[1].charAt(0)?o=r[1].substring(1,r[1].length-1):d=r[1],o&&0==o.indexOf("shared:")&&(n=!0,o=o.substring(7,o.length));var s=e.parse();return new dojox.dtl.tag.loader.ExtendsNode(e.getTemplate,s,n,o,d)})}});