dojo._hasResource["dojox.widget.Toaster"]||(dojo._hasResource["dojox.widget.Toaster"]=!0,dojo.provide("dojox.widget.Toaster"),dojo.require("dojo.fx"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.declare("dojox.widget.Toaster",[dijit._Widget,dijit._Templated],{templateString:'<div dojoAttachPoint="clipNode"><div dojoAttachPoint="containerNode" dojoAttachEvent="onclick:onSelect"><div dojoAttachPoint="contentNode"></div></div></div>',messageTopic:"",_uniqueId:0,messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:"2000",separator:"<hr></hr>",postCreate:function(){dojox.widget.Toaster.superclass.postCreate.apply(this),this.hide(),this.clipNode.className="dijitToasterClip",this.containerNode.className+=" dijitToasterContainer",this.contentNode.className="dijitToasterContent",this.messageTopic&&dojo.subscribe(this.messageTopic,this,"_handleMessage")},_handleMessage:function(t){dojo.isString(t)?this.setContent(t):this.setContent(t.message,t.type,t.duration)},setContent:function(t,i,e){if(e=e||this.duration,this.slideAnim&&("playing"!=this.slideAnim.status()&&this.slideAnim.stop(),"playing"==this.slideAnim.status()||this.fadeAnim&&"playing"==this.fadeAnim.status()))return setTimeout(dojo.hitch(this,function(){this.setContent(t,i)}),50),void 0;var o=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)};for(var s in this.messageTypes)dojo.removeClass(this.containerNode,"dijitToaster"+o(this.messageTypes[s]));dojo.style(this.containerNode,"opacity",1),t&&this.isVisible&&(t=this.contentNode.innerHTML+this.separator+t),this.contentNode.innerHTML=t,dojo.addClass(this.containerNode,"dijitToaster"+o(i||this.defaultType)),this.show();var n=dojo.marginBox(this.containerNode);if(this.isVisible)this._placeClip();else{var d=this.containerNode.style,a=this.positionDirection;if(a.indexOf("-up")>=0)d.left="0px",d.top=n.h+10+"px";else if(a.indexOf("-left")>=0)d.left=n.w+10+"px",d.top="0px";else if(a.indexOf("-right")>=0)d.left=0-n.w-10+"px",d.top="0px";else{if(!(a.indexOf("-down")>=0))throw new Error(this.id+".positionDirection is invalid: "+a);d.left="0px",d.top=0-n.h-10+"px"}this.slideAnim=dojo.fx.slideTo({node:this.containerNode,top:0,left:0,duration:450}),dojo.connect(this.slideAnim,"onEnd",this,function(){this.fadeAnim=dojo.fadeOut({node:this.containerNode,duration:1e3}),dojo.connect(this.fadeAnim,"onEnd",this,function(){this.isVisible=!1,this.hide()}),e>0?setTimeout(dojo.hitch(this,function(){this.bgIframe&&this.bgIframe.iframe&&(this.bgIframe.iframe.style.display="none"),this.fadeAnim.play()}),e):dojo.connect(this,"onSelect",this,function(){this.fadeAnim.play()}),this.isVisible=!0}),this.slideAnim.play()}},_placeClip:function(){var t=dijit.getViewport(),i=dojo.marginBox(this.containerNode),e=this.clipNode.style;e.height=i.h+"px",e.width=i.w+"px";var o=this.positionDirection;if(o.match(/^t/)?e.top=t.t+"px":o.match(/^b/)&&(e.top=t.h-i.h-2+t.t+"px"),o.match(/^[tb]r-/)?e.left=t.w-i.w-1-t.l+"px":o.match(/^[tb]l-/)&&(e.left="0px"),e.clip="rect(0px, "+i.w+"px, "+i.h+"px, 0px)",dojo.isIE){this.bgIframe||(this.clipNode.id="__dojoXToaster_"+this._uniqueId++,this.bgIframe=new dijit.BackgroundIframe(this.clipNode));var s=this.bgIframe.iframe;s&&(s.style.display="block")}},onSelect:function(){},show:function(){dojo.style(this.containerNode,"display",""),this._placeClip(),this._scrollConnected||(this._scrollConnected=dojo.connect(window,"onscroll",this,this._placeClip))},hide:function(){dojo.style(this.containerNode,"display","none"),this._scrollConnected&&(dojo.disconnect(this._scrollConnected),this._scrollConnected=!1),dojo.style(this.containerNode,"opacity",1)}}));