dojo._xdResourceLoaded({depends:[["provide","dojox.charting.Chart2D"],["require","dojox.gfx"],["require","dojox.lang.functional"],["require","dojox.charting.Theme"],["require","dojox.charting.Series"],["require","dojox.charting.axis2d.Default"],["require","dojox.charting.plot2d.Default"],["require","dojox.charting.plot2d.Lines"],["require","dojox.charting.plot2d.Areas"],["require","dojox.charting.plot2d.Markers"],["require","dojox.charting.plot2d.MarkersOnly"],["require","dojox.charting.plot2d.Scatter"],["require","dojox.charting.plot2d.Stacked"],["require","dojox.charting.plot2d.StackedLines"],["require","dojox.charting.plot2d.StackedAreas"],["require","dojox.charting.plot2d.Columns"],["require","dojox.charting.plot2d.StackedColumns"],["require","dojox.charting.plot2d.ClusteredColumns"],["require","dojox.charting.plot2d.Bars"],["require","dojox.charting.plot2d.StackedBars"],["require","dojox.charting.plot2d.ClusteredBars"],["require","dojox.charting.plot2d.Grid"],["require","dojox.charting.plot2d.Pie"]],defineResource:function(t){t._hasResource["dojox.charting.Chart2D"]||(t._hasResource["dojox.charting.Chart2D"]=!0,t.provide("dojox.charting.Chart2D"),t.require("dojox.gfx"),t.require("dojox.lang.functional"),t.require("dojox.charting.Theme"),t.require("dojox.charting.Series"),t.require("dojox.charting.axis2d.Default"),t.require("dojox.charting.plot2d.Default"),t.require("dojox.charting.plot2d.Lines"),t.require("dojox.charting.plot2d.Areas"),t.require("dojox.charting.plot2d.Markers"),t.require("dojox.charting.plot2d.MarkersOnly"),t.require("dojox.charting.plot2d.Scatter"),t.require("dojox.charting.plot2d.Stacked"),t.require("dojox.charting.plot2d.StackedLines"),t.require("dojox.charting.plot2d.StackedAreas"),t.require("dojox.charting.plot2d.Columns"),t.require("dojox.charting.plot2d.StackedColumns"),t.require("dojox.charting.plot2d.ClusteredColumns"),t.require("dojox.charting.plot2d.Bars"),t.require("dojox.charting.plot2d.StackedBars"),t.require("dojox.charting.plot2d.ClusteredBars"),t.require("dojox.charting.plot2d.Grid"),t.require("dojox.charting.plot2d.Pie"),function(){var i=dojox.lang.functional,e=dojox.charting,r=i.lambda("item.clear()"),s=i.lambda("item.purgeGroup()"),o=i.lambda("item.destroy()"),h=i.lambda("item.dirty = false"),a=i.lambda("item.dirty = true");t.declare("dojox.charting.Chart2D",null,{constructor:function(i,e){e||(e={}),this.margins=e.margins?e.margins:{l:10,t:10,r:10,b:10},this.stroke=e.stroke,this.fill=e.fill,this.theme=null,this.axes={},this.stack=[],this.plots={},this.series=[],this.runs={},this.dirty=!0,this.coords=null,this.node=t.byId(i);var r=t.marginBox(i);this.surface=dojox.gfx.createSurface(this.node,r.w,r.h)},destroy:function(){t.forEach(this.series,o),t.forEach(this.stack,o),i.forIn(this.axes,o)},getCoords:function(){return this.coords||(this.coords=t.coords(this.node,!0)),this.coords},setTheme:function(t){return this.theme=t,this.dirty=!0,this},addAxis:function(t,i){var r;return r=i&&"type"in i?"string"==typeof i.type?new e.axis2d[i.type](this,i):new i.type(this,i):new e.axis2d.Default(this,i),r.name=t,r.dirty=!0,t in this.axes&&this.axes[t].destroy(),this.axes[t]=r,this.dirty=!0,this},addPlot:function(t,i){var r;return r=i&&"type"in i?"string"==typeof i.type?new e.plot2d[i.type](this,i):new i.type(this,i):new e.plot2d.Default(this,i),r.name=t,r.dirty=!0,t in this.plots?(this.stack[this.plots[t]].destroy(),this.stack[this.plots[t]]=r):(this.plots[t]=this.stack.length,this.stack.push(r)),this.dirty=!0,this},addSeries:function(t,i,r){var s=new e.Series(this,i,r);return t in this.runs?(this.series[this.runs[t]].destroy(),this.series[this.runs[t]]=s):(this.runs[t]=this.series.length,this.series.push(s)),this.dirty=!0,!("ymin"in s)&&"min"in s&&(s.ymin=s.min),!("ymax"in s)&&"max"in s&&(s.ymax=s.max),this},updateSeries:function(i,e){if(i in this.runs){var r,s=this.series[this.runs[i]],o=this.stack[this.plots[s.plot]];s.data=e,s.dirty=!0,o.hAxis?(r=this.axes[o.hAxis],r.dependOnData()&&(r.dirty=!0,t.forEach(this.stack,function(t){t.hAxis&&t.hAxis==o.hAxis&&(t.dirty=!0)}))):o.dirty=!0,o.vAxis?(r=this.axes[o.vAxis],r.dependOnData()&&(r.dirty=!0,t.forEach(this.stack,function(t){t.vAxis&&t.vAxis==o.vAxis&&(t.dirty=!0)}))):o.dirty=!0}return this},resize:function(i,e){var r;switch(arguments.length){case 0:r=t.marginBox(this.node);break;case 1:r=i;break;default:r={w:i,h:e}}return t.marginBox(this.node,r),this.surface.setDimensions(r.w,r.h),this.dirty=!0,this.coords=null,this.render()},render:function(){return this.dirty?this.fullRender():(t.forEach(this.stack,function(t){(t.dirty||t.hAxis&&this.axes[t.hAxis].dirty||t.vAxis&&this.axes[t.vAxis].dirty)&&t.calculateAxes(this.plotArea)},this),i.forEachReversed(this.stack,function(t){t.render(this.dim,this.offsets)},this),i.forIn(this.axes,function(t){t.render(this.dim,this.offsets)},this),this._makeClean(),this.surface.render&&this.surface.render(),this)},fullRender:function(){this._makeDirty(),t.forEach(this.stack,r),t.forEach(this.series,s),i.forIn(this.axes,s),t.forEach(this.stack,s),this.surface.clear(),t.forEach(this.series,function(t){if(!(t.plot in this.plots)){var i=new e.plot2d.Default(this,{});i.name=t.plot,this.plots[t.plot]=this.stack.length,this.stack.push(i)}this.stack[this.plots[t.plot]].addSeries(t)},this),t.forEach(this.stack,function(t){t.hAxis&&t.setAxis(this.axes[t.hAxis]),t.vAxis&&t.setAxis(this.axes[t.vAxis])},this),this.theme||(this.theme=new dojox.charting.Theme(dojox.charting._def));var o=i.foldl(this.stack,"z + plot.getRequiredColors()",0);this.theme.defineColors({num:o,cache:!1});var h=this.dim=this.surface.getDimensions();h.width=dojox.gfx.normalizedLength(h.width),h.height=dojox.gfx.normalizedLength(h.height),i.forIn(this.axes,r),t.forEach(this.stack,function(t){t.calculateAxes(h)});var a=this.offsets={l:0,r:0,t:0,b:0};i.forIn(this.axes,function(t){i.forIn(t.getOffsets(),function(t,i){a[i]+=t})}),i.forIn(this.margins,function(t,i){a[i]+=t}),this.plotArea={width:h.width-a.l-a.r,height:h.height-a.t-a.b},i.forIn(this.axes,r),t.forEach(this.stack,function(t){t.calculateAxes(this.plotArea)},this);var n=this.theme,d=this.fill?this.fill:n.chart&&n.chart.fill,c=this.stroke?this.stroke:n.chart&&n.chart.stroke;return d&&this.surface.createRect({width:h.width,height:h.height}).setFill(d),c&&this.surface.createRect({width:h.width-1,height:h.height-1}).setStroke(c),d=n.plotarea&&n.plotarea.fill,c=n.plotarea&&n.plotarea.stroke,d&&this.surface.createRect({x:a.l,y:a.t,width:h.width-a.l-a.r,height:h.height-a.t-a.b}).setFill(d),c&&this.surface.createRect({x:a.l,y:a.t,width:h.width-a.l-a.r-1,height:h.height-a.t-a.b-1}).setStroke(c),i.foldr(this.stack,function(t,i){return i.render(h,a),0},0),i.forIn(this.axes,function(t){t.render(h,a)}),this._makeClean(),this},_makeClean:function(){t.forEach(this.axes,h),t.forEach(this.stack,h),t.forEach(this.series,h),this.dirty=!1},_makeDirty:function(){t.forEach(this.axes,a),t.forEach(this.stack,a),t.forEach(this.series,a),this.dirty=!0}})}())}});