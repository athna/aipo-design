dojo._hasResource["dojox.math.curves"]||(dojo._hasResource["dojox.math.curves"]=!0,dojo.provide("dojox.math.curves"),dojo.mixin(dojox.math.curves,{Line:function(t,h){this.start=t,this.end=h,this.dimensions=t.length;for(var e=0;e<t.length;e++)t[e]=Number(t[e]);for(var e=0;e<h.length;e++)h[e]=Number(h[e]);return this.getValue=function(t){for(var h=new Array(this.dimensions),e=0;e<this.dimensions;e++)h[e]=(this.end[e]-this.start[e])*t+this.start[e];return h},this},Bezier:function(t){return this.getValue=function(t){if(t>=1)return this.p[this.p.length-1];if(0>=t)return this.p[0];for(var h=new Array(this.p[0].length),e=0;i<this.p[0].length;e++)h[e]=0;for(var i=0;i<this.p[0].length;i++){for(var r=0,s=0,n=0;n<this.p.length;n++)r+=this.p[n][i]*this.p[this.p.length-1][0]*dojox.math.bernstein(t,this.p.length,n);for(var a=0;a<this.p.length;a++)s+=this.p[this.p.length-1][0]*dojox.math.bernstein(t,this.p.length,a);h[i]=r/s}return h},this.p=t,this},CatmullRom:function(t,h){return this.getValue=function(t){var h=t*(this.p.length-1),e=Math.floor(h),i=h-e,r=e-1;0>r&&(r=0);var s=e,n=e+1;n>=this.p.length&&(n=this.p.length-1);var a=e+2;a>=this.p.length&&(a=this.p.length-1);for(var o=i,u=i*i,c=i*i*i,l=new Array(this.p[0].length),p=0;p<this.p[0].length;p++){var d=-this.c*this.p[r][p]+(2-this.c)*this.p[s][p]+(this.c-2)*this.p[n][p]+this.c*this.p[a][p],g=2*this.c*this.p[r][p]+(this.c-3)*this.p[s][p]+(3-2*this.c)*this.p[n][p]+-this.c*this.p[a][p],f=-this.c*this.p[r][p]+this.c*this.p[n][p],v=this.p[s][p];l[p]=d*c+g*u+f*o+v}return l},this.c=h?h:.7,this.p=t,this},Arc:function(t,h,e){function i(t,h){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i]+h[i];return e}function r(t){for(var h=new Array(t.length),e=0;e<t.length;e++)h[e]=-t[e];return h}var s=dojox.math.midpoint(t,h),n=i(r(s),t),a=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)),o=dojox.math.radiansToDegrees(Math.atan(n[1]/n[0]));n[0]<0?o-=90:o+=90,dojox.math.curves.CenteredArc.call(this,s,a,o,o+(e?-180:180))},CenteredArc:function(t,h,e,i){return this.center=t,this.radius=h,this.start=e||0,this.end=i,this.getValue=function(t){var h=new Array(2),e=dojox.math.degreesToRadians(this.start+(this.end-this.start)*t);return h[0]=this.center[0]+this.radius*Math.sin(e),h[1]=this.center[1]-this.radius*Math.cos(e),h},this},Circle:function(t,h){return dojox.math.curves.CenteredArc.call(this,t,h,0,360),this},Path:function(){function t(){for(var t=0,h=0;h<e.length;h++){var s=t+e[h]/r,n=s-t;i[h]=[t,s,n],t=s}}var h=[],e=[],i=[],r=0;return this.add=function(i,s){0>s&&console.error("dojox.math.curves.Path.add: weight cannot be less than 0"),h.push(i),e.push(s),r+=s,t()},this.remove=function(i){for(var s=0;s<h.length;s++)if(h[s]==i){h.splice(s,1),r-=e.splice(s,1)[0];break}t()},this.removeAll=function(){h=[],e=[],r=0},this.getValue=function(t){for(var e=!1,r=0,s=0;s<i.length;s++){var n=i[s];if(t>=n[0]&&t<n[1]){var a=(t-n[0])/n[2];r=h[s].getValue(a),e=!0;break}}e||(r=h[h.length-1].getValue(1));for(var o=0;s>o;o++)r=dojox.math.points.translate(r,h[o].getValue(1));return r},this}}));