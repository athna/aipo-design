if(!dojo._hasResource["aipo.widget.MemberNormalSelectList"]){dojo._hasResource["aipo.widget.MemberNormalSelectList"]=!0,dojo.provide("aipo.widget.MemberNormalSelectList"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.MemberNormalSelectList",[dijit._Widget,dijit._Templated],{widgetId:"",memberFromId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",memberToTitle:"",memberToId:"",buttonAddId:"",buttonRemoveId:"",memberLimit:0,groupSelectId:"",groupSelectPreOptionKey:"",groupSelectPreOptionValue:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none"><tr><td><div id="memberPopupDiv"><div class="outer"><div class="popup"><div class="clearfix"><div class="memberlistToTop" >${memberToTitle}</div><div class="memberlistFromTop"><select size="1" style="width:100%" name="${groupSelectId}" id="${groupSelectId}" dojoAttachEvent="onchange:changeGroup"></select></div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="5" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="5" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+nlsStrings.DELETEBTN_STR+'"/ dojoAttachEvent="onclick:onMemberRemoveClick"></div></div><div class="memberlistFromBottom"><div style="display: none;" id="${widgetId}-memberlist-indicator" class="indicator alignleft">読み込み中</div><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+nlsStrings.ADDBTN_STR+'"/ dojoAttachEvent="onclick:onMemberAddClick"></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId,params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue,indicator:this.widgetId+"-memberlist-indicator"},aimluck.io.createOptions(this.memberFromId,params),params={url:this.memberGroupUrl,key:this.groupSelectOptionKey,value:this.groupSelectOptionValue,preOptions:{key:this.groupSelectPreOptionKey,value:this.groupSelectPreOptionValue}},aimluck.io.createOptions(this.groupSelectId,params)},addOption:function(e,i,t,o){aimluck.io.addOption(e,i,t,o)},addOptionSync:function(e,i,t){var o=dojo.byId(this.memberToId);if(!(0!=this.memberLimit&&o.options.length>=this.memberLimit))if(document.all){var r=document.createElement("OPTION");r.value=e,r.text=i,r.selected=t,1==o.options.length&&""==o.options[0].value&&o.options.remove(0),o.add(r,o.options.length)}else{var r=document.createElement("OPTION");r.value=e,r.text=i,r.selected=t,1==o.options.length&&""==o.options[0].value&&o.removeChild(o.options[0]),o.insertBefore(r,o.options[o.options.length])}},addMember:function(e,t){if(document.all){var o=e.options,r=t.options;if(1==o.length&&""==o[0].value)return;for(i=0;i<o.length;i++)if(o[i].selected){var l=!1;for(j=0;j<r.length;j++)if(r[j].value==o[i].value){l=!0;break}if(!l){var m=document.createElement("OPTION");if(m.value=o[i].value,m.text=o[i].text,m.selected=!0,1==r.length&&""==r[0].value&&r.remove(0),0!=this.memberLimit&&t.options.length>=this.memberLimit)return;r.add(m,r.length)}}}else{var o=e.options,r=t.options;if(1==o.length&&""==o[0].value)return;for(i=0;i<o.length;i++)if(o[i].selected){var l=!1;for(j=0;j<r.length;j++)if(r[j].value==o[i].value){l=!0;break}if(!l){var m=document.createElement("OPTION");if(m.value=o[i].value,m.text=o[i].text,m.selected=!0,1==t.options.length&&""==t.options[0].value&&t.removeChild(t.options[0]),0!=this.memberLimit&&t.options.length>=this.memberLimit)return;t.insertBefore(m,r[r.length])}}}},removeAllMember:function(e){if(document.all){var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(t.remove(i),i-=1)}else{var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(e.removeChild(t[i]),i-=1)}},removeMember:function(e){if(document.all){var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(t.remove(i),i-=1)}else{var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(e.removeChild(t[i]),i-=1)}},removeMemberSync:function(){var e=dojo.byId(this.memberToId);if(document.all){var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(t.remove(i),i-=1)}else{var t=e.options;for(i=0;i<t.length;i++)t[i].selected&&(e.removeChild(t[i]),i-=1)}},changeGroup:function(e){var i=e.target.options[e.target.selectedIndex].value,t=this.changeGroupUrl+"&groupname="+i,o={url:t,key:this.memberFromOptionKey,value:this.memberFromOptionValue,indicator:this.widgetId+"-memberlist-indicator"};aimluck.io.createOptions(this.memberFromId,o)},onMemberAddClick:function(){this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.memberToId)),this.setWrapperHeight()},onMemberRemoveClick:function(){this.removeMemberSync(),this.setWrapperHeight()},setWrapperHeight:function(){var e=document.getElementById("modalDialog");if(e){var i=document.getElementById("wrapper");i.style.minHeight=e.clientHeight+"px"}}})}