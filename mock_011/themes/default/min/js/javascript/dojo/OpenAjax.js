window.OpenAjax||(OpenAjax=new function(){var e,i="org.openajax.hub.",s={};this.hub=s,s.implementer="http://openajax.org",s.implVersion="0.6",s.specVersion="0.6",s.implExtraData={};var e={};s.libraries=e,s.registerLibrary=function(s,n,t,r){e[s]={prefix:s,namespaceURI:n,version:t,extraData:r},this.publish(i+"registerLibrary",e[s])},s.unregisterLibrary=function(s){this.publish(i+"unregisterLibrary",e[s]),delete e[s]},s._subscriptions={c:{},s:[]},s._cleanup=[],s._subIndex=0,s._pubDepth=0,s.subscribe=function(e,i,s,n,t){s||(s=window);var r=e+"."+this._subIndex,u={scope:s,cb:i,fcb:t,data:n,sid:this._subIndex++,hdl:r},p=e.split(".");return this._subscribe(this._subscriptions,p,0,u),r},s.publish=function(e,i){var s=e.split(".");if(this._pubDepth++,this._publish(this._subscriptions,s,0,e,i),this._pubDepth--,this._cleanup.length>0&&0==this._pubDepth){for(var n=0;n<this._cleanup.length;n++)this.unsubscribe(this._cleanup[n].hdl);delete this._cleanup,this._cleanup=[]}},s.unsubscribe=function(e){var i=e.split("."),s=i.pop();this._unsubscribe(this._subscriptions,i,0,s)},s._subscribe=function(e,i,s,n){var t=i[s];s==i.length?e.s.push(n):("undefined"==typeof e.c&&(e.c={}),"undefined"==typeof e.c[t]?(e.c[t]={c:{},s:[]},this._subscribe(e.c[t],i,s+1,n)):this._subscribe(e.c[t],i,s+1,n))},s._publish=function(e,i,s,n,t){if("undefined"!=typeof e){var r;if(s==i.length?r=e:(this._publish(e.c[i[s]],i,s+1,n,t),this._publish(e.c["*"],i,s+1,n,t),r=e.c["**"]),"undefined"!=typeof r)for(var u=r.s,p=u.length,a=0;p>a;a++)if(u[a].cb){var b=u[a].scope,c=u[a].cb,h=u[a].fcb,l=u[a].data;"string"==typeof c&&(c=b[c]),"string"==typeof h&&(h=b[h]),(!h||h.call(b,n,t,l))&&c.call(b,n,t,l)}}},s._unsubscribe=function(e,i,s,n){if("undefined"!=typeof e){if(s<i.length){var t=e.c[i[s]];if(this._unsubscribe(t,i,s+1,n),0==t.s.length){for(var r in t.c)return;delete e.c[i[s]]}return}for(var u=e.s,p=u.length,a=0;p>a;a++)if(n==u[a].sid)return this._pubDepth>0?(u[a].cb=null,this._cleanup.push(u[a])):u.splice(a,1),void 0}},s.reinit=function(){for(var e in OpenAjax.hub.libraries)delete OpenAjax.hub.libraries[e];OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","0.6",{}),delete OpenAjax._subscriptions,OpenAjax._subscriptions={c:{},s:[]},delete OpenAjax._cleanup,OpenAjax._cleanup=[],OpenAjax._subIndex=0,OpenAjax._pubDepth=0}},OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","0.6",{}));