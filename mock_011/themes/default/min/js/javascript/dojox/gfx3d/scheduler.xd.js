dojo._xdResourceLoaded({depends:[["provide","dojox.gfx3d.scheduler"],["provide","dojox.gfx3d.drawer"],["require","dojox.gfx3d.vector"]],defineResource:function(e){e._hasResource["dojox.gfx3d.scheduler"]||(e._hasResource["dojox.gfx3d.scheduler"]=!0,e.provide("dojox.gfx3d.scheduler"),e.provide("dojox.gfx3d.drawer"),e.require("dojox.gfx3d.vector"),e.mixin(dojox.gfx3d.scheduler,{zOrder:function(e,o){return o=o?o:dojox.gfx3d.scheduler.order,e.sort(function(e,r){return o(r)-o(e)}),e},bsp:function(o,r){console.debug("BSP scheduler"),r=r?r:dojox.gfx3d.scheduler.outline;var t=new dojox.gfx3d.scheduler.BinarySearchTree(o[0],r);return e.forEach(o.slice(1),function(e){t.add(e,r)}),t.iterate(r)},order:function(e){return e.getZOrder()},outline:function(e){return e.getOutline()}}),e.declare("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(e,o){this.plus=null,this.minus=null,this.object=e;var r=o(e);this.orient=r[0],this.normal=dojox.gfx3d.vector.normalize(r)},add:function(o,r){var t=.5,d=r(o),n=dojox.gfx3d.vector,i=this.normal,s=this.orient;if(e.every(d,function(e){return Math.floor(t+n.dotProduct(i,n.substract(e,s)))<=0}))this.minus?this.minus.add(o,r):this.minus=new dojox.gfx3d.scheduler.BinarySearchTree(o,r);else{if(!e.every(d,function(e){return Math.floor(t+n.dotProduct(i,n.substract(e,s)))>=0}))throw e.forEach(d,function(e){console.debug(n.dotProduct(i,n.substract(e,s)))}),"The case: polygon cross siblings' plate is not implemneted yet";this.plus?this.plus.add(o,r):this.plus=new dojox.gfx3d.scheduler.BinarySearchTree(o,r)}},iterate:function(){var e=.5,o=dojox.gfx3d.vector,r=[],t=null,d={x:0,y:0,z:-1e4};return t=Math.floor(e+o.dotProduct(this.normal,o.substract(d,this.orient)))<=0?[this.plus,this.minus]:[this.minus,this.plus],t[0]&&(r=r.concat(t[0].iterate())),r.push(this.object),t[1]&&(r=r.concat(t[1].iterate())),r}}),e.mixin(dojox.gfx3d.drawer,{conservative:function(o,r,t){console.debug("conservative draw"),e.forEach(this.objects,function(e){e.destroy()}),e.forEach(r,function(e){e.draw(t.lighting)})},chart:function(o,r,t){console.debug("chart draw"),e.forEach(this.todos,function(e){e.draw(t.lighting)})}}))}});