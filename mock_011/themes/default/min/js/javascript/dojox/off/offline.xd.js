dojo._xdResourceLoaded({depends:[["provide","dojox.storage.Provider"],["provide","dojox.storage.manager"],["provide","dojox._sql._crypto"],["provide","dojox._sql.common"],["provide","dojox.sql"],["provide","dojox.storage.GearsStorageProvider"],["provide","dojox.storage._common"],["provide","dojox.storage"],["provide","dojox.off.files"],["provide","dojox.off.sync"],["provide","dojox.off._common"],["provide","dojox.off"],["provide","dojox.off.ui"],["provide","dojox.off.offline"]],defineResource:function(_1){_1._hasResource["dojox.storage.Provider"]||(_1._hasResource["dojox.storage.Provider"]=!0,_1.provide("dojox.storage.Provider"),_1.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){console.warn("dojox.storage.initialize not implemented")},isAvailable:function(){console.warn("dojox.storage.isAvailable not implemented")},put:function(){console.warn("dojox.storage.put not implemented")},get:function(){console.warn("dojox.storage.get not implemented")},hasKey:function(e){return null!=this.get(e)},getKeys:function(){console.warn("dojox.storage.getKeys not implemented")},clear:function(){console.warn("dojox.storage.clear not implemented")},remove:function(){console.warn("dojox.storage.remove not implemented")},getNamespaces:function(){console.warn("dojox.storage.getNamespaces not implemented")},isPermanent:function(){console.warn("dojox.storage.isPermanent not implemented")},getMaximumSize:function(){console.warn("dojox.storage.getMaximumSize not implemented")},putMultiple:function(){console.warn("dojox.storage.putMultiple not implemented")},getMultiple:function(){console.warn("dojox.storage.getMultiple not implemented")},removeMultiple:function(){console.warn("dojox.storage.remove not implemented")},isValidKeyArray:function(e){if(null===e||"undefined"==typeof e||!e instanceof Array)return!1;for(var o=0;o<e.length;o++)if(!this.isValidKey(e[o]))return!1;return!0},hasSettingsUI:function(){return!1},showSettingsUI:function(){console.warn("dojox.storage.showSettingsUI not implemented")},hideSettingsUI:function(){console.warn("dojox.storage.hideSettingsUI not implemented")},isValidKey:function(e){return null==e||"undefined"==typeof e?!1:/^[0-9A-Za-z_]*$/.test(e)},getResourceList:function(){return[]}})),_1._hasResource["dojox.storage.manager"]||(_1._hasResource["dojox.storage.manager"]=!0,_1.provide("dojox.storage.manager"),dojox.storage.manager=new function(){this.currentProvider=null,this.available=!1,this._initialized=!1,this._providers=[],this._onLoadListeners=[],this.initialize=function(){this.autodetect()},this.register=function(e,o){this._providers[this._providers.length]=o,this._providers[e]=o},this.setProvider=function(){},this.autodetect=function(){if(!this._initialized){for(var e,o=djConfig.forceStorageProvider||!1,t=0;t<this._providers.length;t++){if(e=this._providers[t],o==e.declaredClass){e.isAvailable();break}if(e.isAvailable())break}if(!e)return this._initialized=!0,this.available=!1,this.currentProvider=null,console.warn("No storage provider found for this platform"),this.loaded(),void 0;this.currentProvider=e,_1.mixin(dojox.storage,this.currentProvider),dojox.storage.initialize(),this._initialized=!0,this.available=!0}},this.isAvailable=function(){return this.available},this.addOnLoad=function(e){this._onLoadListeners.push(e),this.isInitialized()&&this._fireLoaded()},this.removeOnLoad=function(e){for(var o=0;o<this._onLoadListeners.length;o++)if(e==this._onLoadListeners[o]){this._onLoadListeners=this._onLoadListeners.splice(o,1);break}},this.isInitialized=function(){return null!=this.currentProvider&&"dojox.storage.FlashStorageProvider"==this.currentProvider.declaredClass&&0==dojox.flash.ready?!1:this._initialized},this.supportsProvider=function(_22){try{var _23=eval("new "+_22+"()"),_24=_23.isAvailable();return _24?_24:!1}catch(e){return!1}},this.getProvider=function(){return this.currentProvider},this.loaded=function(){this._fireLoaded()},this._fireLoaded=function(){_1.forEach(this._onLoadListeners,function(e){try{e()}catch(o){console.debug(o)}})},this.getResourceList=function(){var e=[];return _1.forEach(dojox.storage.manager._providers,function(o){e=e.concat(o.getResourceList())}),e}}),_1._hasResource["dojox._sql._crypto"]||(_1._hasResource["dojox._sql._crypto"]=!0,_1.provide("dojox._sql._crypto"),_1.mixin(dojox._sql._crypto,{_POOL_SIZE:100,encrypt:function(e,o,t){this._initWorkerPool();var i={plaintext:e,password:o};i=_1.toJson(i),i="encr:"+String(i),this._assignWork(i,t)},decrypt:function(e,o,t){this._initWorkerPool();var i={ciphertext:e,password:o};i=_1.toJson(i),i="decr:"+String(i),this._assignWork(i,t)},_initWorkerPool:function(){if(!this._manager)try{this._manager=google.gears.factory.create("beta.workerpool","1.0"),this._unemployed=[],this._employed={},this._handleMessage=[];var e=this;this._manager.onmessage=function(o,t){var i=e._employed["_"+t];if(e._employed["_"+t]=void 0,e._unemployed.push("_"+t),e._handleMessage.length){var n=e._handleMessage.shift();e._assignWork(n.msg,n.callback)}i(o)};for(var o="function _workerInit(){gearsWorkerPool.onmessage = "+String(this._workerHandler)+";}",t=o+" _workerInit();",i=0;i<this._POOL_SIZE;i++)this._unemployed.push("_"+this._manager.createWorker(t))}catch(n){throw n.message||n}},_assignWork:function(e,o){if(!this._handleMessage.length&&this._unemployed.length){var t=this._unemployed.shift().substring(1);this._employed["_"+t]=o,this._manager.sendMessage(e,t)}else this._handleMessage={msg:e,callback:o}},_workerHandler:function(msg,_3c){function Cipher(e,o){for(var t=4,i=o.length/t-1,n=[[],[],[],[]],s=0;4*t>s;s++)n[s%4][Math.floor(s/4)]=e[s];n=AddRoundKey(n,o,0,t);for(var r=1;i>r;r++)n=SubBytes(n,t),n=ShiftRows(n,t),n=MixColumns(n,t),n=AddRoundKey(n,o,r,t);n=SubBytes(n,t),n=ShiftRows(n,t),n=AddRoundKey(n,o,i,t);for(var a=new Array(4*t),s=0;4*t>s;s++)a[s]=n[s%4][Math.floor(s/4)];return a}function SubBytes(e,o){for(var t=0;4>t;t++)for(var i=0;o>i;i++)e[t][i]=_3d[e[t][i]];return e}function ShiftRows(e,o){for(var t=new Array(4),i=1;4>i;i++){for(var n=0;4>n;n++)t[n]=e[i][(n+i)%o];for(var n=0;4>n;n++)e[i][n]=t[n]}return e}function MixColumns(e){for(var o=0;4>o;o++){for(var t=new Array(4),i=new Array(4),n=0;4>n;n++)t[n]=e[n][o],i[n]=128&e[n][o]?e[n][o]<<1^283:e[n][o]<<1;e[0][o]=i[0]^t[1]^i[1]^t[2]^t[3],e[1][o]=t[0]^i[1]^t[2]^i[2]^t[3],e[2][o]=t[0]^t[1]^i[2]^t[3]^i[3],e[3][o]=t[0]^i[0]^t[1]^t[2]^i[3]}return e}function AddRoundKey(e,o,t,i){for(var n=0;4>n;n++)for(var s=0;i>s;s++)e[n][s]^=o[4*t+s][n];return e}function KeyExpansion(e){for(var o=4,t=e.length/4,i=t+6,n=new Array(o*(i+1)),s=new Array(4),r=0;t>r;r++){var a=[e[4*r],e[4*r+1],e[4*r+2],e[4*r+3]];n[r]=a}for(var r=t;o*(i+1)>r;r++){n[r]=new Array(4);for(var l=0;4>l;l++)s[l]=n[r-1][l];if(r%t==0){s=SubWord(RotWord(s));for(var l=0;4>l;l++)s[l]^=_3e[r/t][l]}else t>6&&r%t==4&&(s=SubWord(s));for(var l=0;4>l;l++)n[r][l]=n[r-t][l]^s[l]}return n}function SubWord(e){for(var o=0;4>o;o++)e[o]=_3d[e[o]];return e}function RotWord(e){e[4]=e[0];for(var o=0;4>o;o++)e[o]=e[o+1];return e}function AESEncryptCtr(e,o,t){if(128!=t&&192!=t&&256!=t)return"";for(var i=t/8,n=new Array(i),s=0;i>s;s++)n[s]=255&o.charCodeAt(s);var r=Cipher(n,KeyExpansion(n));r=r.concat(r.slice(0,i-16));for(var a=16,l=new Array(a),d=(new Date).getTime(),s=0;4>s;s++)l[s]=d>>>8*s&255;for(var s=0;4>s;s++)l[s+4]=d/4294967296>>>8*s&255;for(var c=KeyExpansion(r),h=Math.ceil(e.length/a),f=new Array(h),u=0;h>u;u++){for(var _=0;4>_;_++)l[15-_]=u>>>8*_&255;for(var _=0;4>_;_++)l[15-_-4]=u/4294967296>>>8*_;for(var g=Cipher(l,c),p=h-1>u?a:(e.length-1)%a+1,y="",s=0;p>s;s++){var v=e.charCodeAt(u*a+s),x=v^g[s];y+=String.fromCharCode(x)}f[u]=escCtrlChars(y)}for(var m="",s=0;8>s;s++)m+=String.fromCharCode(l[s]);return m=escCtrlChars(m),m+"-"+f.join("-")}function AESDecryptCtr(e,o,t){if(128!=t&&192!=t&&256!=t)return"";for(var i=t/8,n=new Array(i),s=0;i>s;s++)n[s]=255&o.charCodeAt(s);var r=KeyExpansion(n),a=Cipher(n,r);a=a.concat(a.slice(0,i-16));var l=KeyExpansion(a);e=e.split("-");for(var d=16,c=new Array(d),h=unescCtrlChars(e[0]),s=0;8>s;s++)c[s]=h.charCodeAt(s);for(var f=new Array(e.length-1),u=1;u<e.length;u++){for(var _=0;4>_;_++)c[15-_]=u-1>>>8*_&255;for(var _=0;4>_;_++)c[15-_-4]=u/4294967296-1>>>8*_&255;var g=Cipher(c,l);e[u]=unescCtrlChars(e[u]);for(var p="",s=0;s<e[u].length;s++){var y=e[u].charCodeAt(s),v=y^g[s];p+=String.fromCharCode(v)}f[u-1]=p}return f.join("")}function escCtrlChars(e){return e.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(e){return"!"+e.charCodeAt(0)+"!"})}function unescCtrlChars(e){return e.replace(/!\d\d?\d?!/g,function(e){return String.fromCharCode(e.slice(1,-1))})}function encrypt(e,o){return AESEncryptCtr(e,o,256)}function decrypt(e,o){return AESDecryptCtr(e,o,256)}var _3d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_3e=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],cmd=msg.substr(0,4),arg=msg.substr(5);if("encr"==cmd){arg=eval("("+arg+")");var _9b=arg.plaintext,_9c=arg.password,_9d=encrypt(_9b,_9c);gearsWorkerPool.sendMessage(String(_9d),_3c)}else if("decr"==cmd){arg=eval("("+arg+")");var _9e=arg.ciphertext,_9c=arg.password,_9d=decrypt(_9e,_9c);gearsWorkerPool.sendMessage(String(_9d),_3c)}}})),_1._hasResource["dojox._sql.common"]||(_1._hasResource["dojox._sql.common"]=!0,_1.provide("dojox._sql.common"),dojox.sql=new Function("return dojox.sql._exec(arguments);"),_1.mixin(dojox.sql,{dbName:null,debug:_1.exists("dojox.sql.debug")?dojox.sql.debug:!1,open:function(e){if(!this._dbOpen||e&&e!=this.dbName){this.dbName||(this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_")),e||(e=this.dbName);try{this._initDb(),this.db.open(e),this._dbOpen=!0}catch(o){throw o.message||o}}},close:function(e){if(!_1.isIE&&(this._dbOpen||e&&e!=this.dbName)){e||(e=this.dbName);try{this.db.close(e),this._dbOpen=!1}catch(o){throw o.message||o}}},_exec:function(e){try{this._initDb(),this._dbOpen||(this.open(),this._autoClose=!0);var o=null,t=null,i=null,n=_1._toArray(e);if(o=n.splice(0,1)[0],(this._needsEncrypt(o)||this._needsDecrypt(o))&&(t=n.splice(n.length-1,1)[0],i=n.splice(n.length-1,1)[0]),this.debug&&this._printDebugSQL(o,n),this._needsEncrypt(o)){{new dojox.sql._SQLCrypto("encrypt",o,i,n,t)}return}if(this._needsDecrypt(o)){{new dojox.sql._SQLCrypto("decrypt",o,i,n,t)}return}var s=this.db.execute(o,n);return s=this._normalizeResults(s),this._autoClose&&this.close(),s}catch(r){if(r=r.message||r,console.debug("SQL Exception: "+r),this._autoClose)try{this.close()}catch(a){console.debug("Error closing database: "+a.message||a)}throw r}},_initDb:function(){if(!this.db)try{this.db=google.gears.factory.create("beta.database","1.0")}catch(e){throw _1.setObject("google.gears.denied",!0),dojox.off.onFrameworkEvent("coreOperationFailed"),"Google Gears must be allowed to run"}},_printDebugSQL:function(e,o){for(var t='dojox.sql("'+e+'"',i=0;i<o.length;i++)t+="string"==typeof o[i]?', "'+o[i]+'"':", "+o[i];t+=")",console.debug(t)},_normalizeResults:function(e){var o=[];if(!e)return[];for(;e.isValidRow();){for(var t={},i=0;i<e.fieldCount();i++){var n=e.fieldName(i),s=e.field(i);t[n]=s}o.push(t),e.next()}return e.close(),o},_needsEncrypt:function(e){return/encrypt\([^\)]*\)/i.test(e)},_needsDecrypt:function(e){return/decrypt\([^\)]*\)/i.test(e)}}),_1.declare("dojox.sql._SQLCrypto",null,{constructor:function(e,o,t,i,n){"encrypt"==e?this._execEncryptSQL(o,t,i,n):this._execDecryptSQL(o,t,i,n)},_execEncryptSQL:function(e,o,t,i){var n=this._stripCryptoSQL(e),s=this._flagEncryptedArgs(e,t),r=this;this._encrypt(n,o,t,s,function(t){var s=!1,a=[],l=null;try{a=dojox.sql.db.execute(n,t)}catch(d){s=!0,l=d.message||d}if(null!=l){if(dojox.sql._autoClose)try{dojox.sql.close()}catch(c){}return i(null,!0,l.toString()),void 0}if(a=dojox.sql._normalizeResults(a),dojox.sql._autoClose&&dojox.sql.close(),dojox.sql._needsDecrypt(e)){var h=r._determineDecryptedColumns(e);r._decrypt(a,h,o,function(e){i(e,!1,null)})}else i(a,!1,null)})},_execDecryptSQL:function(e,o,t,i){var n=this._stripCryptoSQL(e),s=this._determineDecryptedColumns(e),r=!1,a=[],l=null;try{a=dojox.sql.db.execute(n,t)}catch(d){r=!0,l=d.message||d}if(null!=l){if(dojox.sql._autoClose)try{dojox.sql.close()}catch(c){}return i(a,!0,l.toString()),void 0}a=dojox.sql._normalizeResults(a),dojox.sql._autoClose&&dojox.sql.close(),this._decrypt(a,s,o,function(e){i(e,!1,null)})},_encrypt:function(e,o,t,i,n){this._totalCrypto=0,this._finishedCrypto=0,this._finishedSpawningCrypto=!1,this._finalArgs=t;for(var s=0;s<t.length;s++)if(i[s]){var r=t[s],a=s;this._totalCrypto++,dojox._sql._crypto.encrypt(r,o,_1.hitch(this,function(e){this._finalArgs[a]=e,this._finishedCrypto++,this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto&&n(this._finalArgs)}))}this._finishedSpawningCrypto=!0},_decrypt:function(e,o,t,i){this._totalCrypto=0,this._finishedCrypto=0,this._finishedSpawningCrypto=!1,this._finalResultSet=e;for(var n=0;n<e.length;n++){var s=e[n];for(var r in s)if("*"==o||o[r]){this._totalCrypto++;var a=s[r];this._decryptSingleColumn(r,a,t,n,function(e){i(e)})}}this._finishedSpawningCrypto=!0},_stripCryptoSQL:function(e){e=e.replace(/DECRYPT\(\*\)/gi,"*");var o=e.match(/ENCRYPT\([^\)]*\)/gi);if(null!=o)for(var t=0;t<o.length;t++){var i=o[t],n=i.match(/ENCRYPT\(([^\)]*)\)/i)[1];e=e.replace(i,n)}if(o=e.match(/DECRYPT\([^\)]*\)/gi),null!=o)for(var t=0;t<o.length;t++){var s=o[t],r=s.match(/DECRYPT\(([^\)]*)\)/i)[1];e=e.replace(s,r)}return e},_flagEncryptedArgs:function(e){for(var o,t=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/gi),i=0,n=[];null!=(o=t.exec(e));){var s=RegExp.lastMatch+"";if(!/^[\"\']/.test(s)){var r=!1;/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)&&(r=!0),n[i]=r,i++}}return n},_determineDecryptedColumns:function(e){var o={};if(/DECRYPT\(\*\)/i.test(e))o="*";else for(var t,i=/DECRYPT\((?:\s*\w*\s*\,?)*\)/gi;t=i.exec(e);){var n=new String(RegExp.lastMatch),s=n.replace(/DECRYPT\(/i,"");s=s.replace(/\)/,""),s=s.split(/\s*,\s*/),_1.forEach(s,function(e){/\s*\w* AS (\w*)/i.test(e)&&(e=e.match(/\s*\w* AS (\w*)/i)[1]),o[e]=!0})}return o},_decryptSingleColumn:function(e,o,t,i,n){dojox._sql._crypto.decrypt(o,t,_1.hitch(this,function(o){this._finalResultSet[i][e]=o,this._finishedCrypto++,this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto&&n(this._finalResultSet)}))}})),_1._hasResource["dojox.sql"]||(_1._hasResource["dojox.sql"]=!0,_1.provide("dojox.sql")),_1._hasResource["dojox.storage.GearsStorageProvider"]||(_1._hasResource["dojox.storage.GearsStorageProvider"]=!0,_1.provide("dojox.storage.GearsStorageProvider"),_1.isGears&&!function(){_1.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:!1,_available:null,initialize:function(){if(1!=djConfig.disableGearsStorage){this.TABLE_NAME="__DOJO_STORAGE";try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"(  namespace TEXT,  key TEXT,  value TEXT )"),dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index ON "+this.TABLE_NAME+" (namespace, key)")}catch(e){return console.debug("dojox.storage.GearsStorageProvider.initialize:",e),this.initialized=!1,dojox.storage.manager.loaded(),void 0}this.initialized=!0,dojox.storage.manager.loaded()}},isAvailable:function(){return this._available=_1.isGears},put:function(e,o,t,i){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);i=i||this.DEFAULT_NAMESPACE,o=_1.isString(o)?"string:"+o:_1.toJson(o);try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",i,e),dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",i,e,o)}catch(n){return console.debug("dojox.storage.GearsStorageProvider.put:",n),t(this.FAILED,e,n.toString()),void 0}t&&t(dojox.storage.SUCCESS,e,null)},get:function(e,o){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);o=o||this.DEFAULT_NAMESPACE;var t=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND  key = ?",o,e);return t.length?(t=t[0].value,t=_1.isString(t)&&/^string:/.test(t)?t.substring("string:".length):_1.fromJson(t)):null},getNamespaces:function(){for(var e=[dojox.storage.DEFAULT_NAMESPACE],o=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace"),t=0;t<o.length;t++)o[t].namespace!=dojox.storage.DEFAULT_NAMESPACE&&e.push(o[t].namespace);return e},getKeys:function(e){if(e=e||this.DEFAULT_NAMESPACE,0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);for(var o=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",e),t=[],i=0;i<o.length;i++)t.push(o[i].key);return t},clear:function(e){if(0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);e=e||this.DEFAULT_NAMESPACE,dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",e)},remove:function(e,o){o=o||this.DEFAULT_NAMESPACE,dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",o,e)},putMultiple:function(e,o,t,i){if(this.isValidKeyArray(e)===!1||!o instanceof Array||e.length!=o.length)throw new Error("Invalid arguments: keys = ["+e+"], values = ["+o+"]");if((null==i||"undefined"==typeof i)&&(i=dojox.storage.DEFAULT_NAMESPACE),0==this.isValidKey(i))throw new Error("Invalid namespace given: "+i);this._statusHandler=t;try{dojox.sql.open(),dojox.sql.db.execute("BEGIN TRANSACTION");for(var n="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",s=0;s<e.length;s++){var r=o[s];r=_1.isString(r)?"string:"+r:_1.toJson(r),dojox.sql.db.execute(n,[i,e[s],r])}dojox.sql.db.execute("COMMIT TRANSACTION"),dojox.sql.close()}catch(a){return console.debug("dojox.storage.GearsStorageProvider.putMultiple:",a),t&&t(this.FAILED,e,a.toString()),void 0}t&&t(dojox.storage.SUCCESS,key,null)},getMultiple:function(e,o){if(this.isValidKeyArray(e)===!1)throw new("Invalid key array given: "+e);if((null==o||"undefined"==typeof o)&&(o=dojox.storage.DEFAULT_NAMESPACE),0==this.isValidKey(o))throw new Error("Invalid namespace given: "+o);for(var t="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND  key = ?",i=[],n=0;n<e.length;n++){var s=dojox.sql(t,o,e[n]);s.length?(s=s[0].value,i[n]=_1.isString(s)&&/^string:/.test(s)?s.substring("string:".length):_1.fromJson(s)):i[n]=null}return i},removeMultiple:function(e,o){o=o||this.DEFAULT_NAMESPACE,dojox.sql.open(),dojox.sql.db.execute("BEGIN TRANSACTION");for(var t="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",i=0;i<e.length;i++)dojox.sql.db.execute(t,[o,e[i]]);dojox.sql.db.execute("COMMIT TRANSACTION"),dojox.sql.close()},isPermanent:function(){return!0},getMaximumSize:function(){return this.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")}}),dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider),dojox.storage.manager.initialize()}()),_1._hasResource["dojox.storage._common"]||(_1._hasResource["dojox.storage._common"]=!0,_1.provide("dojox.storage._common"),dojox.storage.manager.initialize()),_1._hasResource["dojox.storage"]||(_1._hasResource["dojox.storage"]=!0,_1.provide("dojox.storage")),_1._hasResource["dojox.off.files"]||(_1._hasResource["dojox.off.files"]=!0,_1.provide("dojox.off.files"),dojox.off.files={versionURL:"version.js",listOfURLs:[],refreshing:!1,_cancelID:null,_error:!1,_errorMessages:[],_currentFileIndex:0,_store:null,_doSlurp:!1,slurp:function(){this._doSlurp=!0},cache:function(e){if(_1.isString(e)){var o=this._trimAnchor(e+"");this.isAvailable(o)||this.listOfURLs.push(o)}else if(e instanceof _1._Url){var o=this._trimAnchor(e.uri);this.isAvailable(o)||this.listOfURLs.push(o)}else _1.forEach(e,function(e){e=this._trimAnchor(e),this.isAvailable(e)||this.listOfURLs.push(e)},this)},printURLs:function(){console.debug("The following URLs are cached for offline use:"),_1.forEach(this.listOfURLs,function(e){console.debug(e)})},remove:function(e){for(var o=0;o<this.listOfURLs.length;o++)if(this.listOfURLs[o]==e){this.listOfURLs=this.listOfURLs.splice(o,1);break}},isAvailable:function(e){for(var o=0;o<this.listOfURLs.length;o++)if(this.listOfURLs[o]==e)return!0;return!1},refresh:function(e){try{djConfig.isDebug&&this.printURLs(),this.refreshing=!0,this.versionURL?this._getVersionInfo(function(o,t,i){djConfig.isDebug||!t||i||!o||o!=t?(console.warn("Refreshing offline file list"),this._doRefresh(e,t)):(console.warn("No need to refresh offline file list"),e(!1,[]))}):(console.warn("Refreshing offline file list"),this._doRefresh(e))}catch(o){this.refreshing=!1,dojox.off.coreOpFailed=!0,dojox.off.enabled=!1,dojox.off.onFrameworkEvent("coreOperationFailed")}},abortRefresh:function(){this.refreshing&&(this._store.abortCapture(this._cancelID),this.refreshing=!1)},_slurp:function(){if(this._doSlurp){var e=_1.hitch(this,function(e){this._sameLocation(e)&&this.cache(e)});e(window.location.href),_1.query("script").forEach(function(o){try{e(o.getAttribute("src"))}catch(t){}}),_1.query("link").forEach(function(o){try{if(!o.getAttribute("rel")||"stylesheet"!=o.getAttribute("rel").toLowerCase())return;e(o.getAttribute("href"))}catch(t){}}),_1.query("img").forEach(function(o){try{e(o.getAttribute("src"))}catch(t){}}),_1.query("a").forEach(function(o){try{e(o.getAttribute("href"))}catch(t){}}),_1.forEach(document.styleSheets,function(o){try{if(o.cssRules)_1.forEach(o.cssRules,function(o){var t=o.cssText;if(t){var i=t.match(/url\(\s*([^\) ]*)\s*\)/i);if(!i)return;for(var n=1;n<i.length;n++)e(i[n])}});else if(o.cssText)for(var t,i=o.cssText.toString(),n=i.split(/\f|\r|\n/),s=0;s<n.length;s++)t=n[s].match(/url\(\s*([^\) ]*)\s*\)/i),t&&t.length&&e(t[1])}catch(r){}})}},_sameLocation:function(e){return e?e.length&&"#"==e.charAt(0)?!1:(e=new _1._Url(e),e.scheme||e.port||e.host?!e.scheme&&e.host&&e.port&&window.location.hostname==e.host&&window.location.port==e.port?!0:e.scheme||!e.host||e.port||window.location.hostname!=e.host||80!=window.location.port?window.location.protocol==e.scheme+":"&&window.location.hostname==e.host&&(window.location.port==e.port||!window.location.port&&!e.port):!0:!0):!1},_trimAnchor:function(e){return e.replace(/\#.*$/,"")},_doRefresh:function(e,o){var t;try{t=google.gears.factory.create("beta.localserver","1.0")}catch(i){throw _1.setObject("google.gears.denied",!0),dojox.off.onFrameworkEvent("coreOperationFailed"),"Google Gears must be allowed to run"}var n="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");t.removeStore(n),t.openStore(n);var s=t.createStore(n);this._store=s;var r=this;this._currentFileIndex=0,this._cancelID=s.capture(this.listOfURLs,function(t,i){if(!i&&r.refreshing){r._cancelID=null,r.refreshing=!1;var n=[];return n.push("Unable to capture: "+t),e(!0,n),void 0}i&&r._currentFileIndex++,i&&r._currentFileIndex>=r.listOfURLs.length&&(r._cancelID=null,r.refreshing=!1,o&&dojox.storage.put("oldVersion",o,null,dojox.off.STORAGE_NAMESPACE),dojox.storage.put("justDebugged",djConfig.isDebug,null,dojox.off.STORAGE_NAMESPACE),e(!1,[]))})},_getVersionInfo:function(e){var o=dojox.storage.get("justDebugged",dojox.off.STORAGE_NAMESPACE),t=dojox.storage.get("oldVersion",dojox.off.STORAGE_NAMESPACE),i=null;e=_1.hitch(this,e),_1.xhrGet({url:this.versionURL+"?browserbust="+(new Date).getTime(),timeout:5e3,handleAs:"javascript",error:function(){dojox.storage.remove("oldVersion",dojox.off.STORAGE_NAMESPACE),dojox.storage.remove("justDebugged",dojox.off.STORAGE_NAMESPACE),e(t,i,o)},load:function(n){n&&(i=n),e(t,i,o)}})}}),_1._hasResource["dojox.off.sync"]||(_1._hasResource["dojox.off.sync"]=!0,_1.provide("dojox.off.sync"),_1.mixin(dojox.off.sync,{isSyncing:!1,cancelled:!1,successful:!0,details:[],error:!1,actions:null,autoSync:!0,onSync:function(){},synchronize:function(){this.isSyncing||dojox.off.goingOnline||!dojox.off.isOnline||(this.isSyncing=!0,this.successful=!1,this.details=[],this.cancelled=!1,this.start())},cancel:function(){this.isSyncing&&(this.cancelled=!0,dojox.off.files.refreshing&&dojox.off.files.abortRefresh(),this.onSync("cancel"))},finishedDownloading:function(e,o){"undefined"==typeof e&&(e=!0),e||(this.successful=!1,this.details.push(o),this.error=!0),this.finished()},start:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("start"),this.refreshFiles(),void 0)},refreshFiles:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("refreshFiles"),dojox.off.files.refresh(_1.hitch(this,function(e,o){if(e){this.error=!0,this.successful=!1;for(var t=0;t<o.length;t++)this.details.push(o[t])}this.upload()})),void 0)},upload:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("upload"),_1.connect(this.actions,"onReplayFinished",this,this.download),this.actions.replay(),void 0)},download:function(){return this.cancelled?(this.finished(),void 0):(this.onSync("download"),void 0)},finished:function(){this.isSyncing=!1,this.successful=!this.cancelled&&!this.error,this.onSync("finished")},_save:function(e){this.actions._save(function(){e()})},_load:function(e){this.actions._load(function(){e()})}}),_1.declare("dojox.off.sync.ActionLog",null,{entries:[],reasonHalted:null,isReplaying:!1,autoSave:!0,add:function(e){if(this.isReplaying)throw"Programming error: you can not call dojox.off.sync.actions.add() while we are replaying an action log";this.entries.push(e),this.autoSave&&this._save()},onReplay:function(){},length:function(){return this.entries.length},haltReplay:function(e){if(this.isReplaying)if(e&&(this.reasonHalted=e.toString()),this.autoSave){var o=this;this._save(function(){o.isReplaying=!1,o.onReplayFinished()})}else this.isReplaying=!1,this.onReplayFinished()},continueReplay:function(){if(this.isReplaying){if(this.entries.shift(),!this.entries.length){if(this.autoSave){var e=this;return this._save(function(){e.isReplaying=!1,e.onReplayFinished()}),void 0}return this.isReplaying=!1,this.onReplayFinished(),void 0}var o=this.entries[0];this.onReplay(o,this)}},clear:function(){this.isReplaying||(this.entries=[],this.autoSave&&this._save())},replay:function(){if(!this.isReplaying){if(this.reasonHalted=null,!this.entries.length)return this.onReplayFinished(),void 0;this.isReplaying=!0;var e=this.entries[0];this.onReplay(e,this)}},onReplayFinished:function(){},toString:function(){var e="";e+="[";for(var o=0;o<this.entries.length;o++){e+="{";for(var t in this.entries[o])e+=t+': "'+this.entries[o][t]+'"',e+=", ";e+="}, "}return e+="]"},_save:function(e){e||(e=function(){});try{var o=function(o,t,i){o==dojox.storage.FAILED?(dojox.off.onFrameworkEvent("save",{status:dojox.storage.FAILED,isCoreSave:!0,key:t,value:i,namespace:dojox.off.STORAGE_NAMESPACE}),e()):o==dojox.storage.SUCCESS&&e()};dojox.storage.put("actionlog",this.entries,o,dojox.off.STORAGE_NAMESPACE)}catch(t){console.debug("dojox.off.sync._save: "+t.message||t),dojox.off.onFrameworkEvent("save",{status:dojox.storage.FAILED,isCoreSave:!0,key:"actionlog",value:this.entries,namespace:dojox.off.STORAGE_NAMESPACE}),e()}},_load:function(e){var o=dojox.storage.get("actionlog",dojox.off.STORAGE_NAMESPACE);o||(o=[]),this.entries=o,e()}}),dojox.off.sync.actions=new dojox.off.sync.ActionLog),_1._hasResource["dojox.off._common"]||(_1._hasResource["dojox.off._common"]=!0,_1.provide("dojox.off._common"),_1.mixin(dojox.off,{isOnline:!1,NET_CHECK:5,STORAGE_NAMESPACE:"_dot",enabled:!0,availabilityURL:_1.moduleUrl("dojox","off/network_check.txt"),goingOnline:!1,coreOpFailed:!1,doNetChecking:!0,hasOfflineCache:null,browserRestart:!1,_STORAGE_APP_NAME:window.location.href.replace(/[^0-9A-Za-z_]/g,"_"),_initializeCalled:!1,_storageLoaded:!1,_pageLoaded:!1,onLoad:function(){},onNetwork:function(){},initialize:function(){this._initializeCalled=!0,this._storageLoaded&&this._pageLoaded&&this._onLoad()},goOffline:function(){dojox.off.sync.isSyncing||this.goingOnline||(this.goingOnline=!1,this.isOnline=!1)},goOnline:function(e){dojox.off.sync.isSyncing||dojox.off.goingOnline||(this.goingOnline=!0,this.isOnline=!1,this._isSiteAvailable(e))},onFrameworkEvent:function(e,o){"save"==e?o.isCoreSave&&o.status==dojox.storage.FAILED&&(dojox.off.coreOpFailed=!0,dojox.off.enabled=!1,dojox.off.onFrameworkEvent("coreOperationFailed")):"coreOperationFailed"==e&&(dojox.off.coreOpFailed=!0,dojox.off.enabled=!1)},_checkOfflineCacheAvailable:function(e){this.hasOfflineCache=_1.isGears,e()},_onLoad:function(){dojox.off.files.cache(_1.moduleUrl("dojo","dojo.js")),this._cacheDojoResources(),dojox.off.files.cache(dojox.storage.manager.getResourceList()),dojox.off.files._slurp(),this._checkOfflineCacheAvailable(_1.hitch(this,"_onOfflineCacheChecked"))},_onOfflineCacheChecked:function(){this.hasOfflineCache&&this.enabled?this._load(_1.hitch(this,"_finishStartingUp")):this.hasOfflineCache&&!this.enabled?this._finishStartingUp():this._keepCheckingUntilInstalled()},_keepCheckingUntilInstalled:function(){this._finishStartingUp()},_finishStartingUp:function(){this.hasOfflineCache?this.enabled?(this._startNetworkThread(),this.goOnline(_1.hitch(this,function(){dojox.off.onLoad()}))):this.coreOpFailed?this.onFrameworkEvent("coreOperationFailed"):this.onLoad():this.onLoad()},_onPageLoad:function(){this._pageLoaded=!0,this._storageLoaded&&this._initializeCalled&&this._onLoad()},_onStorageLoad:function(){this._storageLoaded=!0,!dojox.storage.manager.isAvailable()&&dojox.storage.manager.isInitialized()&&(this.coreOpFailed=!0,this.enabled=!1),this._pageLoaded&&this._initializeCalled&&this._onLoad()},_isSiteAvailable:function(e){_1.xhrGet({url:this._getAvailabilityURL(),handleAs:"text",timeout:1e3*this.NET_CHECK,error:_1.hitch(this,function(){this.goingOnline=!1,this.isOnline=!1,e&&e(!1)}),load:_1.hitch(this,function(){this.goingOnline=!1,this.isOnline=!0,e?e(!0):this.onNetwork("online")})})},_startNetworkThread:function(){this.doNetChecking&&window.setInterval(_1.hitch(this,function(){var e=_1.xhrGet({url:this._getAvailabilityURL(),handleAs:"text",timeout:1e3*this.NET_CHECK,error:_1.hitch(this,function(){if(this.isOnline){this.isOnline=!1;try{"function"==typeof e.ioArgs.xhr.abort&&e.ioArgs.xhr.abort()}catch(o){}dojox.off.sync.isSyncing=!1,this.onNetwork("offline")}}),load:_1.hitch(this,function(){this.isOnline||(this.isOnline=!0,this.onNetwork("online"))})})}),1e3*this.NET_CHECK)},_getAvailabilityURL:function(){var e=this.availabilityURL.toString();return e+=-1==e.indexOf("?")?"?":"&",e+="browserbust="+(new Date).getTime()},_onOfflineCacheInstalled:function(){this.onFrameworkEvent("offlineCacheInstalled")},_cacheDojoResources:function(){var e=!0;_1.forEach(_1.query("script"),function(o){var t=o.getAttribute("src");t&&-1!=t.indexOf("_base/_loader/bootstrap.js")&&(e=!1)}),e||(dojox.off.files.cache(_1.moduleUrl("dojo","_base.js").uri),dojox.off.files.cache(_1.moduleUrl("dojo","_base/_loader/loader.js").uri),dojox.off.files.cache(_1.moduleUrl("dojo","_base/_loader/bootstrap.js").uri),dojox.off.files.cache(_1.moduleUrl("dojo","_base/_loader/hostenv_browser.js").uri));
for(var o=0;o<_1._loadedUrls.length;o++)dojox.off.files.cache(_1._loadedUrls[o])},_save:function(){},_load:function(e){dojox.off.sync._load(e)}}),dojox.storage.manager.addOnLoad(_1.hitch(dojox.off,"_onStorageLoad")),_1.addOnLoad(dojox.off,"_onPageLoad")),_1._hasResource["dojox.off"]||(_1._hasResource["dojox.off"]=!0,_1.provide("dojox.off")),_1._hasResource["dojox.off.ui"]||(_1._hasResource["dojox.off.ui"]=!0,_1.provide("dojox.off.ui"),_1.mixin(dojox.off.ui,{appName:"setme",autoEmbed:!0,autoEmbedID:"dot-widget",runLink:window.location.href,runLinkTitle:"Run Application",learnHowPath:_1.moduleUrl("dojox","off/resources/learnhow.html"),customLearnHowPath:!1,htmlTemplatePath:_1.moduleUrl("dojox","off/resources/offline-widget.html").uri,cssTemplatePath:_1.moduleUrl("dojox","off/resources/offline-widget.css").uri,onlineImagePath:_1.moduleUrl("dojox","off/resources/greenball.png").uri,offlineImagePath:_1.moduleUrl("dojox","off/resources/redball.png").uri,rollerImagePath:_1.moduleUrl("dojox","off/resources/roller.gif").uri,checkmarkImagePath:_1.moduleUrl("dojox","off/resources/checkmark.png").uri,learnHowJSPath:_1.moduleUrl("dojox","off/resources/learnhow.js").uri,_initialized:!1,onLoad:function(){},_initialize:function(){return 0==this._validateAppName(this.appName)?(alert("You must set dojox.off.ui.appName; it can only contain letters, numbers, and spaces; right now it is incorrectly set to '"+dojox.off.ui.appName+"'"),dojox.off.enabled=!1,void 0):(this.runLinkText="Run "+this.appName,_1.connect(dojox.off,"onNetwork",this,"_onNetwork"),_1.connect(dojox.off.sync,"onSync",this,"_onSync"),dojox.off.files.cache([this.htmlTemplatePath,this.cssTemplatePath,this.onlineImagePath,this.offlineImagePath,this.rollerImagePath,this.checkmarkImagePath]),this.autoEmbed&&this._doAutoEmbed(),void 0)},_doAutoEmbed:function(){_1.xhrGet({url:this.htmlTemplatePath,handleAs:"text",error:function(e){dojox.off.enabled=!1,e=e.message||e,alert("Error loading the Dojo Offline Widget from "+this.htmlTemplatePath+": "+e)},load:_1.hitch(this,this._templateLoaded)})},_templateLoaded:function(e){var o=_1.byId(this.autoEmbedID);if(o&&(o.innerHTML=e),this._initImages(),this._updateNetIndicator(),this._initLearnHow(),this._initialized=!0,!dojox.off.hasOfflineCache)return this._showNeedsOfflineCache(),void 0;if(dojox.off.hasOfflineCache&&dojox.off.browserRestart)return this._needsBrowserRestart(),void 0;var t=_1.byId("dot-widget-browser-restart");t&&(t.style.display="none"),this._updateSyncUI(),this._initMainEvtHandlers(),this._setOfflineEnabled(dojox.off.enabled),this._onNetwork(dojox.off.isOnline?"online":"offline"),this._testNet()},_testNet:function(){dojox.off.goOnline(_1.hitch(this,function(e){this._onNetwork(e?"online":"offline"),this.onLoad()}))},_updateNetIndicator:function(){var e=_1.byId("dot-widget-network-indicator-online"),o=_1.byId("dot-widget-network-indicator-offline"),t=_1.byId("dot-widget-title-text");e&&o&&(1==dojox.off.isOnline?(e.style.display="inline",o.style.display="none"):(e.style.display="none",o.style.display="inline")),t&&(t.innerHTML=dojox.off.isOnline?"Online":"Offline")},_initLearnHow:function(){var e=_1.byId("dot-widget-learn-how-link");if(e){if(!this.customLearnHowPath){var o=djConfig.baseRelativePath;this.learnHowPath+="?appName="+encodeURIComponent(this.appName)+"&hasOfflineCache="+dojox.off.hasOfflineCache+"&runLink="+encodeURIComponent(this.runLink)+"&runLinkText="+encodeURIComponent(this.runLinkText)+"&baseRelativePath="+encodeURIComponent(o),dojox.off.files.cache(this.learnHowJSPath),dojox.off.files.cache(this.learnHowPath)}e.setAttribute("href",this.learnHowPath);var t=_1.byId("dot-widget-learn-how-app-name");t&&(t.innerHTML="",t.appendChild(document.createTextNode(this.appName)))}},_validateAppName:function(e){return e?/^[a-z0-9 ]*$/i.test(e):!1},_updateSyncUI:function(){var e=_1.byId("dot-roller"),o=_1.byId("dot-success-checkmark"),t=_1.byId("dot-sync-messages"),i=_1.byId("dot-sync-details"),n=_1.byId("dot-sync-cancel");dojox.off.sync.isSyncing?(this._clearSyncMessage(),e&&(e.style.display="inline"),o&&(o.style.display="none"),t&&_1.removeClass(t,"dot-sync-error"),i&&(i.style.display="none"),n&&(n.style.display="inline")):(e&&(e.style.display="none"),n&&(n.style.display="none"),t&&_1.removeClass(t,"dot-sync-error"))},_setSyncMessage:function(e){var o=_1.byId("dot-sync-messages");if(o){for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(e))}},_clearSyncMessage:function(){this._setSyncMessage("")},_initImages:function(){var e=_1.byId("dot-widget-network-indicator-online");e&&e.setAttribute("src",this.onlineImagePath);var o=_1.byId("dot-widget-network-indicator-offline");o&&o.setAttribute("src",this.offlineImagePath);var t=_1.byId("dot-roller");t&&t.setAttribute("src",this.rollerImagePath);var i=_1.byId("dot-success-checkmark");i&&i.setAttribute("src",this.checkmarkImagePath)},_showDetails:function(e){if(e.preventDefault(),e.stopPropagation(),dojox.off.sync.details.length){var o="";o+="<html><head><title>Sync Details</title><head><body>",o+="<h1>Sync Details</h1>\n",o+="<ul>\n";for(var t=0;t<dojox.off.sync.details.length;t++)o+="<li>",o+=dojox.off.sync.details[t],o+="</li>";o+="</ul>\n",o+="<a href='javascript:window.close()' style='text-align: right; padding-right: 2em;'>Close Window</a>\n",o+="</body></html>";var i="height=400,width=600,resizable=true,scrollbars=true,toolbar=no,menubar=no,location=no,directories=no,dependent=yes",n=window.open("","SyncDetails",i);if(!n)return alert("Please allow popup windows for this domain; can't display sync details window"),void 0;n.document.open(),n.document.write(o),n.document.close(),n.focus&&n.focus()}},_cancel:function(e){e.preventDefault(),e.stopPropagation(),dojox.off.sync.cancel()},_needsBrowserRestart:function(){var e=_1.byId("dot-widget-browser-restart");e&&_1.addClass(e,"dot-needs-browser-restart");var o=_1.byId("dot-widget-browser-restart-app-name");o&&(o.innerHTML="",o.appendChild(document.createTextNode(this.appName)));var t=_1.byId("dot-sync-status");t&&(t.style.display="none")},_showNeedsOfflineCache:function(){var e=_1.byId("dot-widget-container");e&&_1.addClass(e,"dot-needs-offline-cache")},_hideNeedsOfflineCache:function(){var e=_1.byId("dot-widget-container");e&&_1.removeClass(e,"dot-needs-offline-cache")},_initMainEvtHandlers:function(){var e=_1.byId("dot-sync-details-button");e&&_1.connect(e,"onclick",this,this._showDetails);var o=_1.byId("dot-sync-cancel-button");o&&_1.connect(o,"onclick",this,this._cancel)},_setOfflineEnabled:function(e){var o=[];o.push(_1.byId("dot-sync-status"));for(var t=0;t<o.length;t++)o[t]&&(o[t].style.visibility=e?"visible":"hidden")},_syncFinished:function(){this._updateSyncUI();var e=_1.byId("dot-success-checkmark"),o=_1.byId("dot-sync-details");if(1==dojox.off.sync.successful)this._setSyncMessage("Sync Successful"),e&&(e.style.display="inline");else if(1==dojox.off.sync.cancelled)this._setSyncMessage("Sync Cancelled"),e&&(e.style.display="none");else{this._setSyncMessage("Sync Error");var t=_1.byId("dot-sync-messages");t&&_1.addClass(t,"dot-sync-error"),e&&(e.style.display="none")}dojox.off.sync.details.length&&o&&(o.style.display="inline")},_onFrameworkEvent:function(e,o){if("save"==e)o.status!=dojox.storage.FAILED||o.isCoreSave||(alert("Please increase the amount of local storage available to this application"),dojox.storage.hasSettingsUI()&&dojox.storage.showSettingsUI());else if("coreOperationFailed"==e)console.log("Application does not have permission to use Dojo Offline"),this._userInformed||(alert("This application will not work if Google Gears is not allowed to run"),this._userInformed=!0);else if("offlineCacheInstalled"==e){if(this._hideNeedsOfflineCache(),1==dojox.off.hasOfflineCache&&1==dojox.off.browserRestart)return this._needsBrowserRestart(),void 0;var t=_1.byId("dot-widget-browser-restart");t&&(t.style.display="none"),this._updateSyncUI(),this._initMainEvtHandlers(),this._setOfflineEnabled(dojox.off.enabled),this._testNet()}},_onSync:function(e){switch(e){case"start":this._updateSyncUI();break;case"refreshFiles":this._setSyncMessage("Downloading UI...");break;case"upload":this._setSyncMessage("Uploading new data...");break;case"download":this._setSyncMessage("Downloading new data...");break;case"finished":this._syncFinished();break;case"cancel":this._setSyncMessage("Canceling Sync...");break;default:_1.warn("Programming error: Unknown sync type in dojox.off.ui: "+e)}},_onNetwork:function(e){if(this._initialized)if(this._updateNetIndicator(),"offline"==e){this._setSyncMessage("You are working offline");var o=_1.byId("dot-sync-details");o&&(o.style.display="none"),this._updateSyncUI()}else dojox.off.sync.autoSync&&window.setTimeout("dojox.off.sync.synchronize()",1e3)}}),_1.connect(dojox.off,"onFrameworkEvent",dojox.off.ui,"_onFrameworkEvent"),_1.connect(dojox.off,"onLoad",dojox.off.ui,dojox.off.ui._initialize)),_1._hasResource["dojox.off.offline"]||(_1._hasResource["dojox.off.offline"]=!0,_1.provide("dojox.off.offline"))}});