dojo._hasResource["dijit.InlineEditBox"]||(dojo._hasResource["dijit.InlineEditBox"]=!0,dojo.provide("dijit.InlineEditBox"),dojo.require("dojo.i18n"),dojo.require("dijit._Widget"),dojo.require("dijit._Container"),dojo.require("dijit.form.Button"),dojo.require("dijit.form.TextBox"),dojo.requireLocalization("dijit","common",null,"ROOT,cs,de,es,fr,hu,it,ja,ko,pl,pt,ru,zh,zh-tw"),dojo.declare("dijit.InlineEditBox",dijit._Widget,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",renderAsHtml:!1,editor:"dijit.form.TextBox",editorParams:{},onChange:function(){},width:"100%",value:"",noValueIndicator:"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",postMixInProperties:function(){this.inherited("postMixInProperties",arguments),this.displayNode=this.srcNodeRef;var t={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var e in t)this.connect(this.displayNode,e,t[e]);dijit.setWaiRole(this.displayNode,"button"),this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0),this.value||(this.value=this.displayNode.innerHTML),this._setDisplayValue(this.value)},_onMouseOver:function(){dojo.addClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion")},_onMouseOut:function(){dojo.removeClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion")},_onClick:function(t){this.disabled||(t&&dojo.stopEvent(t),this._onMouseOut(),setTimeout(dojo.hitch(this,"_edit"),0))},_edit:function(){this.editing=!0;var t=this.renderAsHtml?this.value:this.value.replace(/\s*\r?\n\s*/g,"").replace(/<br\/?>/gi,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"),e=document.createElement("span");dojo.place(e,this.domNode,"before");var i=this.editWidget=new dijit._InlineEditor({value:dojo.trim(t),autoSave:this.autoSave,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,renderAsHtml:this.renderAsHtml,editor:this.editor,editorParams:this.editorParams,style:dojo.getComputedStyle(this.displayNode),save:dojo.hitch(this,"save"),cancel:dojo.hitch(this,"cancel"),width:this.width},e),o=i.domNode.style;this.displayNode.style.display="none",o.position="static",o.visibility="visible",this.domNode=i.domNode,setTimeout(function(){i.focus()},100)},_showText:function(t){this.displayNode.style.display="";var e=this.editWidget.domNode.style;e.position="absolute",e.visibility="hidden",this.domNode=this.displayNode;var i=this;setTimeout(function(){t&&dijit.focus(i.displayNode),i.editWidget.destroy(),delete i.editWidget},100)},save:function(t){this.editing=!1,this.value=this.editWidget.getValue()+"",this.renderAsHtml&&(this.value=this.value.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace("\n","<br>")),this._setDisplayValue(this.value),this.onChange(this.value),this._showText(t)},_setDisplayValue:function(t){this.displayNode.innerHTML=t||this.noValueIndicator},cancel:function(t){this.editing=!1,this._showText(t)}}),dojo.declare("dijit._InlineEditor",[dijit._Widget,dijit._Templated],{templateString:'<fieldset dojoAttachPoint="editNode" waiRole="presentation" style="position: absolute; visibility:hidden" class="dijitReset dijitInline"\r\n	dojoAttachEvent="onkeypress: _onKeyPress" \r\n	><input dojoAttachPoint="editorPlaceholder"\r\n	/><span dojoAttachPoint="buttonContainer"\r\n		><button class=\'saveButton\' dojoAttachPoint="saveButton" dojoType="dijit.form.Button" dojoAttachEvent="onClick:save">${buttonSave}</button\r\n		><button class=\'cancelButton\' dojoAttachPoint="cancelButton" dojoType="dijit.form.Button" dojoAttachEvent="onClick:cancel">${buttonCancel}</button\r\n	></span\r\n></fieldset>\r\n',widgetsInTemplate:!0,postMixInProperties:function(){this.inherited("postMixInProperties",arguments),this.messages=dojo.i18n.getLocalization("dijit","common",this.lang),dojo.forEach(["buttonSave","buttonCancel"],function(t){this[t]||(this[t]=this.messages[t])},this)},postCreate:function(){var t=dojo.getObject(this.editor),e=this.editWidget=new t(this.editorParams,this.editorPlaceholder),i=this.style;dojo.forEach(["fontWeight","fontFamily","fontSize","fontStyle"],function(t){e.focusNode.style[t]=i[t]},this),dojo.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(t){this.domNode.style[t]=i[t]},this),"100%"==this.width?(e.domNode.style.width="100%",this.domNode.style.display="block"):e.domNode.style.width=this.width+(Number(this.width)==this.width?"px":""),this.connect(this.editWidget,"onChange","_onChange"),this._ignoreNextOnChange=!0,(this.editWidget.setDisplayedValue||this.editWidget.setValue).call(this.editWidget,this.value),this._initialText=this.getValue(),this.autoSave&&(this.buttonContainer.style.display="none")},destroy:function(){this.editWidget.destroy(),this.inherited(arguments)},getValue:function(){var t=this.editWidget;return t.getDisplayedValue?t.getDisplayedValue():t.getValue()},_onKeyPress:function(t){if(!this._exitInProgress)if(this.autoSave)t.keyCode==dojo.keys.ESCAPE?(dojo.stopEvent(t),this._exitInProgress=!0,this.cancel(!0)):t.keyCode==dojo.keys.ENTER&&(dojo.stopEvent(t),this._exitInProgress=!0,this.save(!0));else{var e=this;setTimeout(function(){e.saveButton.setDisabled(e.getValue()==e._initialText)},100)}},_onBlur:function(){this._exitInProgress||this.autoSave&&(this._exitInProgress=!0,this.getValue()==this._initialText?this.cancel(!1):this.save(!1))},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},_onChange:function(){return this._ignoreNextOnChange?(delete this._ignoreNextOnChange,void 0):(this._exitInProgress||(this.autoSave?(this._exitInProgress=!0,this.save(!0)):this.saveButton.setDisabled(this.getValue()==this._initialText||!this.enableSave())),void 0)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus(),dijit.selectInputText(this.editWidget.focusNode)}}),dijit.selectInputText=function(t){var e=dojo.global,i=dojo.doc;if(t=dojo.byId(t),i.selection&&dojo.body().createTextRange){if(t.createTextRange){var o=t.createTextRange();o.moveStart("character",0),o.moveEnd("character",t.value.length),o.select()}}else if(e.getSelection){{e.getSelection()}t.setSelectionRange&&t.setSelectionRange(0,t.value.length)}t.focus()});