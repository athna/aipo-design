dojo._xdResourceLoaded({depends:[["provide","dojox.gfx.silverlight"],["require","dojox.gfx._base"],["require","dojox.gfx.shape"],["require","dojox.gfx.path"]],defineResource:function(e){e._hasResource["dojox.gfx.silverlight"]||(e._hasResource["dojox.gfx.silverlight"]=!0,e.provide("dojox.gfx.silverlight"),e.require("dojox.gfx._base"),e.require("dojox.gfx.shape"),e.require("dojox.gfx.path"),e.experimental("dojox.gfx.silverlight"),dojox.gfx.silverlight.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},dojox.gfx.silverlight.fontweight={normal:400,bold:700},dojox.gfx.silverlight.caps={butt:"Flat",round:"Round",square:"Square"},dojox.gfx.silverlight.joins={bevel:"Bevel",round:"Round"},dojox.gfx.silverlight.fonts={serif:"Times New Roman",times:"Times New Roman","sans-serif":"Arial",helvetica:"Arial",monotone:"Courier New",courier:"Courier New"},dojox.gfx.silverlight.hexColor=function(e){var t=dojox.gfx.normalizeColor(e),o=t.toHex(),r=Math.round(255*t.a);return r=(0>r?0:r>255?255:r).toString(16),"#"+(r.length<2?"0"+r:r)+o.slice(1)},e.extend(dojox.gfx.Shape,{setFill:function(t){var o,r=this.rawNode.getHost().content,a=this.rawNode;if(!t)return this.fillStyle=null,this._setFillAttr(null),this;if("object"==typeof t&&"type"in t){switch(t.type){case"linear":this.fillStyle=o=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,t);var i=r.createFromXaml("<LinearGradientBrush/>");i.mappingMode="Absolute",i.startPoint=o.x1+","+o.y1,i.endPoint=o.x2+","+o.y2,e.forEach(o.colors,function(e){var t=r.createFromXaml("<GradientStop/>");t.offset=e.offset,t.color=dojox.gfx.silverlight.hexColor(e.color),i.gradientStops.add(t)}),this._setFillAttr(i);break;case"radial":this.fillStyle=o=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,t);var n=r.createFromXaml("<RadialGradientBrush/>"),s=a.width,h=a.height,d=this.rawNode["Canvas.Left"],l=this.rawNode["Canvas.Top"];n.center=(o.cx-d)/s+","+(o.cy-l)/h,n.radiusX=o.r/s,n.radiusY=o.r/h,e.forEach(o.colors,function(e){var t=r.createFromXaml("<GradientStop/>");t.offset=e.offset,t.color=dojox.gfx.silverlight.hexColor(e.color),n.gradientStops.add(t)}),this._setFillAttr(n);break;case"pattern":this.fillStyle=null,this._setFillAttr(null)}return this}this.fillStyle=o=dojox.gfx.normalizeColor(t);var x=r.createFromXaml("<SolidColorBrush/>");return x.color=o.toHex(),x.opacity=o.a,this._setFillAttr(x),this},_setFillAttr:function(e){this.rawNode.fill=e},setStroke:function(t){var o=this.rawNode.getHost().content,r=this.rawNode;if(!t)return this.strokeStyle=null,r.stroke=null,this;"string"==typeof t&&(t={color:t});var a=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,t);if(a.color=dojox.gfx.normalizeColor(a.color),a){var i=o.createFromXaml("<SolidColorBrush/>");i.color=a.color.toHex(),i.opacity=a.color.a,r.stroke=i,r.strokeThickness=a.width,r.strokeStartLineCap=r.strokeEndLineCap=r.strokeDashCap=dojox.gfx.silverlight.caps[a.cap],"number"==typeof a.join?(r.strokeLineJoin="Miter",r.strokeMiterLimit=a.join):r.strokeLineJoin=dojox.gfx.silverlight.joins[a.join];var n=a.style.toLowerCase();if(n in dojox.gfx.silverlight.dasharray&&(n=dojox.gfx.silverlight.dasharray[n]),n instanceof Array){if(n=e.clone(n),"butt"!=a.cap){for(var s=0;s<n.length;s+=2)--n[s],n[s]<1&&(n[s]=1);for(var s=1;s<n.length;s+=2)++n[s]}r.strokeDashArray=n.join(",")}else r.strokeDashArray=null}return this},_getParentSurface:function(){for(var e=this.parent;e&&!(e instanceof dojox.gfx.Surface);e=e.parent);return e},_applyTransform:function(){var e=this.matrix,t=this.rawNode;if(e){var o=this.rawNode.getHost().content,r=o.createFromXaml("<MatrixTransform/>"),a=o.createFromXaml("<Matrix/>");a.m11=e.xx,a.m21=e.xy,a.m12=e.yx,a.m22=e.yy,a.offsetX=e.dx,a.offsetY=e.dy,r.matrix=a,t.renderTransform=r}else t.renderTransform=null;return this},setRawNode:function(e){e.fill=null,e.stroke=null,this.rawNode=e},_moveToFront:function(){var e=this.parent.rawNode.children,t=this.rawNode;return e.remove(t),e.add(t),this},_moveToBack:function(){var e=this.parent.rawNode.children,t=this.rawNode;return e.remove(t),e.insert(0,t),this}}),e.declare("dojox.gfx.Group",dojox.gfx.Shape,{constructor:function(){dojox.gfx.silverlight.Container._init.call(this)},setRawNode:function(e){this.rawNode=e}}),dojox.gfx.Group.nodeType="Canvas",e.declare("dojox.gfx.Rect",dojox.gfx.shape.Rect,{setShape:function(e){this.shape=dojox.gfx.makeParameters(this.shape,e),this.bbox=null;var t=this.rawNode,o=this.shape;return t["Canvas.Left"]=o.x,t["Canvas.Top"]=o.y,t.width=o.width,t.height=o.height,t.radiusX=t.radiusY=o.r,this}}),dojox.gfx.Rect.nodeType="Rectangle",e.declare("dojox.gfx.Ellipse",dojox.gfx.shape.Ellipse,{setShape:function(e){this.shape=dojox.gfx.makeParameters(this.shape,e),this.bbox=null;var t=this.rawNode,o=this.shape;return t["Canvas.Left"]=o.cx-o.rx,t["Canvas.Top"]=o.cy-o.ry,t.width=2*o.rx,t.height=2*o.ry,this}}),dojox.gfx.Ellipse.nodeType="Ellipse",e.declare("dojox.gfx.Circle",dojox.gfx.shape.Circle,{setShape:function(e){this.shape=dojox.gfx.makeParameters(this.shape,e),this.bbox=null;var t=this.rawNode,o=this.shape;return t["Canvas.Left"]=o.cx-o.r,t["Canvas.Top"]=o.cy-o.r,t.width=t.height=2*o.r,this}}),dojox.gfx.Circle.nodeType="Ellipse",e.declare("dojox.gfx.Line",dojox.gfx.shape.Line,{setShape:function(e){this.shape=dojox.gfx.makeParameters(this.shape,e),this.bbox=null;var t=this.rawNode,o=this.shape;return t.x1=o.x1,t.y1=o.y1,t.x2=o.x2,t.y2=o.y2,this}}),dojox.gfx.Line.nodeType="Line",e.declare("dojox.gfx.Polyline",dojox.gfx.shape.Polyline,{setShape:function(e,t){e&&e instanceof Array?(this.shape=dojox.gfx.makeParameters(this.shape,{points:e}),t&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=dojox.gfx.makeParameters(this.shape,e),this.box=null;for(var o=this.shape.points,r=[],a=0;a<o.length;++a)"number"==typeof o[a]?r.push(o[a],o[++a]):r.push(o[a].x,o[a].y);return this.rawNode.points=r.join(","),this}}),dojox.gfx.Polyline.nodeType="Polyline",e.declare("dojox.gfx.Image",dojox.gfx.shape.Image,{setShape:function(e){this.shape=dojox.gfx.makeParameters(this.shape,e),this.bbox=null;var t=this.rawNode,o=this.shape;return t["Canvas.Left"]=o.x,t["Canvas.Top"]=o.y,t.width=o.width,t.height=o.height,t.source=o.src,this},setRawNode:function(e){this.rawNode=e}}),dojox.gfx.Image.nodeType="Image",e.declare("dojox.gfx.Text",dojox.gfx.shape.Text,{setShape:function(t){this.shape=dojox.gfx.makeParameters(this.shape,t),this.bbox=null;var o=this.rawNode,r=this.shape;return o.text=r.text,o.textDecorations="underline"==r.decoration?"Underline":"None",o["Canvas.Left"]=-1e4,o["Canvas.Top"]=-1e4,window.setTimeout(e.hitch(this,"_delayAlignment"),0),this},_delayAlignment:function(){var e=this.rawNode,t=this.shape,o=e.actualWidth,r=e.actualHeight,a=t.x,i=t.y-.75*r;switch(t.align){case"middle":a-=o/2;break;case"end":a-=o}var n=this.matrix?dojox.gfx.matrix.multiplyPoint(this.matrix,a,i):{x:a,y:i};e["Canvas.Left"]=n.x,e["Canvas.Top"]=n.y},setStroke:function(){return this},_setFillAttr:function(e){this.rawNode.foreground=e},setRawNode:function(e){this.rawNode=e},_applyTransform:function(){var e=this.matrix,t=this.rawNode;if(e){e=dojox.gfx.matrix.normalize([.01,e,100]);var o=this.rawNode.getHost().content,r=o.createFromXaml("<MatrixTransform/>"),a=o.createFromXaml("<Matrix/>");a.m11=e.xx,a.m21=e.xy,a.m12=e.yx,a.m22=e.yy,a.offsetX=e.dx,a.offsetY=e.dy,r.matrix=a,t.renderTransform=r}else t.renderTransform=null;return this},getTextWidth:function(){return this.rawNode.actualWidth}}),dojox.gfx.Text.nodeType="TextBlock",e.declare("dojox.gfx.Path",dojox.gfx.path.Path,{_updateWithSegment:function(){dojox.gfx.Path.superclass._updateWithSegment.apply(this,arguments);var e=this.shape.path;"string"==typeof e&&(this.rawNode.data=e?e:null)},setShape:function(){dojox.gfx.Path.superclass.setShape.apply(this,arguments);var e=this.shape.path;return this.rawNode.data=e?e:null,this}}),dojox.gfx.Path.nodeType="Path",e.declare("dojox.gfx.TextPath",dojox.gfx.path.TextPath,{_updateWithSegment:function(){},setShape:function(){},_setText:function(){}}),dojox.gfx.TextPath.nodeType="text",e.declare("dojox.gfx.Surface",dojox.gfx.shape.Surface,{constructor:function(){dojox.gfx.silverlight.Container._init.call(this)},setDimensions:function(e,t){this.width=dojox.gfx.normalizedLength(e),this.height=dojox.gfx.normalizedLength(t);var o=this.rawNode&&this.rawNode.getHost();return o&&(o.width=e,o.height=t),this},getDimensions:function(){var e=this.rawNode&&this.rawNode.getHost(),t=e?{width:e.content.actualWidth,height:e.content.actualHeight}:null;return t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),t}}),dojox.gfx.silverlight.surfaces={},dojox.gfx.createSurface=function(t,o,r){var a=new dojox.gfx.Surface;t=e.byId(t);var i=t.ownerDocument.createElement("script");i.type="text/xaml",i.id=dojox.gfx._base._getUniqueId(),i.text="<Canvas xmlns='http://schemas.microsoft.com/client/2007' Name='"+dojox.gfx._base._getUniqueId()+"'/>",document.body.appendChild(i);var n=dojox.gfx._base._getUniqueId();return Silverlight.createObject("#"+i.id,t,n,{width:String(o),height:String(r),inplaceInstallPrompt:"false",background:"transparent",isWindowless:"true",framerate:"24",version:"1.0"},{},null,null),a.rawNode=e.byId(n).content.root,dojox.gfx.silverlight.surfaces[a.rawNode.name]=t,a.width=dojox.gfx.normalizedLength(o),a.height=dojox.gfx.normalizedLength(r),a},dojox.gfx.silverlight.Font={_setFont:function(){var e=this.fontStyle,t=this.rawNode,o=dojox.gfx.silverlight.fontweight,r=dojox.gfx.silverlight.fonts,a=e.family.toLowerCase();t.fontStyle="italic"==e.style?"Italic":"Normal",t.fontWeight=e.weight in o?o[e.weight]:e.weight,t.fontSize=dojox.gfx.normalizedLength(e.size),t.fontFamily=a in r?r[a]:e.family}},dojox.gfx.silverlight.Container={_init:function(){dojox.gfx.shape.Container._init.call(this)},add:function(e){return this!=e.getParent()&&(dojox.gfx.shape.Container.add.apply(this,arguments),this.rawNode.children.add(e.rawNode)),this},remove:function(e){if(this==e.getParent()){var t=e.rawNode.getParent();t&&t.children.remove(e.rawNode),dojox.gfx.shape.Container.remove.apply(this,arguments)}return this},clear:function(){return this.rawNode.children.clear(),dojox.gfx.shape.Container.clear.apply(this,arguments)},_moveChildToFront:dojox.gfx.shape.Container._moveChildToFront,_moveChildToBack:dojox.gfx.shape.Container._moveChildToBack},e.mixin(dojox.gfx.shape.Creator,{createObject:function(e,t){if(!this.rawNode)return null;var o=new e,r=this.rawNode.getHost().content.createFromXaml("<"+e.nodeType+"/>");return o.setRawNode(r),o.setShape(t),this.add(o),o}}),e.extend(dojox.gfx.Text,dojox.gfx.silverlight.Font),e.extend(dojox.gfx.Group,dojox.gfx.silverlight.Container),e.extend(dojox.gfx.Group,dojox.gfx.shape.Creator),e.extend(dojox.gfx.Surface,dojox.gfx.silverlight.Container),e.extend(dojox.gfx.Surface,dojox.gfx.shape.Creator),function(){var t=dojox.gfx.silverlight.surfaces,o=function(o,r){var a={target:o,currentTarget:o,preventDefault:function(){},stopPropagation:function(){}};if(r){a.ctrlKey=r.ctrl,a.shiftKey=r.shift;var i=r.getPosition(null);a.x=a.offsetX=a.layerX=i.x,a.y=a.offsetY=a.layerY=i.y;var n=t[o.getHost().content.root.name],s=e._abs(n);a.clientX=s.x+i.x,a.clientY=s.y+i.y}return a},r=function(e,t){var o={keyCode:t.platformKeyCode,ctrlKey:t.ctrl,shiftKey:t.shift};return o},a={onclick:{name:"MouseLeftButtonUp",fix:o},onmouseenter:{name:"MouseEnter",fix:o},onmouseleave:{name:"MouseLeave",fix:o},onmousedown:{name:"MouseLeftButtonDown",fix:o},onmouseup:{name:"MouseLeftButtonUp",fix:o},onmousemove:{name:"MouseMove",fix:o},onkeydown:{name:"KeyDown",fix:r},onkeyup:{name:"KeyUp",fix:r}},i={connect:function(t,o,r){var i,n=t in a?a[t]:{name:t,fix:function(){return{}}};return i=arguments.length>2?this.getEventSource().addEventListener(n.name,function(t,a){e.hitch(o,r)(n.fix(t,a))}):this.getEventSource().addEventListener(n.name,function(e,t){o(n.fix(e,t))}),{name:n.name,token:i}},disconnect:function(e){this.getEventSource().removeEventListener(e.name,e.token)}};e.extend(dojox.gfx.Shape,i),e.extend(dojox.gfx.Surface,i),dojox.gfx.equalSources=function(e,t){return e&&t&&e.equals(t)}}())}});