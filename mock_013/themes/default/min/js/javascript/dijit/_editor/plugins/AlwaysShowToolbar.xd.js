dojo._xdResourceLoaded({depends:[["provide","dijit._editor.plugins.AlwaysShowToolbar"]],defineResource:function(dojo){dojo._hasResource["dijit._editor.plugins.AlwaysShowToolbar"]||(dojo._hasResource["dijit._editor.plugins.AlwaysShowToolbar"]=!0,dojo.provide("dijit._editor.plugins.AlwaysShowToolbar"),dojo.declare("dijit._editor.plugins.AlwaysShowToolbar",null,{_handleScroll:!0,setEditor:function(o){this.editor=o,o.onLoadDeferred.addCallback(dojo.hitch(this,this.enable))},enable:function(o){return this._updateHeight(),this._connects=[dojo.connect(window,"onscroll",this,"globalOnScrollHandler"),dojo.connect(this.editor,"onNormalizedDisplayChanged",this,"_updateHeight")],o},_updateHeight:function(){var o=this.editor;if(o.isLoaded&&!o.height){var i=dojo.marginBox(o.editNode).h;return dojo.isOpera&&(i=o.editNode.scrollHeight),i||(i=dojo.marginBox(o.document.body).h),0==i?(console.debug("Can not figure out the height of the editing area!"),void 0):(i!=this._lastHeight&&(this._lastHeight=i,dojo.marginBox(o.iframe,{h:this._lastHeight})),void 0)}},_lastHeight:0,globalOnScrollHandler:function(){var isIE=dojo.isIE&&dojo.isIE<7;if(this._handleScroll){{var tdn=this.editor.toolbar.domNode;dojo.body}this._scrollSetUp||(this._scrollSetUp=!0,this._scrollThreshold=dojo._abs(tdn,!0).y);var scrollPos=dojo._docScroll().y;if(scrollPos>this._scrollThreshold&&scrollPos<this._scrollThreshold+this._lastHeight){if(!this._fixEnabled){var tdnbox=dojo.marginBox(tdn);if(this.editor.iframe.style.marginTop=tdnbox.h+"px",isIE)tdn.style.left=dojo._abs(tdn).x,this._IEOriginalPos=tdn.previousSibling?["after",tdn.previousSibling]:tdn.nextSibling?["before",tdn.nextSibling]:["last",tdn.parentNode],dojo.body().appendChild(tdn),dojo.addClass(tdn,"IEFixedToolbar");else with(tdn.style)position="fixed",top="0px";dojo.marginBox(tdn,{w:tdnbox.w}),tdn.style.zIndex=2e3,this._fixEnabled=!0}var eHeight=this.height?parseInt(this.editor.height):this.editor._lastHeight;tdn.style.display=scrollPos>this._scrollThreshold+eHeight?"none":""}else if(this._fixEnabled){with(this.editor.iframe.style.marginTop="",tdn.style)position="",top="",zIndex="",display="";isIE&&(tdn.style.left="",dojo.removeClass(tdn,"IEFixedToolbar"),this._IEOriginalPos?(dojo.place(tdn,this._IEOriginalPos[1],this._IEOriginalPos[0]),this._IEOriginalPos=null):dojo.place(tdn,this.editor.iframe,"before")),tdn.style.width="",this._fixEnabled=!1}}},destroy:function(){this._IEOriginalPos=null,this._handleScroll=!1,dojo.forEach(this._connects,dojo.disconnect),dojo.isIE&&dojo.isIE<7&&dojo.removeClass(this.editor.toolbar.domNode,"IEFixedToolbar")}}))}});