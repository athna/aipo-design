dojo._hasResource["dojox.dtl.tag.html"]||(dojo._hasResource["dojox.dtl.tag.html"]=!0,dojo.provide("dojox.dtl.tag.html"),dojo.require("dojox.dtl._base"),dojox.dtl.tag.html.HtmlNode=function(t){this.contents=new dojox.dtl.Filter(t),this._div=document.createElement("div"),this._lasts=[]},dojo.extend(dojox.dtl.tag.html.HtmlNode,{render:function(t,e){var o=this.contents.resolve(t);if(o=o.replace(/<(\/?script)/gi,"&lt;$1").replace(/\bon[a-z]+\s*=/gi,""),this._rendered&&this._last!=o&&(e=this.unrender(t,e)),this._last=o,!this._rendered){this._rendered=!0;var n=this._div;n.innerHTML=o;for(var d=n.childNodes;d.length;){var r=n.removeChild(d[0]);this._lasts.push(r),e=e.concat(r)}}return e},unrender:function(t,e){if(this._rendered){this._rendered=!1,this._last="";for(var o,n=0;o=this._lasts[n++];)e=e.remove(o),dojo._destroyElement(o);this._lasts=[]}return e},clone:function(){return new dojox.dtl.tag.html.HtmlNode(this.contents.contents)},toString:function(){return"dojox.dtl.tag.html.HtmlNode"}}),dojox.dtl.tag.html.StyleNode=function(t){this.contents={},this._styles=t;for(var e in t)this.contents[e]=new dojox.dtl.Template(t[e])},dojo.extend(dojox.dtl.tag.html.StyleNode,{render:function(t,e){for(var o in this.contents)dojo.style(e.getParent(),o,this.contents[o].render(t));return e},unrender:function(t,e){return e},clone:function(){return new dojox.dtl.tag.html.HtmlNode(this._styles)},toString:function(){return"dojox.dtl.tag.html.StyleNode"}}),dojox.dtl.tag.html.AttachNode=function(t){this.contents=t},dojo.extend(dojox.dtl.tag.html.AttachNode,{render:function(t,e){return this._rendered||(this._rendered=!0,t.getThis()[this.contents]=e.getParent()),e},unrender:function(t,e){return this._rendered&&(this._rendered=!1,t.getThis()[this.contents]===e.getParent()&&delete t.getThis()[this.contents]),e},clone:function(){return new dojox.dtl.tag.html.HtmlNode(this._styles)},toString:function(){return"dojox.dtl.tag.html.AttachNode"}}),dojox.dtl.tag.html.html=function(t,e){var o=e.split(" ",2);return new dojox.dtl.tag.html.HtmlNode(o[1])},dojox.dtl.tag.html.tstyle=function(t,e){var o={};e=e.replace(dojox.dtl.tag.html.tstyle._re,"");for(var n,d=e.split(dojox.dtl.tag.html.tstyle._re1),r=0;n=d[r];r++){var l=n.split(dojox.dtl.tag.html.tstyle._re2),s=l[0],i=l[1];0==i.indexOf("{{")&&(o[s]=i)}return new dojox.dtl.tag.html.StyleNode(o)},dojo.mixin(dojox.dtl.tag.html.tstyle,{_re:/^tstyle\s+/,_re1:/\s*;\s*/g,_re2:/\s*:\s*/g}),dojox.dtl.tag.html.attach=function(t,e){var o=e.split(dojox.dtl.tag.html.attach._re);return new dojox.dtl.tag.html.AttachNode(o[1])},dojo.mixin(dojox.dtl.tag.html.attach,{_re:/\s+/g}));