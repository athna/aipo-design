dojo._xdResourceLoaded({depends:[["require","dojox.gfx.vml"]],defineResource:function(e){e.require("dojox.gfx.vml"),e.experimental("dojox.gfx.vml_attach"),function(){dojox.gfx.attachNode=function(e){if(!e)return null;var p=null;switch(e.tagName.toLowerCase()){case dojox.gfx.Rect.nodeType:p=new dojox.gfx.Rect(e),r(p);break;case dojox.gfx.Ellipse.nodeType:e.style.width==e.style.height?(p=new dojox.gfx.Circle(e),l(p)):(p=new dojox.gfx.Ellipse(e),n(p));break;case dojox.gfx.Path.nodeType:switch(e.getAttribute("dojoGfxType")){case"line":p=new dojox.gfx.Line(e),x(p);break;case"polyline":p=new dojox.gfx.Polyline(e),i(p);break;case"path":p=new dojox.gfx.Path(e),h(p);break;case"text":p=new dojox.gfx.Text(e),f(p),g(p),c(p);break;case"textpath":p=new dojox.gfx.TextPath(e),h(p),f(p),g(p)}break;case dojox.gfx.Image.nodeType:switch(e.getAttribute("dojoGfxType")){case"image":p=new dojox.gfx.Image(e),s(p),d(p)}break;default:return null}return p instanceof dojox.gfx.Image||(o(p),t(p),p instanceof dojox.gfx.Text||a(p)),p},dojox.gfx.attachSurface=function(e){var o=new dojox.gfx.Surface;o.clipNode=e;var t=o.rawNode=e.firstChild,a=t.firstChild;return a&&"rect"==a.tagName?(o.bgNode=t,o):null};var o=function(o){var t=null,a=o.rawNode,r=a.fill;if(r.on&&"gradient"==r.type){var t=e.clone(dojox.gfx.defaultLinearGradient),n=dojox.gfx.matrix._degToRad(r.angle);t.x2=Math.cos(n),t.y2=Math.sin(n),t.colors=[];for(var l=r.colors.value.split(";"),x=0;x<l.length;++x){var i=l[x].match(/\S+/g);i&&2==i.length&&t.colors.push({offset:dojox.gfx.vml._parseFloat(i[0]),color:new e.Color(i[1])})}}else if(r.on&&"gradientradial"==r.type){var t=e.clone(dojox.gfx.defaultRadialGradient),s=parseFloat(a.style.width),d=parseFloat(a.style.height);t.cx=isNaN(s)?0:r.focusposition.x*s,t.cy=isNaN(d)?0:r.focusposition.y*d,t.r=isNaN(s)?1:s/2,t.colors=[];for(var l=r.colors.value.split(";"),x=l.length-1;x>=0;--x){var i=l[x].match(/\S+/g);i&&2==i.length&&t.colors.push({offset:dojox.gfx.vml._parseFloat(i[0]),color:new e.Color(i[1])})}}else if(r.on&&"tile"==r.type){var t=e.clone(dojox.gfx.defaultPattern);t.width=dojox.gfx.pt2px(r.size.x),t.height=dojox.gfx.pt2px(r.size.y),t.x=r.origin.x*t.width,t.y=r.origin.y*t.height,t.src=r.src}else r.on&&a.fillcolor&&(t=new e.Color(a.fillcolor+""),t.a=r.opacity);o.fillStyle=t},t=function(o){var t=o.rawNode;if(!t.stroked)return o.strokeStyle=null,void 0;var a=o.strokeStyle=e.clone(dojox.gfx.defaultStroke),r=t.stroke;a.color=new e.Color(t.strokecolor.value),a.width=dojox.gfx.normalizedLength(t.strokeweight+""),a.color.a=r.opacity,a.cap=this._translate(this._capMapReversed,r.endcap),a.join="miter"==r.joinstyle?r.miterlimit:r.joinstyle,a.style=r.dashstyle},a=function(e){var o=rawNode.skew,t=o.matrix,a=o.offset;e.matrix=dojox.gfx.matrix.normalize({xx:t.xtox,xy:t.ytox,yx:t.xtoy,yy:t.ytoy,dx:dojox.gfx.pt2px(a.x),dy:dojox.gfx.pt2px(a.y)})},r=function(e){var o=e.rawNode,t=o.outerHTML.match(/arcsize = \"(\d*\.?\d+[%f]?)\"/)[1],a=o.style,r=parseFloat(a.width),n=parseFloat(a.height);t=t.indexOf("%")>=0?parseFloat(t)/100:dojox.gfx.vml._parseFloat(t),e.shape=dojox.gfx.makeParameters(dojox.gfx.defaultRect,{x:parseInt(a.left),y:parseInt(a.top),width:r,height:n,r:Math.min(r,n)*t})},n=function(e){var o=e.rawNode.style,t=parseInt(o.width)/2,a=parseInt(o.height)/2;e.shape=dojox.gfx.makeParameters(dojox.gfx.defaultEllipse,{cx:parseInt(o.left)+t,cy:parseInt(o.top)+a,rx:t,ry:a})},l=function(e){var o=e.rawNode.style,t=parseInt(o.width)/2;e.shape=dojox.gfx.makeParameters(dojox.gfx.defaultCircle,{cx:parseInt(o.left)+t,cy:parseInt(o.top)+t,r:t})},x=function(o){var t=o.shape=e.clone(dojox.gfx.defaultLine),a=o.rawNode.path.v.match(dojox.gfx.pathVmlRegExp);do{if(a.length<7||"m"!=a[0]||"l"!=a[3]||"e"!=a[6])break;t.x1=parseInt(a[1]),t.y1=parseInt(a[2]),t.x2=parseInt(a[4]),t.y2=parseInt(a[5])}while(!1)},i=function(o){var t=o.shape=e.clone(dojox.gfx.defaultPolyline),a=o.rawNode.path.v.match(dojox.gfx.pathVmlRegExp);do{if(a.length<3||"m"!=a[0])break;var r=parseInt(a[0]),n=parseInt(a[1]);if(isNaN(r)||isNaN(n))break;if(t.points.push({x:r,y:n}),a.length<6||"l"!=a[3])break;for(var l=4;l<a.length&&(r=parseInt(a[l]),n=parseInt(a[l+1]),!isNaN(r)&&!isNaN(n));l+=2)t.points.push({x:r,y:n})}while(!1)},s=function(o){o.shape=e.clone(dojox.gfx.defaultImage),o.shape.src=o.rawNode.firstChild.src},d=function(e){var o=e.rawNode.filters["DXImageTransform.Microsoft.Matrix"];e.matrix=dojox.gfx.matrix.normalize({xx:o.M11,xy:o.M12,yx:o.M21,yy:o.M22,dx:o.Dx,dy:o.Dy})},f=function(o){var t=o.shape=e.clone(dojox.gfx.defaultText),a=o.rawNode,r=a.path.v.match(dojox.gfx.pathVmlRegExp);do{if(!r||7!=r.length)break;for(var n=a.childNodes,l=0;l<n.length&&"textpath"!=n[l].tagName;++l);if(l>=n.length)break;var x=n[l].style;switch(t.text=n[l].string,x["v-text-align"]){case"left":t.x=parseInt(r[1]),t.align="start";break;case"center":t.x=(parseInt(r[1])+parseInt(r[4]))/2,t.align="middle";break;case"right":t.x=parseInt(r[4]),t.align="end"}return t.y=parseInt(r[2]),t.decoration=x["text-decoration"],t.rotated=x["v-rotate-letters"].toLowerCase()in dojox.gfx.vml._bool,t.kerning=x["v-text-kern"].toLowerCase()in dojox.gfx.vml._bool,void 0}while(!1);o.shape=null},g=function(o){for(var t=o.fontStyle=e.clone(dojox.gfx.defaultFont),a=o.rawNode.childNodes,r=0;r<a.length&&"textpath"==a[r].tagName;++r);if(r>=a.length)return o.fontStyle=null,void 0;var n=a[r].style;t.style=n.fontstyle,t.variant=n.fontvariant,t.weight=n.fontweight,t.size=n.fontsize,t.family=n.fontfamily},c=function(e){a(e);var o=e.matrix,t=e.fontStyle;o&&t&&(e.matrix=dojox.gfx.matrix.multiply(o,{dy:.35*dojox.gfx.normalizedLength(t.size)}))},h=function(o){for(var t=o.shape=e.clone(dojox.gfx.defaultPath),a=rawNode.path.v.match(dojox.gfx.pathVmlRegExp),r=[],n=!1,l=dojox.gfx.Path._pathVmlToSvgMap,x=0;x<a.length;++a){var i=a[x];if(i in l)n=!1,r.push(l[i]);else if(!n){var s=parseInt(i);isNaN(s)?n=!0:r.push(s)}}var d=r.length;d>=4&&""==r[d-1]&&0==r[d-2]&&0==r[d-3]&&"l"==r[d-4]&&r.splice(d-4,4),d&&(t.path=r.join(" "))}}()}});