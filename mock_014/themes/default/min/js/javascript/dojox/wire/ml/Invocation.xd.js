dojo._xdResourceLoaded({depends:[["provide","dojox.wire.ml.Invocation"],["require","dojox.wire.ml.Action"]],defineResource:function(e){e._hasResource["dojox.wire.ml.Invocation"]||(e._hasResource["dojox.wire.ml.Invocation"]=!0,e.provide("dojox.wire.ml.Invocation"),e.require("dojox.wire.ml.Action"),e.declare("dojox.wire.ml.Invocation",dojox.wire.ml.Action,{object:"",method:"",topic:"",parameters:"",result:"",error:"",_run:function(){if(this.topic){var o=this._getParameters(arguments);try{e.publish(this.topic,o),this.onComplete()}catch(r){this.onError(r)}}else if(this.method){var t=this.object?dojox.wire.ml._getValue(this.object):e.global;if(!t)return;var o=this._getParameters(arguments),i=t[this.method];if(!i){if(i=t.callMethod,!i)return;o=[this.method,o]}try{var n=!1;if(t.getFeatures){var s=t.getFeatures();if("fetch"==this.method&&s["dojo.data.api.Read"]||"save"==this.method&&s["dojo.data.api.Write"]){var a=o[0];a.onComplete||(a.onComplete=function(){}),this.connect(a,"onComplete","onComplete"),a.onError||(a.onError=function(){}),this.connect(a,"onError","onError"),n=!0}}var l=i.apply(t,o);if(!n)if(l&&l instanceof e.Deferred){var h=this;l.addCallbacks(function(e){h.onComplete(e)},function(e){h.onError(e)})}else this.onComplete(l)}catch(r){this.onError(r)}}},onComplete:function(e){this.result&&dojox.wire.ml._setValue(this.result,e),this.error&&dojox.wire.ml._setValue(this.error,"")},onError:function(e){this.error&&(e&&e.message&&(e=e.message),dojox.wire.ml._setValue(this.error,e))},_getParameters:function(o){if(!this.parameters)return o;var r=[],t=this.parameters.split(",");if(1==t.length){var i=dojox.wire.ml._getValue(t[0],o);e.isArray(i)?r=i:r.push(i)}else for(var n in t)r.push(dojox.wire.ml._getValue(t[n],o));return r}}))}});