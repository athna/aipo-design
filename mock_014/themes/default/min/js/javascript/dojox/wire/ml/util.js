dojo._hasResource["dojox.wire.ml.util"]||(dojo._hasResource["dojox.wire.ml.util"]=!0,dojo.provide("dojox.wire.ml.util"),dojo.require("dojox.data.dom"),dojo.require("dojox.wire.Wire"),dojox.wire.ml._getValue=function(e,t){if(!e)return void 0;var i=void 0;if(t&&e.length>=9&&"arguments"==e.substring(0,9))return i=e.substring(9),new dojox.wire.Wire({property:i}).getValue(t);var r=e.indexOf(".");r>=0&&(i=e.substring(r+1),e=e.substring(0,r));var n=dijit.byId(e)||dojo.byId(e)||dojo.getObject(e);return n?i?new dojox.wire.Wire({object:n,property:i}).getValue():n:void 0},dojox.wire.ml._setValue=function(e,t){if(e){var i=e.indexOf(".");if(!(0>i)){var r=this._getValue(e.substring(0,i));if(r){var n=e.substring(i+1);new dojox.wire.Wire({object:r,property:n}).setValue(t)}}}},dojo.declare("dojox.wire.ml.XmlElement",null,{constructor:function(e){dojo.isString(e)&&(e=this._getDocument().createElement(e)),this.element=e},getPropertyValue:function(e){var t=void 0;if(!this.element)return t;if(!e)return t;if("@"==e.charAt(0)){var i=e.substring(1);t=this.element.getAttribute(i)}else if("text()"==e){var r=this.element.firstChild;r&&(t=r.nodeValue)}else{for(var n=[],o=0;o<this.element.childNodes.length;o++){var l=this.element.childNodes[o];1===l.nodeType&&l.nodeName==e&&n.push(new dojox.wire.ml.XmlElement(l))}n.length>0&&(t=1===n.length?n[0]:n)}return t},setPropertyValue:function(e,t){if(this.element&&e)if("@"==e.charAt(0)){var i=e.substring(1);t?this.element.setAttribute(i,t):this.element.removeAttribute(i)}else if("text()"==e){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);if(t){var r=this._getDocument().createTextNode(t);this.element.appendChild(r)}}else{for(var n=null,o=this.element.childNodes.length-1;o>=0;o--){var l=this.element.childNodes[o];1===l.nodeType&&l.nodeName==e&&(n||(n=l.nextSibling),this.element.removeChild(l))}if(t)if(dojo.isArray(t))for(var o in t){var s=t[o];s.element&&this.element.insertBefore(s.element,n)}else if(t instanceof dojox.wire.ml.XmlElement)t.element&&this.element.insertBefore(t.element,n);else{var l=this._getDocument().createElement(e),r=this._getDocument().createTextNode(t);l.appendChild(r),this.element.insertBefore(l,n)}}},toString:function(){var e="";if(this.element){var t=this.element.firstChild;t&&(e=t.nodeValue)}return e},toObject:function(){if(!this.element)return null;for(var e="",t={},i=0,r=0;r<this.element.childNodes.length;r++){var n=this.element.childNodes[r];if(1===n.nodeType){i++;var o=new dojox.wire.ml.XmlElement(n).toObject(),l=n.nodeName,s=t[l];s?dojo.isArray(s)?s.push(o):t[l]=[s,o]:t[l]=o}else(3===n.nodeType||4===n.nodeType)&&(e+=n.nodeValue)}var d=0;if(1===this.element.nodeType){d=this.element.attributes.length;for(var r=0;d>r;r++){var m=this.element.attributes[r];t["@"+m.nodeName]=m.nodeValue}}if(0===i){if(0===d)return e;t["text()"]=e}return t},_getDocument:function(){return this.element?9==this.element.nodeType?this.element:this.element.ownerDocument:dojox.data.dom.createDocument()}}));