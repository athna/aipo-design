aimluck.namespace("aimluck.io"),dojo.provide("aimluck.io"),dojo.require("dojo.string"),dojo.requireLocalization("aipo","locale"),aimluck.io.submit=function(e,i,o,t){aimluck.io.disableForm(e,!0);var a=dojo.byId(i+o);a&&dojo.style(a,"display","");try{dojo.xhrPost({url:e.action,timeout:3e4,form:e,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(n){var l="";dojo.isArray(n)&&n.length>0&&("PermissionError"==n[0]?(l+="<ul>",l+="<li><span class='caution'>"+n[1]+"</span></li>",l+="</ul>"):(l+="<ul>",dojo.forEach(n,function(e){l+="<li><span class='caution'>"+e+"</span></li>"}),l+="</ul>")),t.call(t,l),a=dojo.byId(i+o),a&&dojo.style(a,"display","none"),""!=l&&aimluck.io.disableForm(e,!1)},error:function(){}})}catch(n){}return!1},aimluck.io.submit_callbackparams=function(e,i,o,t){aimluck.io.disableForm(e,!0);var a=dojo.byId(i+o);a&&dojo.style(a,"display","");var n=function(e){var i="";return dojo.isArray(e)&&e.length>0&&("PermissionError"==e[0]?(i+="<ul>",i+="<li><span class='caution'>"+e[1]+"</span></li>",i+="</ul>"):(i+="<ul>",dojo.forEach(e,function(e){i+="<li><span class='caution'>"+e+"</span></li>"}),i+="</ul>")),i};try{dojo.xhrPost({url:e.action,timeout:3e4,form:e,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(l){var r=[],u="";l.err&&(u=n(l.err)),r.push(u),dojo.isArray(l.params)&&dojo.forEach(l.params,function(e){r.push(e)}),t.apply(t,r),a=dojo.byId(i+o),a&&dojo.style(a,"display","none"),aimluck.io.disableForm(e,!1)},error:function(){}})}catch(l){}return!1},aimluck.io.xhr_http_request=function(e,i,o,t){aimluck.io.disableForm(e,!0);var a=dojo.byId(i+o);a&&dojo.style(a,"display","");var n=function(e){var i="";return dojo.isArray(e)&&e.length>0&&("PermissionError"==e[0]?(i+="<ul>",i+="<li><span class='caution'>"+e[1]+"</span></li>",i+="</ul>"):(i+="<ul>",dojo.forEach(e,function(e){i+="<li><span class='caution'>"+e+"</span></li>"}),i+="</ul>")),i};try{dojo.xhrPost({url:e.action,timeout:3e4,form:e,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(l){var r=[],u="";l.err&&(u=n(l.err)),r.push(u),dojo.isArray(l.params)&&dojo.forEach(l.params,function(e){r.push(e)}),t.apply(t,r),a=dojo.byId(i+o),a&&dojo.style(a,"display","none"),aimluck.io.disableForm(e,!1)},error:function(){}})}catch(l){}return!1},aimluck.io.sendData=function(e,i,o){var t=new Array;return t.callback=o,aimluck.io.sendRawData(e,i,sendErrorData,t),!1},aimluck.io.sendErrorData=function(e,i){var o="";return dojo.isArray(i.data)&&i.data.length>0&&(o+="<ul>",dojo.forEach(i.data,function(e){o+="<li>"+e+"</li>"}),o+="</ul>"),e.callback.call(e.callback,o),!1},aimluck.io.sendRawData=function(e,i,o,t){var a=new Array;try{dojo.xhrGet({url:e,method:"POST",encoding:"utf-8",content:i,mimetype:"text/json",sync:!0,load:function(e,i,n,l){return a.type=e,a.data=i,a.event=n,a.args=l,a.bool=!0,o.call(o,t,a),a}})}catch(n){alert("error")}},aimluck.io.escapeText=function(e){var i;return"undefined"!=typeof dojo.byId(e).innerText?i=dojo.byId(e).innerText:"undefined"!=typeof dojo.byId(e).value?i=dojo.byId(e).value:"undefined"!=typeof dojo.byId(e).textContent&&(i=dojo.byId(e).textContent),i},aimluck.io.disableForm=function(e,i){function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function t(){return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}if(null!=e)if(i){for(var a=e.elements,n=0;n<a.length;n++)if(("submit"==a[n].type||"button"==a[n].type)&&"none"!=a[n].style.display){var l=t(),r=document.createElement("span");r.id=l,r.className=a[n].className,r.style.display=a[n].style.display,a[n].parentNode.insertBefore(r,a[n]),r.appendChild(document.createTextNode(a[n].value)),dojo.addClass(r,"auiButtonDisabled"),a[n].style.display="none",dojo.addClass(a[n],l)}}else for(var u=dojo.query(".auiButtonDisabled",e),n=0;n<u.length;n++){var l=u[n].id,c=dojo.query("."+l)[0];dojo.removeClass(c,l),c.style.display=u[n].style.display,u[n].parentNode.removeChild(u[n])}},aimluck.io.actionSubmit=function(e){aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=e.form.action+"?"+e.name+"=1",e.form.submit()},aimluck.io.ajaxActionSubmit=function(e,i,o,t,a){aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a)},aimluck.io.actionSubmitReturn=function(e,i){aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=e.form.action+"?"+e.name+"=1&action="+i,e.form.submit()},aimluck.io.deleteSubmit=function(e){var i=dojo.i18n.getLocalization("aipo","locale"),o=dojo.string.substitute(i.DW_STR,{dw_del:i.DW_DEL,dw_this:i.DW_THIS,dw_name:e.form._name.value});confirm(o)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=e.form.action+"?"+e.name+"=1",e.form.submit())},aimluck.io.ajaxDeleteSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.DW_STR,{dw_del:n.DW_DEL,dw_this:n.DW_THIS,dw_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.ajaxEnableSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.ENABLESUBMIT_STR,{enableSubmit_this:n.ENABLESUBMIT_THIS,enableSubmit_enable:n.ENABLESUBMIT_ENABLE,enableSubmit_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.ajaxDisableSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.DISABLESUBMIT_STR,{disableSubmit_this:n.DISABLESUBMIT_THIS,disableSubmit_disable:n.DISABLESUBMIT_DISABLE,disableSubmit_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.deleteSubmitReturn=function(e,i){var o=dojo.i18n.getLocalization("aipo","locale"),t=dojo.string.substitute(o.DW_STR,{dw_del:o.DW_DEL,dw_this:o.DW_THIS,dw_name:e.form._name.value});confirm(t)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=e.form.action+"?"+e.name+"=1&action="+i,e.form.submit())},aimluck.io.multiDeleteSubmit=function(e){var i=dojo.i18n.getLocalization("aipo","locale"),o=dojo.string.substitute(i.DWS_STR,{dws_del:i.DWS_DEL,dws_sel:i.DWS_SEL,dws_name:e.form._name.value});confirm(o)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=e.form.action+"?"+e.name+"=1",e.form.submit())},aimluck.io.ajaxMultiDeleteSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.DWS_STR,{dws_del:n.DWS_DEL,dws_sel:n.DWS_SEL,dws_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.ajaxMultiEnableSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.MULTIENABLESUBMIT_STR,{multiEnableSubmit_sel:n.MULTIENABLESUBMIT_SEL,multiEnableSubmit_enable:n.MULTIENABLESUBMIT_ENABLE,multiEnableSubmit_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.ajaxMultiDisableSubmit=function(e,i,o,t,a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.MULTIDISABLESUBMIT_STR,{multiDisableSubmit_sel:n.MULTIDISABLESUBMIT_SEL,multiDisableSubmit_disable:n.MULTIDISABLESUBMIT_DISABLE,multiDisableSubmit_name:e.form._name.value});confirm(l)&&(aimluck.io.disableForm(e.form,!0),aimluck.io.setHiddenValue(e),e.form.action=i,aimluck.io.submit(e.form,o,t,a))},aimluck.io.setHiddenValue=function(e){if(e.name){var i=document.createElement("input");i.type="hidden",i.name=e.name,i.value=e.value,e.form.appendChild(i)}},aimluck.io.openDialog=function(e,i,o,t){aimluck.io.disableForm(e.form,!0),aipo.common.showDialog(i,o,t)},aimluck.io.checkboxActionSubmit=function(e){aimluck.io.verifyCheckbox(e.form,aimluck.io.actionSubmit,e)},aimluck.io.ajaxCheckboxActionSubmit=function(e,i,o,t,a){aimluck.io.ajaxVerifyCheckbox(e.form,aimluck.io.ajaxActionSubmit,e,i,o,t,a)},aimluck.io.checkboxDeleteSubmit=function(e){aimluck.io.verifyCheckbox(e.form,aimluck.io.multiDeleteSubmit,e)},aimluck.io.ajaxCheckboxDeleteSubmit=function(e,i,o,t,a){aimluck.io.ajaxVerifyCheckbox(e.form,aimluck.io.ajaxMultiDeleteSubmit,e,i,o,t,a)},aimluck.io.ajaxCheckboxEnableSubmit=function(e,i,o,t,a){aimluck.io.ajaxVerifyCheckbox(e.form,aimluck.io.ajaxMultiEnableSubmit,e,i,o,t,a)},aimluck.io.ajaxCheckboxDisableSubmit=function(e,i,o,t,a){aimluck.io.ajaxVerifyCheckbox(e.form,aimluck.io.ajaxMultiDisableSubmit,e,i,o,t,a)},aimluck.io.verifyCheckbox=function(e,i,o){var t,a=0;for(t=0;t<e.elements.length;t++)e.elements[t].checked&&a++;if(0==a){var n=dojo.i18n.getLocalization("aipo","locale"),l=dojo.string.substitute(n.VERIFYCB_STR,{verifycb_sel:n.VERIFYCB_SEL,verifycb_gt_one:n.VERIFYCB_GT_ONE,verifycb_cb:n.VERIFYCB_CB});return alert(l),!1}return i(o)},aimluck.io.ajaxVerifyCheckbox=function(e,i,o,t,a,n,l){var r,u=0;for(r=0;r<e.elements.length;r++)e.elements[r].checked&&u++;if(0==u){var c=dojo.i18n.getLocalization("aipo","locale"),d=dojo.string.substitute(c.VERIFYCB_STR,{verifycb_sel:c.VERIFYCB_SEL,verifycb_gt_one:c.VERIFYCB_GT_ONE,verifycb_cb:c.VERIFYCB_CB});return alert(d),!1}return i(o,t,a,n,l)},aimluck.io.createOptions=function(e,i){var o,t,a,n,l,r,u,c;if(i.url&&(l=i.url),i.key&&(a=i.key),i.value&&(n=i.value),"undefined"==typeof i.selectedId||(o=i.selectedId),"undefined"==typeof i.preOptions||(t=i.preOptions),"undefined"==typeof i.indicator);else{r=i.indicator;var d=dojo.byId(r);d&&dojo.style(d,"display","none")}"undefined"==typeof i.callback||(u=i.callback,"undefined"==typeof i.callbackTarget||(c=i.callbackTarget)),dojo.xhrGet({url:l,timeout:1e4,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(i){var l=dojo.byId(e);l.options.length=0,"undefined"==typeof t||aimluck.io.addOption(l,t.key,t.value,!1),dojo.forEach(i,function(e){"undefined"==typeof e[a]||"undefined"==typeof e[n]||(e[a]==o?aimluck.io.addOption(l,e[a],e[n],!0):aimluck.io.addOption(l,e[a],e[n],!1))}),d&&dojo.style(d,"display","none"),u&&u.call(c?c:u,i)}})},aimluck.io.replaceToAutoCRString=function(e){var i,o="",t=4,a=e.length,n=Math.floor(a/t);for(i=0;n>i;i++){var l=i*t;o=o.concat(e.substr(l,t)).concat("<wbr/>")}return a>n*t&&(o=o.concat(e.substr(n*t))),o},aimluck.io.addFileToList=function(e,i,o){var t=dojo.i18n.getLocalization("aipo","locale");if("none"==e.parentNode.style.display&&(e.parentNode.style.display=""),document.all){var a=document.createElement("li");return a.setAttribute("data-fileid",i),a.setAttribute("data-filename",o),a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(o)+'</span><span class="deletebutton" onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+t.DELETE_STR+"</span>",e.appendChild(a)}var a=document.createElement("li");return a.setAttribute("data-fileid",i),a.setAttribute("data-filename",o),a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(o)+'</span><span class="deletebutton"  onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+t.DELETE_STR+"</span>",e.appendChild(a)},aimluck.io.replaceFileToList=function(e,i,o){var t=dojo.i18n.getLocalization("aipo","locale");if(document.all){var a=document.createElement("li");return a.setAttribute("data-fileid",i),a.setAttribute("data-filename",o),a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(o)+'</span><span class="deletebutton" onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+t.DELETE_STR+"</span>",e.innerHTML="",e.appendChild(a)}var a=document.createElement("li");return a.setAttribute("data-fileid",i),a.setAttribute("data-filename",o),a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(o)+'</span><span class="deletebutton"  onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+t.DELETE_STR+"</span>",e.innerHTML="",e.appendChild(a)},aimluck.io.removeFileFromList=function(e,i){e.removeChild(i);var o=document.getElementById("modalDialog");if(o){var t=document.getElementById("wrapper");t.style.minHeight=o.clientHeight+"px"}},aimluck.io.createSelectFromFileList=function(e,i){var o=dojo.byId("attachments_"+i),t=document.createElement("select");t.style.display="none",t.id="attachments_select",t.multiple="multiple",t.name="attachments";for(var a=o.children,n=0;n<a.length;n++){var l=document.createElement("option");l.value=a[n].getAttribute("data-fileid"),l.text=a[n].getAttribute("data-filename"),l.selected=!0,t.appendChild(l)}e.appendChild(t)},aimluck.io.addOption=function(e,i,o,t){if(document.all){var a=document.createElement("OPTION");a.value=i,a.text=o,a.selected=t,1==e.options.length&&""==e.options[0].value&&e.options.remove(0),e.add(a,e.options.length)}else{var a=document.createElement("OPTION");a.value=i,a.text=o,a.selected=t,1==e.options.length&&""==e.options[0].value&&e.removeChild(e.options[0]),e.insertBefore(a,e.options[e.options.length])}},aimluck.io.removeOptions=function(e){if(document.all){var o=e.options;for(i=0;i<o.length;i++)o[i].selected&&(o.remove(i),i-=1)}else{var o=e.options;for(i=0;i<o.length;i++)o[i].selected&&(e.removeChild(o[i]),i-=1)}0==o.length&&add_option(e,"","　",!1)},aimluck.io.removeAllOptions=function(e){if(0!=e.options.length){if(aimluck.io.selectAllOptions(e),document.all){var o=e.options;for(i=0;i<o.length;i++)o[i].selected&&(o.remove(i),i-=1)}else{var o=e.options;for(i=0;i<o.length;i++)o[i].selected&&(e.removeChild(o[i]),i-=1)}0==o.length&&add_option(e,"","　",!1)}},aimluck.io.selectAllOptions=function(e){var o=e.options;if(0!=o.length)for(i=0;i<o.length;i++)o[i].selected=!0},aimluck.io.switchCheckbox=function(e){var o;if(e.checked)for(i=0;i<e.form.elements.length;i++)o=e.form.elements[i],o.disabled||"checkbox"!=o.type||(o.checked=!0);else for(i=0;i<e.form.elements.length;i++)o=e.form.elements[i],o.disabled||"checkbox"!=o.type||(o.checked=!1)},aimluck.io.postViewPage=function(e,i,o){aimluck.io.disableForm(e,!0);var t=dojo.byId(o+i);t&&dojo.style(t,"display",""),dojo.xhrPost({url:e.action,timeout:3e4,form:e,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(a){var n=a;if(t=dojo.byId(o+i),t&&dojo.style(t,"display","none"),""!=n){aimluck.io.disableForm(e,!1);var l=dijit.byId("portlet_"+i);l||(l=new aimluck.widget.Contentpane({},"portlet_"+i)),l&&(ptConfig[i].reloadUrl=ptConfig[i].initUrl,l._isDownloaded=!0,l.setContent(n))}null!=aipo.onloadSmartPhone&&aipo.onloadSmartPhone()},error:function(){}})},aimluck.io.onTextFieldFocus=function(){var e=document.getElementById("mobileHeader_v3");e&&(aipo.userAgent.isAndroid()||(e.style.position="absolute",e.style.top="0px"))},aimluck.io.onTextFieldBlur=function(){var e=document.getElementById("mobileHeader_v3");e&&(aipo.userAgent.isAndroid()||(e.style.position="",e.style.top="0px"))},aimluck.io.selectPost=function(e,i,o,t,a){var n=dojo.byId(o+t);n&&dojo.style(n,"display","block");var l=function(e){var i="";return dojo.isArray(e)&&e.length>0&&("PermissionError"==e[0]?(i+="<ul>",i+="<li><span class='caution'>"+e[1]+"</span></li>",i+="</ul>"):(i+="<ul>",dojo.forEach(e,function(e){i+="<li><span class='caution'>"+e+"</span></li>"}),i+="</ul>")),i};try{dojo.xhrPost({url:i,timeout:3e4,content:e,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(e){var i=[],n="";e.err?n=l(e.err):e.length>0&&(n=l(e)),i.push(n),i.push(t),dojo.isArray(e.params)&&dojo.forEach(e.params,function(e){i.push(e)});var r=dojo.byId(o+t);r&&dojo.style(r,"display","none"),a.apply(a,i)},error:function(){var e=["",t];a.apply(a,e)}})}catch(r){var u=["",t];a.apply(a,u)}};