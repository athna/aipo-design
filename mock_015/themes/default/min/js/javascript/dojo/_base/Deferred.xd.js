dojo._xdResourceLoaded({depends:[["provide","dojo._base.Deferred"],["require","dojo._base.lang"]],defineResource:function(e){e._hasResource["dojo._base.Deferred"]||(e._hasResource["dojo._base.Deferred"]=!0,e.provide("dojo._base.Deferred"),e.require("dojo._base.lang"),e.Deferred=function(e){this.chain=[],this.id=this._nextId(),this.fired=-1,this.paused=0,this.results=[null,null],this.canceller=e,this.silentlyCancelled=!1},e.extend(e.Deferred,{_nextId:function(){var e=1;return function(){return e++}}(),cancel:function(){var r;if(-1==this.fired){if(this.canceller?r=this.canceller(this):this.silentlyCancelled=!0,-1==this.fired){if(!(r instanceof Error)){var t=r;r=new Error("Deferred Cancelled"),r.dojoType="cancel",r.cancelResult=t}this.errback(r)}}else 0==this.fired&&this.results[0]instanceof e.Deferred&&this.results[0].cancel()},_resback:function(e){this.fired=e instanceof Error?1:0,this.results[this.fired]=e,this._fire()},_check:function(){if(-1!=this.fired){if(!this.silentlyCancelled)throw new Error("already called!");return this.silentlyCancelled=!1,void 0}},callback:function(e){this._check(),this._resback(e)},errback:function(e){this._check(),e instanceof Error||(e=new Error(e)),this._resback(e)},addBoth:function(r,t){var i=e.hitch(r,t);return arguments.length>2&&(i=e.partial(i,arguments,2)),this.addCallbacks(i,i)},addCallback:function(r,t){var i=e.hitch(r,t);return arguments.length>2&&(i=e.partial(i,arguments,2)),this.addCallbacks(i,null)},addErrback:function(r,t){var i=e.hitch(r,t);return arguments.length>2&&(i=e.partial(i,arguments,2)),this.addCallbacks(null,i)},addCallbacks:function(e,r){return this.chain.push([e,r]),this.fired>=0&&this._fire(),this},_fire:function(){for(var r=this.chain,t=this.fired,i=this.results[t],s=this,n=null;r.length>0&&0==this.paused;){var a=r.shift()[t];if(a)try{i=a(i),t=i instanceof Error?1:0,i instanceof e.Deferred&&(n=function(e){s._resback(e),s.paused--,0==s.paused&&s.fired>=0&&s._fire()},this.paused++)}catch(c){console.debug(c),t=1,i=c}}this.fired=t,this.results[t]=i,n&&this.paused&&i.addBoth(n)}}))}});