dojo._hasResource["dojox.gfx.move"]||(dojo._hasResource["dojox.gfx.move"]=!0,dojo.provide("dojox.gfx.move"),dojo.experimental("dojox.gfx.move"),dojox.gfx.Mover=function(o,e){this.shape=o,this.lastX=e.clientX,this.lastY=e.clientY;var s=document,t=dojo.connect(s,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(s,"onmousemove",this,"onMouseMove"),dojo.connect(s,"onmouseup",this,"destroy"),dojo.connect(s,"ondragstart",dojo,"stopEvent"),dojo.connect(s,"onselectstart",dojo,"stopEvent"),t],dojo.publish("/gfx/move/start",[this]),dojo.addClass(dojo.body(),"dojoMove")},dojo.extend(dojox.gfx.Mover,{onMouseMove:function(o){var e=o.clientX,s=o.clientY;this.shape.applyLeftTransform({dx:e-this.lastX,dy:s-this.lastY}),this.lastX=e,this.lastY=s,dojo.stopEvent(o)},onFirstMove:function(){dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect),dojo.publish("/gfx/move/stop",[this]),dojo.removeClass(dojo.body(),"dojoMove"),this.events=this.shape=null}}),dojox.gfx.Moveable=function(o,e){this.shape=o,this.delay=e&&e.delay>0?e.delay:0,this.mover=e&&e.mover?e.mover:dojox.gfx.Mover,this.events=[this.shape.connect("onmousedown",this,"onMouseDown")]},dojo.extend(dojox.gfx.Moveable,{destroy:function(){dojo.forEach(this.events,"disconnect",this.shape),this.events=this.shape=null},onMouseDown:function(o){this.delay?(this.events.push(this.shape.connect("onmousemove",this,"onMouseMove")),this.events.push(this.shape.connect("onmouseup",this,"onMouseUp")),this._lastX=o.clientX,this._lastY=o.clientY):new this.mover(this.shape,o),dojo.stopEvent(o)},onMouseMove:function(o){(Math.abs(o.clientX-this._lastX)>this.delay||Math.abs(o.clientY-this._lastY)>this.delay)&&(this.onMouseUp(o),new this.mover(this.shape,o)),dojo.stopEvent(o)},onMouseUp:function(){this.shape.disconnect(this.events.pop()),this.shape.disconnect(this.events.pop())}}));